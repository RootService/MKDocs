
<!doctype html>
<html lang="de" class="no-js">
  <head>
    
        <meta charset="utf-8" />
      
        
        
      
      
      
        <meta name="description" content="In diesem HowTo wird step-by-step die Remote Installation des FreeBSD 64Bit BaseSystem auf einem dedizierten Server beschrieben." />
      
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes" />
      
        <meta name="CCBot" content="nofollow" />
        <meta name="robots" content="noai, noimageai, notrain, noarchive, noimageindex, max-snippet:-1, max-image-preview:-1, max-video-preview:-1, index, follow" />
      
        <meta name="tdm-reservation" content="1" />
        <meta name="format-detection" content="telephone=no" />
      
        <meta name="author" content="Markus Kohlmeyer" />
      
      
        <meta name="publisher" content="RootService Team" />
      
      
        <meta name="date" content="2025-06-28T12:00:00+02:00" />
      
        <link rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
      
        <link rel="canonical" href="https://www.rootservice.org/howtos/freebsd/remote_install/basesystem/">
      
      
        <link rel="prev" href="../intro/" />
      
      
        <link rel="next" href="../baseports/" />
      
      
        <link rel="me" href="https://github.com/JoeUser78">
      
        <link rel="copyright" href="/about/copyright/" />
        <link rel="icon" href="/assets/favicons/favicon.svg" type="image/svg+xml" />
        <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png" />
        <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png" />
        <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png" />
        <link rel="icon" type="image/vnd.microsoft.icon" href="/assets/favicons/favicon.ico" />
        <link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg" color="#ff00a8" />
        <link rel="manifest" href="/assets/favicons/manifest.json" type="application/manifest+json" />
        <meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff" />
        <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#0b0013" />
      
        <meta property="article:content_tier" content="free" />
        <meta property="article:opinion" content="false" />
      
    
      
        <title>BaseSystem - RootService</title>
      
      
    
<!--
        <link rel="preload" as="style" href="../../../../assets/stylesheets/main.7e37652d.min.css" onload="this.onload=null;this.rel='stylesheet'" />
        <noscript><link rel="stylesheet" href="../../../../assets/stylesheets/main.7e37652d.min.css" /></noscript>
-->
        <link rel="preload" as="style" href="../../../../assets/stylesheets/main.202509142335.css" onload="this.onload=null;this.rel='stylesheet'" />
        <noscript><link rel="stylesheet" href="../../../../assets/stylesheets/main.202509142335.css" /></noscript>
      
        
<!--
        <link rel="preload" as="style" href="../../../../assets/stylesheets/palette.06af60db.min.css" onload="this.onload=null;this.rel='stylesheet'" />
        <noscript><link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css" /></noscript>
-->
        <link rel="preload" as="style" href="../../../../assets/stylesheets/palette.202509142335.css" onload="this.onload=null;this.rel='stylesheet'" />
        <noscript><link rel="stylesheet" href="../../../../assets/stylesheets/palette.202509142335.css" /></noscript>
        <link rel="preload" as="style" href="../../../../assets/stylesheets/github.202509142335.css" onload="this.onload=null;this.rel='stylesheet'" />
        <noscript><link rel="stylesheet" href="../../../../assets/stylesheets/github.202509142335.css" /></noscript>
      
      


  
  
    
      
      
      
    
  
  
  <style>:root{.md-tag{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22m21.41%2011.58-9-9A2%202%200%200%200%2011%202H4a2%202%200%200%200-2%202v7a2%202%200%200%200%20.59%201.42l9%209A2%202%200%200%200%2013%2022a2%202%200%200%200%201.41-.59l7-7A2%202%200%200%200%2022%2013a2%202%200%200%200-.59-1.42M13%2020l-9-9V4h7l9%209M6.5%205A1.5%201.5%200%201%201%205%206.5%201.5%201.5%200%200%201%206.5%205%22/%3E%3C/svg%3E');}}</style>

      
        <link rel="preload" as="style" href="../../../../assets/stylesheets/extra.css" onload="this.onload=null;this.rel='stylesheet'" />
        <noscript><link rel="stylesheet" href="../../../../assets/stylesheets/extra.css" /></noscript>
      
      
    
      
      
    
      
        
        
        <link rel="preload" as="style" type="text/css" href="../../../../assets/external/fonts.googleapis.com/css2.8b05092a.css" onload="this.onload=null;this.rel='stylesheet'" crossorigin="anonymous">
        <noscript>
        <link rel="stylesheet" type="text/css" href="../../../../assets/external/fonts.googleapis.com/css2.8b05092a.css" crossorigin="anonymous">
        </noscript>
        <style>
          :root {
            --md-text-font: 'Roboto Flex';
            --md-code-font: 'Roboto Mono';
          }
        </style>
      
      
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
        

      
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="BaseSystem - RootService" >
      
        <meta  property="og:description"  content="In diesem HowTo wird step-by-step die Remote Installation des FreeBSD 64Bit BaseSystem auf einem dedizierten Server beschrieben." >
      
        <meta  property="og:image"  content="https://www.rootservice.org/assets/images/social/howtos/freebsd/remote_install/basesystem.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://www.rootservice.org/howtos/freebsd/remote_install/basesystem/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="BaseSystem - RootService" >
      
        <meta  name="twitter:description"  content="In diesem HowTo wird step-by-step die Remote Installation des FreeBSD 64Bit BaseSystem auf einem dedizierten Server beschrieben." >
      
        <meta  name="twitter:image"  content="https://www.rootservice.org/assets/images/social/howtos/freebsd/remote_install/basesystem.png" >
      
    
    
      
        <script type="application/ld+json">
          {
            "@context": "https://schema.org",
            "@type": "TechArticle",
            "@id": "https://www.rootservice.org/howtos/freebsd/remote_install/basesystem/",
            "url": "https://www.rootservice.org/howtos/freebsd/remote_install/basesystem/",
            "name": "RootService",
            
            "headline": "BaseSystem",
            
            "inLanguage": "de",
            "author": {
              "@type": "Person",
            
              "name": "Markus Kohlmeyer",
              "url": "https://github.com/JoeUser78"
            
            },
            
            "publisher": {
              "@type": "Organization",
              "name": "RootService Team",
              "url": "https://github.com/RootService",
              "logo": {
                "@type": "ImageObject",
                "url": "https://www.rootservice.org/material/book-open-page-variant"
              }
            },
            
            
            "datePublished": "2010-08-25T12:00:00+02:00",
            
            
            "dateModified": "2025-06-28T12:00:00+02:00",
            
            
            "license": "https://creativecommons.org/licenses/by-nc-sa/4.0/",
            
            "image": "https://www.rootservice.org/material/book-open-page-variant"
          }
        </script>
      
      
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="deep_purple" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#einleitung" class="md-skip">
          Zum Inhalt
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      



<header class="md-header md-header--shadow md-header--lifted" data-md-component="header" role="banner">
  <nav class="md-header__inner md-grid" role="navigation" aria-label="Kopfzeile">
    <a href="https://www.rootservice.org/" title="RootService" class="md-header__button md-logo" aria-label="RootService" data-md-component="logo">
    
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer" role="button" aria-label="Menü" aria-controls="__drawer">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
          RootService
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
          
          BaseSystem
          
          </span>
        </div>
      </div>
    </div>
    
    <div class="md-header__option">
      <a href="https://www.paypal.me/JoeUser" target="_blank" rel="noopener" title="Donate via Paypal" class="md-header__button md-icon" aria-label="Donate via Paypal" data-md-component="paypal">
      
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.055,7.713c-0.677-0.842-1.673-1.41-2.764-1.615C16.773,3.971,14.877,3,13.045,3H7.057C6.425,3,5.878,3.409,5.689,4.009 c-0.015,0.04-0.026,0.082-0.036,0.125L3.034,16.262c-0.009,0.041-0.015,0.083-0.019,0.125C3.006,16.449,3,16.513,3,16.56 C3,17.354,3.648,18,4.444,18h2.316l-0.267,1.262c-0.008,0.04-0.014,0.081-0.018,0.121c-0.009,0.063-0.016,0.126-0.016,0.173 C6.461,20.353,7.109,21,7.905,21h3.259c0.056,0,0.111-0.005,0.166-0.015c0.549-0.063,1.011-0.437,1.191-0.963 c0.021-0.05,0.038-0.103,0.05-0.156L13.475,16h1.398c3.365,0,5.38-1.445,5.989-4.295C21.278,9.752,20.653,8.456,20.055,7.713z M5.137,16L7.512,5h5.533c0.293,0,1.5,0.061,2.078,1.013h-4.706c-0.626,0-1.17,0.401-1.363,0.99c-0.019,0.049-0.033,0.1-0.043,0.151 l-1.034,5.093L7.183,16H5.137z M18.906,11.287C18.5,13.188,17.293,14,14.873,14h-1.857c-0.823,0-1.338,0.652-1.405,1.198L10.721,19 H8.594l1.271-6h1.444c4.259,0,5.665-2.394,6.094-4.402c0.027-0.128,0.045-0.256,0.057-0.382c0.378,0.151,0.749,0.393,1.038,0.751 C18.971,9.557,19.108,10.337,18.906,11.287z"/></svg>
      </a>
    </div>
    
    
    
    <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep_purple" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep_purple" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
     
    
    <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
    
    <label class="md-header__button md-icon" for="__search" role="button" aria-label="Suche öffnen" aria-controls="__search">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M416 208c0 45.9-14.9 88.3-40 122.7l126.6 126.7c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.1-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208M208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288"/></svg>
    </label>
    <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Suche" placeholder="Suche" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M416 208c0 45.9-14.9 88.3-40 122.7l126.6 126.7c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.1-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208M208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 22 3 12 13 2v6h8v8h-8zM6 12l5 5v-3h8v-4h-8V7z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Suche">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Teilen" aria-label="Teilen" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91-1.31-2.92-2.92-2.92M18 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1M6 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m12 7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Zurücksetzen" aria-label="Zurücksetzen" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-18C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m2.59 6L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Suche wird initialisiert
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
     
    <div class="md-header__source">
    <a href="https://github.com/RootService/MKDocs" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg>
  </div>
  <div class="md-source__repository">
    RootService/MKDocs
  </div>
</a>
    </div>
    
  </nav>
  
  
  
<nav class="md-tabs" aria-label="Hauptnavigation" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../general/getting_started/" class="md-tabs__link">
          
  
  
    
  
  HowTos

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../projects/rootforum_community/" class="md-tabs__link">
          
  
  
    
  
  Projekte

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../about/imprint/" class="md-tabs__link">
          
  
  
    
  
  About

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
  
  
</header>
      
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://www.rootservice.org/" title="RootService" class="md-nav__button md-logo" aria-label="RootService" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg>

    </a>
    RootService
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/RootService/MKDocs" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg>
  </div>
  <div class="md-source__repository">
    RootService/MKDocs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    HowTos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            HowTos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Allgemein
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Allgemein
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../general/getting_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pro und Contra dedizierter Server
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Sicherheit
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Sicherheit
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/server_hacked/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vorgehensweise bei gehacktem Server
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" checked>
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    FreeBSD
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            FreeBSD
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mfsbsd_image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mfsBSD Image
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2_3_2" id="__nav_2_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Remote Installation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3_2">
            <span class="md-nav__icon md-icon"></span>
            Remote Installation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Remote Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    BaseSystem
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    BaseSystem
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#einleitung" class="md-nav__link">
    <span class="md-ellipsis">
      Einleitung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#voraussetzungen" class="md-nav__link">
    <span class="md-ellipsis">
      Voraussetzungen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rescuesystem-booten" class="md-nav__link">
    <span class="md-ellipsis">
      RescueSystem booten
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mfsbsd-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      mfsBSD installieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#freebsd-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      FreeBSD installieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partitionieren-der-festplatte" class="md-nav__link">
    <span class="md-ellipsis">
      Partitionieren der Festplatte
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#formatieren-der-partitionen" class="md-nav__link">
    <span class="md-ellipsis">
      Formatieren der Partitionen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mounten-der-partitionen" class="md-nav__link">
    <span class="md-ellipsis">
      Mounten der Partitionen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation-der-chroot-umgebung" class="md-nav__link">
    <span class="md-ellipsis">
      Installation der Chroot-Umgebung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vorbereiten-der-chroot-umgebung" class="md-nav__link">
    <span class="md-ellipsis">
      Vorbereiten der Chroot-Umgebung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#betreten-der-chroot-umgebung" class="md-nav__link">
    <span class="md-ellipsis">
      Betreten der Chroot-Umgebung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zeitzone-einrichten" class="md-nav__link">
    <span class="md-ellipsis">
      Zeitzone einrichten
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shell-einrichten" class="md-nav__link">
    <span class="md-ellipsis">
      Shell einrichten
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#systemsicherheit-verstärken" class="md-nav__link">
    <span class="md-ellipsis">
      Systemsicherheit verstärken
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Systemsicherheit verstärken">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#openssh-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      OpenSSH konfigurieren
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#etcsysctlconf-anpassen" class="md-nav__link">
    <span class="md-ellipsis">
      /etc/sysctl.conf anpassen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stärkere-passwort-hashes-verwenden" class="md-nav__link">
    <span class="md-ellipsis">
      Stärkere Passwort-Hashes verwenden
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#terminals-absichern" class="md-nav__link">
    <span class="md-ellipsis">
      Terminals absichern
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      System konfigurieren
    </span>
  </a>
  
    <nav class="md-nav" aria-label="System konfigurieren">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#systemgruppen-anlegen" class="md-nav__link">
    <span class="md-ellipsis">
      Systemgruppen anlegen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#systembenutzer-anlegen" class="md-nav__link">
    <span class="md-ellipsis">
      Systembenutzer anlegen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#buildsystem-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      Buildsystem konfigurieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kernel-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      Kernel konfigurieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#packet-filter-pf-einrichten" class="md-nav__link">
    <span class="md-ellipsis">
      Packet Filter (PF) einrichten
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#abschluss-der-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Abschluss der Installation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Abschluss der Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#einloggen-und-zu-root-werden" class="md-nav__link">
    <span class="md-ellipsis">
      Einloggen und zu root werden
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-aktualisieren" class="md-nav__link">
    <span class="md-ellipsis">
      System aktualisieren
    </span>
  </a>
  
    <nav class="md-nav" aria-label="System aktualisieren">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ports-mgmtpkg-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      ports-mgmt/pkg installieren
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      Git installieren
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#source-tree-auschecken" class="md-nav__link">
    <span class="md-ellipsis">
      Source Tree auschecken
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#portstree-auschecken" class="md-nav__link">
    <span class="md-ellipsis">
      Portstree auschecken
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git-deinstallieren" class="md-nav__link">
    <span class="md-ellipsis">
      Git deinstallieren
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfiguration-anpassen" class="md-nav__link">
    <span class="md-ellipsis">
      Konfiguration anpassen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vorbereitende-arbeiten" class="md-nav__link">
    <span class="md-ellipsis">
      Vorbereitende Arbeiten
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basissystem-rekompilieren" class="md-nav__link">
    <span class="md-ellipsis">
      Basissystem rekompilieren
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kernel-rekompilieren-und-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      Kernel rekompilieren und installieren
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basissystem-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      Basissystem installieren
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../baseports/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BasePorts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basetools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BaseTools
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../hosting_system/intro/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Hosting System
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Gentoo
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Gentoo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../gentoo/remote_install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Remote Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../gentoo/hosting_system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hosting System
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../../projects/rootforum_community/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Projekte
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../../about/imprint/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#einleitung" class="md-nav__link">
    <span class="md-ellipsis">
      Einleitung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#voraussetzungen" class="md-nav__link">
    <span class="md-ellipsis">
      Voraussetzungen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rescuesystem-booten" class="md-nav__link">
    <span class="md-ellipsis">
      RescueSystem booten
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mfsbsd-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      mfsBSD installieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#freebsd-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      FreeBSD installieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partitionieren-der-festplatte" class="md-nav__link">
    <span class="md-ellipsis">
      Partitionieren der Festplatte
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#formatieren-der-partitionen" class="md-nav__link">
    <span class="md-ellipsis">
      Formatieren der Partitionen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mounten-der-partitionen" class="md-nav__link">
    <span class="md-ellipsis">
      Mounten der Partitionen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation-der-chroot-umgebung" class="md-nav__link">
    <span class="md-ellipsis">
      Installation der Chroot-Umgebung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vorbereiten-der-chroot-umgebung" class="md-nav__link">
    <span class="md-ellipsis">
      Vorbereiten der Chroot-Umgebung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#betreten-der-chroot-umgebung" class="md-nav__link">
    <span class="md-ellipsis">
      Betreten der Chroot-Umgebung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zeitzone-einrichten" class="md-nav__link">
    <span class="md-ellipsis">
      Zeitzone einrichten
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shell-einrichten" class="md-nav__link">
    <span class="md-ellipsis">
      Shell einrichten
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#systemsicherheit-verstärken" class="md-nav__link">
    <span class="md-ellipsis">
      Systemsicherheit verstärken
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Systemsicherheit verstärken">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#openssh-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      OpenSSH konfigurieren
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#etcsysctlconf-anpassen" class="md-nav__link">
    <span class="md-ellipsis">
      /etc/sysctl.conf anpassen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stärkere-passwort-hashes-verwenden" class="md-nav__link">
    <span class="md-ellipsis">
      Stärkere Passwort-Hashes verwenden
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#terminals-absichern" class="md-nav__link">
    <span class="md-ellipsis">
      Terminals absichern
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      System konfigurieren
    </span>
  </a>
  
    <nav class="md-nav" aria-label="System konfigurieren">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#systemgruppen-anlegen" class="md-nav__link">
    <span class="md-ellipsis">
      Systemgruppen anlegen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#systembenutzer-anlegen" class="md-nav__link">
    <span class="md-ellipsis">
      Systembenutzer anlegen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#buildsystem-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      Buildsystem konfigurieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kernel-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      Kernel konfigurieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#packet-filter-pf-einrichten" class="md-nav__link">
    <span class="md-ellipsis">
      Packet Filter (PF) einrichten
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#abschluss-der-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Abschluss der Installation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Abschluss der Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#einloggen-und-zu-root-werden" class="md-nav__link">
    <span class="md-ellipsis">
      Einloggen und zu root werden
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-aktualisieren" class="md-nav__link">
    <span class="md-ellipsis">
      System aktualisieren
    </span>
  </a>
  
    <nav class="md-nav" aria-label="System aktualisieren">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ports-mgmtpkg-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      ports-mgmt/pkg installieren
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      Git installieren
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#source-tree-auschecken" class="md-nav__link">
    <span class="md-ellipsis">
      Source Tree auschecken
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#portstree-auschecken" class="md-nav__link">
    <span class="md-ellipsis">
      Portstree auschecken
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git-deinstallieren" class="md-nav__link">
    <span class="md-ellipsis">
      Git deinstallieren
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konfiguration-anpassen" class="md-nav__link">
    <span class="md-ellipsis">
      Konfiguration anpassen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vorbereitende-arbeiten" class="md-nav__link">
    <span class="md-ellipsis">
      Vorbereitende Arbeiten
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basissystem-rekompilieren" class="md-nav__link">
    <span class="md-ellipsis">
      Basissystem rekompilieren
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kernel-rekompilieren-und-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      Kernel rekompilieren und installieren
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basissystem-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      Basissystem installieren
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
      
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                <a class="skip-link" href="#main-content">Zum Inhalt springen</a>
                <main id="main-content" role="main" tabindex="-1">
                  


  
    <a href="https://github.com/RootService/MKDocs/edit/main/docs/howtos/freebsd/remote_install/basesystem.md" title="Seite editieren" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8 12h8v2H8zm2 8H6V4h7v5h5v3.1l2-2V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4zm-2-2h4.1l.9-.9V16H8zm12.2-5c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/RootService/MKDocs/raw/main/docs/howtos/freebsd/remote_install/basesystem.md" title="Quellcode der Seite anzeigen" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zm0 2h7v5h5v11H6zm2 8v2h8v-2zm0 4v2h5v-2z"/></svg>
    </a>
  


  <h1>BaseSystem</h1>

<h2 id="einleitung">Einleitung<a class="headerlink" href="#einleitung" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>In diesem HowTo beschreibe ich step-by-step die Remote Installation des <a href="https://www.freebsd.org/" rel="noopener" target="_blank">FreeBSD 64BIT</a>
BaseSystem mittels <a href="https://mfsbsd.vx.sk/" rel="noopener" target="_blank">mfsBSD</a> auf einem dedizierten Server.
Um eine weitere Republikation der offiziellen <a href="https://docs.freebsd.org/en/books/handbook/" rel="noopener" target="_blank">FreeBSD Dokumentation</a>
zu vermeiden, werde ich in diesem HowTo nicht alle Punkte bis ins Detail erläutern.</p>
<p>Unser BaseSystem wird folgende Dienste umfassen.</p>
<ul>
<li>FreeBSD 14.3-RELEASE 64Bit</li>
<li>OpenSSL 3.0.16</li>
<li>OpenSSH 9.9p2</li>
<li>Unbound 1.22.0</li>
</ul>
<h2 id="voraussetzungen">Voraussetzungen<a class="headerlink" href="#voraussetzungen" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Zu den Voraussetzungen für dieses HowTo siehe bitte: <a href="../intro/">Remote Installation</a></p>
<h2 id="rescuesystem-booten">RescueSystem booten<a class="headerlink" href="#rescuesystem-booten" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Um unser <a href="../../mfsbsd_image/">mfsBSD Image</a> installieren zu können, müssen wir unsere virtuelle Maschine mit
einem RescueSystem booten. Hierfür eignet sich die auf <a href="https://www.archlinux.org/" rel="noopener" target="_blank">Arch Linux</a>
basierende <a href="https://www.system-rescue.org/" rel="noopener" target="_blank">SystemRescueCD</a> am Besten, welche wir
mittels des mit Windows mitgelieferten cURL-Client herunterladen und unserer virtuellen Maschine als Bootmedium zuweisen.</p>
<div class="language-powershell highlight"><span class="filename">PowerShell</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1"></a><a href="#__codelineno-0-1"><span class="linenos" data-linenos="1 "></span></a><span class="nb">cd </span><span class="s2">&quot;${Env:USERPROFILE}\VirtualBox VMs\FreeBSD&quot;</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2"></a><a href="#__codelineno-0-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3"></a><a href="#__codelineno-0-3"><span class="linenos" data-linenos="3 "></span></a><span class="nb">curl </span><span class="n">-o</span> <span class="s2">&quot;systemrescue-12.01-amd64.iso&quot;</span> <span class="n">-L</span> <span class="s2">&quot;https://fastly-cdn.system-rescue.org/releases/12.01/systemrescue-12.01-amd64.iso&quot;</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4"></a><a href="#__codelineno-0-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5"></a><a href="#__codelineno-0-5"><span class="linenos" data-linenos="5 "></span></a><span class="p">&amp;</span> <span class="s2">&quot;${Env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe&quot;</span> <span class="n">storageattach</span> <span class="s2">&quot;FreeBSD&quot;</span> <span class="p">-</span><span class="n">-storagectl</span> <span class="s2">&quot;AHCI Controller&quot;</span> <span class="p">-</span><span class="n">-port</span> <span class="n">0</span> <span class="p">-</span><span class="n">-device</span> <span class="n">0</span> <span class="p">-</span><span class="n">-type</span> <span class="n">dvddrive</span> <span class="p">-</span><span class="n">-medium</span> <span class="s2">&quot;systemrescue-12.01-amd64.iso&quot;</span>
</span></code></pre></div>
<p>Wir können das RescueSystem jetzt booten.</p>
<div class="language-powershell highlight"><span class="filename">PowerShell</span><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1"></a><a href="#__codelineno-1-1"><span class="linenos" data-linenos="1 "></span></a><span class="p">&amp;</span> <span class="s2">&quot;${Env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe&quot;</span> <span class="n">startvm</span> <span class="s2">&quot;FreeBSD&quot;</span>
</span></code></pre></div>
<p>Im Bootmenü wählen wir die erste Option "Boot with default options" aus.</p>
<p>Ist der Bootvorgang abgeschlossen, wird als Erstes das root-Passwort für das RescueSystem gesetzt und die Firewall
deaktiviert.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a><a href="#__codelineno-2-1"><span class="linenos" data-linenos=" 1 "></span></a>setkmap<span class="w"> </span>de
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2"></a><a href="#__codelineno-2-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3"></a><a href="#__codelineno-2-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="c1"># Password erzeugen und in /root/_passwords speichern</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4"></a><a href="#__codelineno-2-4"><span class="linenos" data-linenos=" 4 "></span></a>chmod<span class="w"> </span><span class="m">0600</span><span class="w"> </span>/root/_passwords
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5"></a><a href="#__codelineno-2-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="nv">newpw</span><span class="o">=</span><span class="s2">&quot;`openssl rand -hex 64 | openssl passwd -5 -stdin | tr -cd &#39;[[:print:]]&#39; | cut -c 2-17`&quot;</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6"></a><a href="#__codelineno-2-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Password for systemuser root: </span><span class="nv">$newpw</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/root/_passwords
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7"></a><a href="#__codelineno-2-7"><span class="linenos" data-linenos=" 7 "></span></a>chmod<span class="w"> </span><span class="m">0400</span><span class="w"> </span>/root/_passwords
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8"></a><a href="#__codelineno-2-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Password: </span><span class="nv">$newpw</span><span class="s2">&quot;</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9"></a><a href="#__codelineno-2-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="nb">unset</span><span class="w"> </span>newpw
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10"></a><a href="#__codelineno-2-10"><span class="linenos" data-linenos="10 "></span></a>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11"></a><a href="#__codelineno-2-11"><span class="linenos" data-linenos="11 "></span></a>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12"></a><a href="#__codelineno-2-12"><span class="linenos" data-linenos="12 "></span></a>passwd<span class="w"> </span>root
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13"></a><a href="#__codelineno-2-13"><span class="linenos" data-linenos="13 "></span></a>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14"></a><a href="#__codelineno-2-14"><span class="linenos" data-linenos="14 "></span></a>systemctl<span class="w"> </span>stop<span class="w"> </span>iptables
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15"></a><a href="#__codelineno-2-15"><span class="linenos" data-linenos="15 "></span></a>systemctl<span class="w"> </span>stop<span class="w"> </span>ip6tables
</span></code></pre></div>
<p>Jetzt sollten wir uns mittels PuTTY als <code>root</code> in das RescueSystem einloggen und mit der Installation unseres mfsBSD
Image fortfahren können.</p>
<div class="language-powershell highlight"><span class="filename">PowerShell</span><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1"></a><a href="#__codelineno-3-1"><span class="linenos" data-linenos="1 "></span></a><span class="n">putty</span> <span class="n">-ssh</span> <span class="n">-P</span> <span class="n">2222</span> <span class="n">root</span><span class="nv">@127</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">1</span>
</span></code></pre></div>
<h2 id="mfsbsd-installieren">mfsBSD installieren<a class="headerlink" href="#mfsbsd-installieren" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Um unsere umfangreichen Vorbereitungen nun abzuschliessen, müssen wir nur noch unser <a href="../../mfsbsd_image/">mfsBSD
Image</a> installieren und booten.</p>
<p>Als Erstes kopieren wir mittels PuTTYs SCP-Client (<code>pscp</code>) das mfsBSD Image in das RescueSystem.</p>
<div class="language-powershell highlight"><span class="filename">PowerShell</span><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a><a href="#__codelineno-4-1"><span class="linenos" data-linenos="1 "></span></a><span class="n">pscp</span> <span class="n">-P</span> <span class="n">2222</span> <span class="s2">&quot;${Env:USERPROFILE}\VirtualBox VMs\mfsBSD\mfsbsd-14.3-RELEASE-amd64.img&quot;</span> <span class="n">root</span><span class="nv">@127</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">1</span><span class="p">:/</span><span class="n">tmp</span><span class="p">/</span><span class="n">mfsbsd</span><span class="p">-</span><span class="n">14</span><span class="p">.</span><span class="n">3-RELEASE-amd64</span><span class="p">.</span><span class="n">img</span>
</span></code></pre></div>
<p>Jetzt können wir das mfsBSD Image mittels <code>dd</code> auf der ersten Festplatte (<code>/dev/nvme0n1</code>) unserer virtuellen Maschine
installieren und uns anschliessend wieder aus dem RescueSystem ausloggen.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1"></a><a href="#__codelineno-5-1"><span class="linenos" data-linenos="1 "></span></a>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/dev/zero<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/dev/nvme0n1<span class="w"> </span><span class="nv">count</span><span class="o">=</span><span class="m">512</span><span class="w"> </span><span class="nv">bs</span><span class="o">=</span>1M
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2"></a><a href="#__codelineno-5-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3"></a><a href="#__codelineno-5-3"><span class="linenos" data-linenos="3 "></span></a>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/tmp/mfsbsd-14.3-RELEASE-amd64.img<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/dev/nvme0n1<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>1M
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4"></a><a href="#__codelineno-5-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5"></a><a href="#__codelineno-5-5"><span class="linenos" data-linenos="5 "></span></a><span class="nb">exit</span>
</span></code></pre></div>
<p>Abschliessend stoppen wir die virtuelle Maschine vorübergehend und entfernen die SystemRescueCD aus dem virtuellen
DVD-Laufwerk.</p>
<div class="language-powershell highlight"><span class="filename">PowerShell</span><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1"></a><a href="#__codelineno-6-1"><span class="linenos" data-linenos="1 "></span></a><span class="p">&amp;</span> <span class="s2">&quot;${Env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe&quot;</span> <span class="n">controlvm</span> <span class="s2">&quot;FreeBSD&quot;</span> <span class="n">poweroff</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2"></a><a href="#__codelineno-6-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3"></a><a href="#__codelineno-6-3"><span class="linenos" data-linenos="3 "></span></a><span class="p">&amp;</span> <span class="s2">&quot;${Env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe&quot;</span> <span class="n">storageattach</span> <span class="s2">&quot;FreeBSD&quot;</span> <span class="p">-</span><span class="n">-storagectl</span> <span class="s2">&quot;AHCI Controller&quot;</span> <span class="p">-</span><span class="n">-port</span> <span class="n">0</span> <span class="p">-</span><span class="n">-device</span> <span class="n">0</span> <span class="p">-</span><span class="n">-type</span> <span class="n">dvddrive</span> <span class="p">-</span><span class="n">-medium</span> <span class="n">emptydrive</span>
</span></code></pre></div>
<h2 id="freebsd-installieren">FreeBSD installieren<a class="headerlink" href="#freebsd-installieren" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Nachdem nun alle Vorbereitungen abgeschlossen sind, können wir endlich mit der eigentlichen FreeBSD Remote Installation
beginnen, indem wir die virtuelle Maschine wieder booten.</p>
<div class="language-powershell highlight"><span class="filename">PowerShell</span><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1"></a><a href="#__codelineno-7-1"><span class="linenos" data-linenos="1 "></span></a><span class="p">&amp;</span> <span class="s2">&quot;${Env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe&quot;</span> <span class="n">startvm</span> <span class="s2">&quot;FreeBSD&quot;</span>
</span></code></pre></div>
<p>Jetzt sollten wir uns mittels PuTTY als <code>root</code> mit dem Passwort <code>mfsroot</code> in das mfsBSD Image einloggen und mit der
Installation von FreeBSD beginnen können.</p>
<div class="language-powershell highlight"><span class="filename">PowerShell</span><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1"></a><a href="#__codelineno-8-1"><span class="linenos" data-linenos="1 "></span></a><span class="n">putty</span> <span class="n">-ssh</span> <span class="n">-P</span> <span class="n">2222</span> <span class="n">root</span><span class="nv">@127</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">1</span>
</span></code></pre></div>
<details class="hint" open="open">
<summary>Hint</summary>
<p>Diese Shell nutzt das amerikanische Tastaturlayout, welches einige Tasten anders belegt als das deutsche</p>
</details>
<p>Tastaturlayout.</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span class="linenos" data-linenos="1 "></span>Um auf das deutsche Tastaturlayout zu wechseln, wählen wir mittels `kbdmap` das Layout &quot;German (accent keys)&quot; aus:
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span>```shell
<span class="linenos" data-linenos="4 "></span>/usr/sbin/kbdmap -K
<span class="linenos" data-linenos="5 "></span>```
</code></pre></div>
<p>Zunächst setzen wir die Systemzeit (CMOS clock) mittels <code>tzsetup</code> auf "UTC" (Universal Time Code).</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1"></a><a href="#__codelineno-10-1"><span class="linenos" data-linenos="1 "></span></a>/usr/sbin/tzsetup<span class="w"> </span>UTC
</span></code></pre></div>
<h2 id="partitionieren-der-festplatte">Partitionieren der Festplatte<a class="headerlink" href="#partitionieren-der-festplatte" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Bevor wir anfangen, bereinigen wir die Festplatten von jeglichen Datenrückständen, indem wir sie mit Nullen
überschreiben. Je nach Festplattengrösse kann dies einige Stunden bis Tage in Anspruch nehmen. Aus diesem Grund
verlegen wir diese Jobs mittels <code>nohup</code> in den Hintergrund, so dass wir uns zwischenzeitlich ausloggen können ohne dass
dabei die Jobs automatisch von der Shell abgebrochen werden. Ob die Jobs fertig sind, lässt dann mittels <code>ps -auxfwww</code>
und <code>top -atCP</code> ermitteln.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1"></a><a href="#__codelineno-11-1"><span class="linenos" data-linenos="1 "></span></a>nohup<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/dev/zero<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/dev/nvd0<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>1M<span class="w">  </span><span class="p">&amp;</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2"></a><a href="#__codelineno-11-2"><span class="linenos" data-linenos="2 "></span></a>nohup<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/dev/zero<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/dev/nvd1<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>1M<span class="w">  </span><span class="p">&amp;</span>
</span></code></pre></div>
<p>Da jeder Administrator andere Präferenzen an sein Partitionslayout stellt und wir andernfalls mit diesem HowTo nicht
weiterkommen, verwenden wir im Folgenden ein Standard-Partitionslayout. Fortgeschrittenere FreeBSD-Administratoren
können dieses Partitionslayout selbstverständlich an ihre eigenen Bedürfnisse anpassen.</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Partition</th>
<th style="text-align: left;">Mountpunkt</th>
<th style="text-align: center;">Filesystem</th>
<th style="text-align: right;">Grösse</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">/dev/mirror/root</td>
<td style="text-align: left;">/</td>
<td style="text-align: center;">UFS2</td>
<td style="text-align: right;">60 GB</td>
</tr>
<tr>
<td style="text-align: center;">/dev/mirror/swap</td>
<td style="text-align: left;">none</td>
<td style="text-align: center;">SWAP</td>
<td style="text-align: right;">4 GB</td>
</tr>
</tbody>
</table>
<p>Als Erstes müssen wir die Festplatte partitionieren, was wir mittels <code>gpart</code> erledigen werden. Zuvor müssen wir dies
aber dem Kernel mittels <code>sysctl</code> mitteilen, da er uns andernfalls dazwischenfunken würde.</p>
<p>Wir werden auf beiden Festplatten jeweils vier Partitionen anlegen, die Erste für den GPT-Bootcode, die Zweite für den
EFI-Bootcode, die Dritte als Swap und die Vierte als Systempartition. Dabei werden wir die Partitionen auch gleich für
modernere Festplatten mit 4K-Sektoren optimieren und statt den veralteten "MBR Partition Tables" die aktuelleren "GUID
Partition Tables (GPT)" verwenden.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1"></a><a href="#__codelineno-12-1"><span class="linenos" data-linenos=" 1 "></span></a>sysctl<span class="w"> </span>kern.geom.debugflags<span class="o">=</span>0x10
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2"></a><a href="#__codelineno-12-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3"></a><a href="#__codelineno-12-3"><span class="linenos" data-linenos=" 3 "></span></a>gpart<span class="w"> </span>destroy<span class="w"> </span>-F<span class="w"> </span>nvd0
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4"></a><a href="#__codelineno-12-4"><span class="linenos" data-linenos=" 4 "></span></a>gpart<span class="w"> </span>destroy<span class="w"> </span>-F<span class="w"> </span>nvd1
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5"></a><a href="#__codelineno-12-5"><span class="linenos" data-linenos=" 5 "></span></a>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6"></a><a href="#__codelineno-12-6"><span class="linenos" data-linenos=" 6 "></span></a>gpart<span class="w"> </span>create<span class="w"> </span>-s<span class="w"> </span>gpt<span class="w"> </span>nvd0
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7"></a><a href="#__codelineno-12-7"><span class="linenos" data-linenos=" 7 "></span></a>gpart<span class="w"> </span>create<span class="w"> </span>-s<span class="w"> </span>gpt<span class="w"> </span>nvd1
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8"></a><a href="#__codelineno-12-8"><span class="linenos" data-linenos=" 8 "></span></a>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9"></a><a href="#__codelineno-12-9"><span class="linenos" data-linenos=" 9 "></span></a>gpart<span class="w"> </span>add<span class="w"> </span>-t<span class="w"> </span>freebsd-boot<span class="w">  </span>-b<span class="w">      </span><span class="m">40</span><span class="w"> </span>-s<span class="w">     </span><span class="m">216</span><span class="w"> </span>-l<span class="w"> </span>bootfs0<span class="w"> </span>nvd0
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10"></a><a href="#__codelineno-12-10"><span class="linenos" data-linenos="10 "></span></a>gpart<span class="w"> </span>add<span class="w"> </span>-t<span class="w"> </span>efi<span class="w">           </span>-b<span class="w">     </span><span class="m">256</span><span class="w"> </span>-s<span class="w">    </span><span class="m">3840</span><span class="w"> </span>-l<span class="w"> </span>efiesp0<span class="w"> </span>nvd0
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11"></a><a href="#__codelineno-12-11"><span class="linenos" data-linenos="11 "></span></a>gpart<span class="w"> </span>add<span class="w"> </span>-t<span class="w"> </span>freebsd-swap<span class="w">  </span>-b<span class="w">    </span><span class="m">4096</span><span class="w"> </span>-s<span class="w"> </span><span class="m">8388608</span><span class="w"> </span>-l<span class="w"> </span>swapfs0<span class="w"> </span>nvd0
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12"></a><a href="#__codelineno-12-12"><span class="linenos" data-linenos="12 "></span></a>gpart<span class="w"> </span>add<span class="w"> </span>-t<span class="w"> </span>freebsd-ufs<span class="w">   </span>-b<span class="w"> </span><span class="m">8392704</span><span class="w">            </span>-l<span class="w"> </span>rootfs0<span class="w"> </span>nvd0
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13"></a><a href="#__codelineno-12-13"><span class="linenos" data-linenos="13 "></span></a>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14"></a><a href="#__codelineno-12-14"><span class="linenos" data-linenos="14 "></span></a>gpart<span class="w"> </span>add<span class="w"> </span>-t<span class="w"> </span>freebsd-boot<span class="w">  </span>-b<span class="w">      </span><span class="m">40</span><span class="w"> </span>-s<span class="w">     </span><span class="m">216</span><span class="w"> </span>-l<span class="w"> </span>bootfs1<span class="w"> </span>nvd1
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15"></a><a href="#__codelineno-12-15"><span class="linenos" data-linenos="15 "></span></a>gpart<span class="w"> </span>add<span class="w"> </span>-t<span class="w"> </span>efi<span class="w">           </span>-b<span class="w">     </span><span class="m">256</span><span class="w"> </span>-s<span class="w">    </span><span class="m">3840</span><span class="w"> </span>-l<span class="w"> </span>efiesp1<span class="w"> </span>nvd1
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16"></a><a href="#__codelineno-12-16"><span class="linenos" data-linenos="16 "></span></a>gpart<span class="w"> </span>add<span class="w"> </span>-t<span class="w"> </span>freebsd-swap<span class="w">  </span>-b<span class="w">    </span><span class="m">4096</span><span class="w"> </span>-s<span class="w"> </span><span class="m">8388608</span><span class="w"> </span>-l<span class="w"> </span>swapfs1<span class="w"> </span>nvd1
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17"></a><a href="#__codelineno-12-17"><span class="linenos" data-linenos="17 "></span></a>gpart<span class="w"> </span>add<span class="w"> </span>-t<span class="w"> </span>freebsd-ufs<span class="w">   </span>-b<span class="w"> </span><span class="m">8392704</span><span class="w">            </span>-l<span class="w"> </span>rootfs1<span class="w"> </span>nvd1
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18"></a><a href="#__codelineno-12-18"><span class="linenos" data-linenos="18 "></span></a>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19"></a><a href="#__codelineno-12-19"><span class="linenos" data-linenos="19 "></span></a>gpart<span class="w"> </span><span class="nb">set</span><span class="w"> </span>-a<span class="w"> </span>bootme<span class="w"> </span>-i<span class="w"> </span><span class="m">4</span><span class="w"> </span>nvd0
</span><span id="__span-12-20"><a id="__codelineno-12-20" name="__codelineno-12-20"></a><a href="#__codelineno-12-20"><span class="linenos" data-linenos="20 "></span></a>gpart<span class="w"> </span><span class="nb">set</span><span class="w"> </span>-a<span class="w"> </span>bootme<span class="w"> </span>-i<span class="w"> </span><span class="m">4</span><span class="w"> </span>nvd1
</span></code></pre></div>
<p>Für eine leicht erhöhte Datensicherheit legen wir mittels <code>gmirror</code> ein Software-RAID1 an.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1"></a><a href="#__codelineno-13-1"><span class="linenos" data-linenos="1 "></span></a>kldload<span class="w"> </span>geom_mirror
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2"></a><a href="#__codelineno-13-2"><span class="linenos" data-linenos="2 "></span></a>kldload<span class="w"> </span>zfs
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3"></a><a href="#__codelineno-13-3"><span class="linenos" data-linenos="3 "></span></a>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4"></a><a href="#__codelineno-13-4"><span class="linenos" data-linenos="4 "></span></a>sysctl<span class="w"> </span>vfs.zfs.min_auto_ashift<span class="o">=</span><span class="m">12</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5"></a><a href="#__codelineno-13-5"><span class="linenos" data-linenos="5 "></span></a>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6"></a><a href="#__codelineno-13-6"><span class="linenos" data-linenos="6 "></span></a>gmirror<span class="w"> </span>label<span class="w"> </span>-b<span class="w"> </span>load<span class="w"> </span>efiesp<span class="w"> </span>nvd0p2<span class="w"> </span>nvd1p2
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7"></a><a href="#__codelineno-13-7"><span class="linenos" data-linenos="7 "></span></a>gmirror<span class="w"> </span>label<span class="w"> </span>-b<span class="w"> </span>load<span class="w"> </span>rootfs<span class="w"> </span>nvd0p4<span class="w"> </span>nvd1p4
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8"></a><a href="#__codelineno-13-8"><span class="linenos" data-linenos="8 "></span></a>gmirror<span class="w"> </span>label<span class="w"> </span>-b<span class="w"> </span>prefer<span class="w"> </span>-F<span class="w"> </span>swapfs<span class="w"> </span>nvd0p3<span class="w"> </span>nvd1p3
</span></code></pre></div>
<h2 id="formatieren-der-partitionen">Formatieren der Partitionen<a class="headerlink" href="#formatieren-der-partitionen" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Nun müssen wir noch die Systempartition und die Partition für die Nutzdaten mit "UFS2" und einer 4K-Blockgrösse
formatieren und aktivieren auch gleich die "soft-updates".</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1"></a><a href="#__codelineno-14-1"><span class="linenos" data-linenos="1 "></span></a>newfs<span class="w"> </span>-U<span class="w"> </span>-l<span class="w"> </span>-t<span class="w"> </span>/dev/mirror/rootfs
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2"></a><a href="#__codelineno-14-2"><span class="linenos" data-linenos="2 "></span></a>tunefs<span class="w"> </span>-a<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>/dev/mirror/rootfs
</span></code></pre></div>
<h2 id="mounten-der-partitionen">Mounten der Partitionen<a class="headerlink" href="#mounten-der-partitionen" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Die Partitionen mounten wir unterhalb von <code>/mnt</code>.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1"></a><a href="#__codelineno-15-1"><span class="linenos" data-linenos="1 "></span></a>mount<span class="w"> </span>-t<span class="w"> </span>ufs<span class="w"> </span>/dev/mirror/rootfs<span class="w"> </span>/mnt
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2"></a><a href="#__codelineno-15-2"><span class="linenos" data-linenos="2 "></span></a>mkdir<span class="w"> </span>-p<span class="w"> </span>/mnt/data
</span></code></pre></div>
<h2 id="installation-der-chroot-umgebung">Installation der Chroot-Umgebung<a class="headerlink" href="#installation-der-chroot-umgebung" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Auf die gemounteten Partitionen entpacken wir ein FreeBSD Basesystem mit dem wir problemlos weiterarbeiten können. Je
nach Auslastung des FreeBSD FTP-Servers kann dies ein wenig dauern, bitte nicht ungeduldig werden.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1"></a><a href="#__codelineno-16-1"><span class="linenos" data-linenos="1 "></span></a>fetch<span class="w"> </span>-4<span class="w"> </span>-q<span class="w"> </span>-o<span class="w"> </span>-<span class="w"> </span>--no-verify-peer<span class="w"> </span><span class="s2">&quot;https://download.freebsd.org/releases/amd64/14.3-RELEASE/base.txz&quot;</span><span class="w">   </span><span class="p">|</span><span class="w"> </span>tar<span class="w"> </span>Jxpvf<span class="w"> </span>-<span class="w"> </span>-C<span class="w"> </span>/mnt/
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2"></a><a href="#__codelineno-16-2"><span class="linenos" data-linenos="2 "></span></a>fetch<span class="w"> </span>-4<span class="w"> </span>-q<span class="w"> </span>-o<span class="w"> </span>-<span class="w"> </span>--no-verify-peer<span class="w"> </span><span class="s2">&quot;https://download.freebsd.org/releases/amd64/14.3-RELEASE/kernel.txz&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tar<span class="w"> </span>Jxpvf<span class="w"> </span>-<span class="w"> </span>-C<span class="w"> </span>/mnt/
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3"></a><a href="#__codelineno-16-3"><span class="linenos" data-linenos="3 "></span></a>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4"></a><a href="#__codelineno-16-4"><span class="linenos" data-linenos="4 "></span></a>cp<span class="w"> </span>-a<span class="w"> </span>/mnt/boot/kernel<span class="w"> </span>/mnt/boot/GENERIC
</span></code></pre></div>
<p>Unser System soll natürlich auch von den Festplatten booten können, weshalb wir jetzt den Bootcode und Bootloader in
den Bootpartitionen installieren.</p>
<p>Festplatte 1:</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1"></a><a href="#__codelineno-17-1"><span class="linenos" data-linenos=" 1 "></span></a>newfs_msdos<span class="w"> </span>/dev/gpt/efiesp0
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2"></a><a href="#__codelineno-17-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3"></a><a href="#__codelineno-17-3"><span class="linenos" data-linenos=" 3 "></span></a>mount<span class="w"> </span>-t<span class="w"> </span>msdosfs<span class="w"> </span>/dev/gpt/efiesp0<span class="w"> </span>/mnt/boot/efi
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4"></a><a href="#__codelineno-17-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5"></a><a href="#__codelineno-17-5"><span class="linenos" data-linenos=" 5 "></span></a>mkdir<span class="w"> </span>-p<span class="w"> </span>/mnt/boot/efi/EFI/BOOT
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6"></a><a href="#__codelineno-17-6"><span class="linenos" data-linenos=" 6 "></span></a>cp<span class="w"> </span>/mnt/boot/loader.efi<span class="w"> </span>/mnt/boot/efi/EFI/BOOT/BOOTX64.efi
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7"></a><a href="#__codelineno-17-7"><span class="linenos" data-linenos=" 7 "></span></a>efibootmgr<span class="w"> </span>-a<span class="w"> </span>-c<span class="w"> </span>-l<span class="w"> </span>vtbd0p2:/EFI/BOOT/BOOTX64.efi<span class="w"> </span>-L<span class="w"> </span>FreeBSD
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8"></a><a href="#__codelineno-17-8"><span class="linenos" data-linenos=" 8 "></span></a>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9"></a><a href="#__codelineno-17-9"><span class="linenos" data-linenos=" 9 "></span></a>umount<span class="w"> </span>/mnt/boot/efi
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10"></a><a href="#__codelineno-17-10"><span class="linenos" data-linenos="10 "></span></a>
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11"></a><a href="#__codelineno-17-11"><span class="linenos" data-linenos="11 "></span></a>gpart<span class="w"> </span>bootcode<span class="w"> </span>-b<span class="w"> </span>/mnt/boot/pmbr<span class="w"> </span>-p<span class="w"> </span>/mnt/boot/gptboot<span class="w"> </span>-i<span class="w"> </span><span class="m">1</span><span class="w"> </span>nvd0
</span></code></pre></div>
<p>Festplatte 2:</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1"></a><a href="#__codelineno-18-1"><span class="linenos" data-linenos=" 1 "></span></a>newfs_msdos<span class="w"> </span>/dev/gpt/efiesp1
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2"></a><a href="#__codelineno-18-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3"></a><a href="#__codelineno-18-3"><span class="linenos" data-linenos=" 3 "></span></a>mount<span class="w"> </span>-t<span class="w"> </span>msdosfs<span class="w"> </span>/dev/gpt/efiesp1<span class="w"> </span>/mnt/boot/efi
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4"></a><a href="#__codelineno-18-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5"></a><a href="#__codelineno-18-5"><span class="linenos" data-linenos=" 5 "></span></a>mkdir<span class="w"> </span>-p<span class="w"> </span>/mnt/boot/efi/EFI/BOOT
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6"></a><a href="#__codelineno-18-6"><span class="linenos" data-linenos=" 6 "></span></a>cp<span class="w"> </span>/mnt/boot/loader.efi<span class="w"> </span>/mnt/boot/efi/EFI/BOOT/BOOTX64.efi
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7"></a><a href="#__codelineno-18-7"><span class="linenos" data-linenos=" 7 "></span></a>efibootmgr<span class="w"> </span>-a<span class="w"> </span>-c<span class="w"> </span>-l<span class="w"> </span>vtbd0p2:/EFI/BOOT/BOOTX64.efi<span class="w"> </span>-L<span class="w"> </span>FreeBSD
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8"></a><a href="#__codelineno-18-8"><span class="linenos" data-linenos=" 8 "></span></a>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9"></a><a href="#__codelineno-18-9"><span class="linenos" data-linenos=" 9 "></span></a>umount<span class="w"> </span>/mnt/boot/efi
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10"></a><a href="#__codelineno-18-10"><span class="linenos" data-linenos="10 "></span></a>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11"></a><a href="#__codelineno-18-11"><span class="linenos" data-linenos="11 "></span></a>gpart<span class="w"> </span>bootcode<span class="w"> </span>-b<span class="w"> </span>/mnt/boot/pmbr<span class="w"> </span>-p<span class="w"> </span>/mnt/boot/gptboot<span class="w"> </span>-i<span class="w"> </span><span class="m">1</span><span class="w"> </span>nvd1
</span></code></pre></div>
<h2 id="vorbereiten-der-chroot-umgebung">Vorbereiten der Chroot-Umgebung<a class="headerlink" href="#vorbereiten-der-chroot-umgebung" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Vor dem Wechsel in die Chroot-Umgebung müssen wir noch die <code>resolv.conf</code> in die Chroot-Umgebung kopieren und das
Device-Filesysteme dorthin mounten.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1"></a><a href="#__codelineno-19-1"><span class="linenos" data-linenos=" 1 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /etc/resolv.conf</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2"></a><a href="#__codelineno-19-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="s">nameserver 127.0.0.1</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3"></a><a href="#__codelineno-19-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="s">nameserver ::1</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4"></a><a href="#__codelineno-19-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="s">options edns0 ndots:1 timeout:0.3 attempts:1 rotate</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5"></a><a href="#__codelineno-19-5"><span class="linenos" data-linenos=" 5 "></span></a>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6"></a><a href="#__codelineno-19-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="s">EOF</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7"></a><a href="#__codelineno-19-7"><span class="linenos" data-linenos=" 7 "></span></a>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8"></a><a href="#__codelineno-19-8"><span class="linenos" data-linenos=" 8 "></span></a>cp<span class="w"> </span>/etc/resolv.conf<span class="w"> </span>/mnt/etc/resolv.conf
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9"></a><a href="#__codelineno-19-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10"></a><a href="#__codelineno-19-10"><span class="linenos" data-linenos="10 "></span></a>mount<span class="w"> </span>-t<span class="w"> </span>devfs<span class="w"> </span>devfs<span class="w"> </span>/mnt/dev
</span></code></pre></div>
<h2 id="betreten-der-chroot-umgebung">Betreten der Chroot-Umgebung<a class="headerlink" href="#betreten-der-chroot-umgebung" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Das neu installierte System selbstverständlich noch konfiguriert werden, bevor wir es nutzen können. Dazu werden wir
jetzt in das neue System chrooten und eine minimale Grundkonfiguration vornehmen.</p>
<p>Beim Betreten der Chroot-Umgebung setzen wir mittels <code>/usr/bin/env -i</code> erstmal alle Environment-Variablen zurück.
Andererseits benötigen wir aber die Environment-Variablen <code>HOME</code> und <code>TERM</code>, welche wir manuell auf sinnvolle Defaults
setzen.</p>
<p>Wir bringen etwas Farbe in die Console, passen den Prompt an und legen <code>ee</code> statt <code>vi</code> als Default-Editor fest:</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1"></a><a href="#__codelineno-20-1"><span class="linenos" data-linenos="  1 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /mnt/root/.cshrc</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2"></a><a href="#__codelineno-20-2"><span class="linenos" data-linenos="  2 "></span></a><span class="s">#</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3"></a><a href="#__codelineno-20-3"><span class="linenos" data-linenos="  3 "></span></a><span class="s"># .cshrc - csh resource script, read at beginning of execution by each shell</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4"></a><a href="#__codelineno-20-4"><span class="linenos" data-linenos="  4 "></span></a><span class="s">#</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5"></a><a href="#__codelineno-20-5"><span class="linenos" data-linenos="  5 "></span></a><span class="s"># see also csh(1), environ(7).</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6"></a><a href="#__codelineno-20-6"><span class="linenos" data-linenos="  6 "></span></a><span class="s"># more examples available at /usr/share/examples/csh/</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7"></a><a href="#__codelineno-20-7"><span class="linenos" data-linenos="  7 "></span></a><span class="s">#</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8"></a><a href="#__codelineno-20-8"><span class="linenos" data-linenos="  8 "></span></a>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9"></a><a href="#__codelineno-20-9"><span class="linenos" data-linenos="  9 "></span></a><span class="s">alias h         history 25</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10"></a><a href="#__codelineno-20-10"><span class="linenos" data-linenos=" 10 "></span></a><span class="s">alias j         jobs -l</span>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11"></a><a href="#__codelineno-20-11"><span class="linenos" data-linenos=" 11 "></span></a><span class="s">alias la        ls -aF</span>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12"></a><a href="#__codelineno-20-12"><span class="linenos" data-linenos=" 12 "></span></a><span class="s">alias lf        ls -FA</span>
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13"></a><a href="#__codelineno-20-13"><span class="linenos" data-linenos=" 13 "></span></a><span class="s">alias ll        ls -lAF</span>
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14"></a><a href="#__codelineno-20-14"><span class="linenos" data-linenos=" 14 "></span></a><span class="s">alias ls        ls -FGIPTW</span>
</span><span id="__span-20-15"><a id="__codelineno-20-15" name="__codelineno-20-15"></a><a href="#__codelineno-20-15"><span class="linenos" data-linenos=" 15 "></span></a><span class="s">alias l         ls -FGIPTWahl</span>
</span><span id="__span-20-16"><a id="__codelineno-20-16" name="__codelineno-20-16"></a><a href="#__codelineno-20-16"><span class="linenos" data-linenos=" 16 "></span></a>
</span><span id="__span-20-17"><a id="__codelineno-20-17" name="__codelineno-20-17"></a><a href="#__codelineno-20-17"><span class="linenos" data-linenos=" 17 "></span></a><span class="s"># These are normally set through /etc/login.conf.  You may override them here</span>
</span><span id="__span-20-18"><a id="__codelineno-20-18" name="__codelineno-20-18"></a><a href="#__codelineno-20-18"><span class="linenos" data-linenos=" 18 "></span></a><span class="s"># if wanted.</span>
</span><span id="__span-20-19"><a id="__codelineno-20-19" name="__codelineno-20-19"></a><a href="#__codelineno-20-19"><span class="linenos" data-linenos=" 19 "></span></a><span class="s"># set path = (/sbin /bin /usr/sbin /usr/bin /usr/local/sbin /usr/local/bin $HOME/bin)</span>
</span><span id="__span-20-20"><a id="__codelineno-20-20" name="__codelineno-20-20"></a><a href="#__codelineno-20-20"><span class="linenos" data-linenos=" 20 "></span></a><span class="s"># A righteous umask</span>
</span><span id="__span-20-21"><a id="__codelineno-20-21" name="__codelineno-20-21"></a><a href="#__codelineno-20-21"><span class="linenos" data-linenos=" 21 "></span></a><span class="s"># umask 22</span>
</span><span id="__span-20-22"><a id="__codelineno-20-22" name="__codelineno-20-22"></a><a href="#__codelineno-20-22"><span class="linenos" data-linenos=" 22 "></span></a>
</span><span id="__span-20-23"><a id="__codelineno-20-23" name="__codelineno-20-23"></a><a href="#__codelineno-20-23"><span class="linenos" data-linenos=" 23 "></span></a><span class="s">setenv  EDITOR  ee</span>
</span><span id="__span-20-24"><a id="__codelineno-20-24" name="__codelineno-20-24"></a><a href="#__codelineno-20-24"><span class="linenos" data-linenos=" 24 "></span></a><span class="s">setenv  PAGER   less</span>
</span><span id="__span-20-25"><a id="__codelineno-20-25" name="__codelineno-20-25"></a><a href="#__codelineno-20-25"><span class="linenos" data-linenos=" 25 "></span></a><span class="s">setenv  LSCOLORS &quot;Dxfxcxdxbxegedabagacad&quot;</span>
</span><span id="__span-20-26"><a id="__codelineno-20-26" name="__codelineno-20-26"></a><a href="#__codelineno-20-26"><span class="linenos" data-linenos=" 26 "></span></a>
</span><span id="__span-20-27"><a id="__codelineno-20-27" name="__codelineno-20-27"></a><a href="#__codelineno-20-27"><span class="linenos" data-linenos=" 27 "></span></a><span class="s">if ($?prompt) then</span>
</span><span id="__span-20-28"><a id="__codelineno-20-28" name="__codelineno-20-28"></a><a href="#__codelineno-20-28"><span class="linenos" data-linenos=" 28 "></span></a><span class="s">        # An interactive shell -- set some stuff up</span>
</span><span id="__span-20-29"><a id="__codelineno-20-29" name="__codelineno-20-29"></a><a href="#__codelineno-20-29"><span class="linenos" data-linenos=" 29 "></span></a><span class="s">        set prompt = &quot;[%B%n%b@%B%m%b:%B%~%b] %# &quot;</span>
</span><span id="__span-20-30"><a id="__codelineno-20-30" name="__codelineno-20-30"></a><a href="#__codelineno-20-30"><span class="linenos" data-linenos=" 30 "></span></a><span class="s">        set promptchars = &quot;%#&quot;</span>
</span><span id="__span-20-31"><a id="__codelineno-20-31" name="__codelineno-20-31"></a><a href="#__codelineno-20-31"><span class="linenos" data-linenos=" 31 "></span></a>
</span><span id="__span-20-32"><a id="__codelineno-20-32" name="__codelineno-20-32"></a><a href="#__codelineno-20-32"><span class="linenos" data-linenos=" 32 "></span></a><span class="s">        set filec</span>
</span><span id="__span-20-33"><a id="__codelineno-20-33" name="__codelineno-20-33"></a><a href="#__codelineno-20-33"><span class="linenos" data-linenos=" 33 "></span></a><span class="s">        set history = 50000</span>
</span><span id="__span-20-34"><a id="__codelineno-20-34" name="__codelineno-20-34"></a><a href="#__codelineno-20-34"><span class="linenos" data-linenos=" 34 "></span></a><span class="s">        set savehist = (5000 merge)</span>
</span><span id="__span-20-35"><a id="__codelineno-20-35" name="__codelineno-20-35"></a><a href="#__codelineno-20-35"><span class="linenos" data-linenos=" 35 "></span></a><span class="s">        set autolist = ambiguous</span>
</span><span id="__span-20-36"><a id="__codelineno-20-36" name="__codelineno-20-36"></a><a href="#__codelineno-20-36"><span class="linenos" data-linenos=" 36 "></span></a><span class="s">        # Use history to aid expansion</span>
</span><span id="__span-20-37"><a id="__codelineno-20-37" name="__codelineno-20-37"></a><a href="#__codelineno-20-37"><span class="linenos" data-linenos=" 37 "></span></a><span class="s">        set autoexpand</span>
</span><span id="__span-20-38"><a id="__codelineno-20-38" name="__codelineno-20-38"></a><a href="#__codelineno-20-38"><span class="linenos" data-linenos=" 38 "></span></a><span class="s">        set autorehash</span>
</span><span id="__span-20-39"><a id="__codelineno-20-39" name="__codelineno-20-39"></a><a href="#__codelineno-20-39"><span class="linenos" data-linenos=" 39 "></span></a><span class="s">        set mail = (/var/mail/$USER)</span>
</span><span id="__span-20-40"><a id="__codelineno-20-40" name="__codelineno-20-40"></a><a href="#__codelineno-20-40"><span class="linenos" data-linenos=" 40 "></span></a><span class="s">        if ( $?tcsh ) then</span>
</span><span id="__span-20-41"><a id="__codelineno-20-41" name="__codelineno-20-41"></a><a href="#__codelineno-20-41"><span class="linenos" data-linenos=" 41 "></span></a><span class="s">                bindkey &quot;^W&quot; backward-delete-word</span>
</span><span id="__span-20-42"><a id="__codelineno-20-42" name="__codelineno-20-42"></a><a href="#__codelineno-20-42"><span class="linenos" data-linenos=" 42 "></span></a><span class="s">                bindkey -k up history-search-backward</span>
</span><span id="__span-20-43"><a id="__codelineno-20-43" name="__codelineno-20-43"></a><a href="#__codelineno-20-43"><span class="linenos" data-linenos=" 43 "></span></a><span class="s">                bindkey -k down history-search-forward</span>
</span><span id="__span-20-44"><a id="__codelineno-20-44" name="__codelineno-20-44"></a><a href="#__codelineno-20-44"><span class="linenos" data-linenos=" 44 "></span></a><span class="s">        endif</span>
</span><span id="__span-20-45"><a id="__codelineno-20-45" name="__codelineno-20-45"></a><a href="#__codelineno-20-45"><span class="linenos" data-linenos=" 45 "></span></a><span class="s">endif</span>
</span><span id="__span-20-46"><a id="__codelineno-20-46" name="__codelineno-20-46"></a><a href="#__codelineno-20-46"><span class="linenos" data-linenos=" 46 "></span></a>
</span><span id="__span-20-47"><a id="__codelineno-20-47" name="__codelineno-20-47"></a><a href="#__codelineno-20-47"><span class="linenos" data-linenos=" 47 "></span></a><span class="s">EOF</span>
</span><span id="__span-20-48"><a id="__codelineno-20-48" name="__codelineno-20-48"></a><a href="#__codelineno-20-48"><span class="linenos" data-linenos=" 48 "></span></a>
</span><span id="__span-20-49"><a id="__codelineno-20-49" name="__codelineno-20-49"></a><a href="#__codelineno-20-49"><span class="linenos" data-linenos=" 49 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /mnt/root/.shrc</span>
</span><span id="__span-20-50"><a id="__codelineno-20-50" name="__codelineno-20-50"></a><a href="#__codelineno-20-50"><span class="linenos" data-linenos=" 50 "></span></a><span class="s">#</span>
</span><span id="__span-20-51"><a id="__codelineno-20-51" name="__codelineno-20-51"></a><a href="#__codelineno-20-51"><span class="linenos" data-linenos=" 51 "></span></a><span class="s"># .shrc - bourne shell startup file</span>
</span><span id="__span-20-52"><a id="__codelineno-20-52" name="__codelineno-20-52"></a><a href="#__codelineno-20-52"><span class="linenos" data-linenos=" 52 "></span></a><span class="s">#</span>
</span><span id="__span-20-53"><a id="__codelineno-20-53" name="__codelineno-20-53"></a><a href="#__codelineno-20-53"><span class="linenos" data-linenos=" 53 "></span></a><span class="s"># This file will be used if the shell is invoked for interactive use and</span>
</span><span id="__span-20-54"><a id="__codelineno-20-54" name="__codelineno-20-54"></a><a href="#__codelineno-20-54"><span class="linenos" data-linenos=" 54 "></span></a><span class="s"># the environment variable ENV is set to this file.</span>
</span><span id="__span-20-55"><a id="__codelineno-20-55" name="__codelineno-20-55"></a><a href="#__codelineno-20-55"><span class="linenos" data-linenos=" 55 "></span></a><span class="s">#</span>
</span><span id="__span-20-56"><a id="__codelineno-20-56" name="__codelineno-20-56"></a><a href="#__codelineno-20-56"><span class="linenos" data-linenos=" 56 "></span></a><span class="s"># see also sh(1), environ(7).</span>
</span><span id="__span-20-57"><a id="__codelineno-20-57" name="__codelineno-20-57"></a><a href="#__codelineno-20-57"><span class="linenos" data-linenos=" 57 "></span></a><span class="s">#</span>
</span><span id="__span-20-58"><a id="__codelineno-20-58" name="__codelineno-20-58"></a><a href="#__codelineno-20-58"><span class="linenos" data-linenos=" 58 "></span></a>
</span><span id="__span-20-59"><a id="__codelineno-20-59" name="__codelineno-20-59"></a><a href="#__codelineno-20-59"><span class="linenos" data-linenos=" 59 "></span></a>
</span><span id="__span-20-60"><a id="__codelineno-20-60" name="__codelineno-20-60"></a><a href="#__codelineno-20-60"><span class="linenos" data-linenos=" 60 "></span></a><span class="s"># file permissions: rwxr-xr-x</span>
</span><span id="__span-20-61"><a id="__codelineno-20-61" name="__codelineno-20-61"></a><a href="#__codelineno-20-61"><span class="linenos" data-linenos=" 61 "></span></a><span class="s">#</span>
</span><span id="__span-20-62"><a id="__codelineno-20-62" name="__codelineno-20-62"></a><a href="#__codelineno-20-62"><span class="linenos" data-linenos=" 62 "></span></a><span class="s"># umask 022</span>
</span><span id="__span-20-63"><a id="__codelineno-20-63" name="__codelineno-20-63"></a><a href="#__codelineno-20-63"><span class="linenos" data-linenos=" 63 "></span></a>
</span><span id="__span-20-64"><a id="__codelineno-20-64" name="__codelineno-20-64"></a><a href="#__codelineno-20-64"><span class="linenos" data-linenos=" 64 "></span></a><span class="s"># Uncomment this to enable the builtin vi(1) command line editor in sh(1),</span>
</span><span id="__span-20-65"><a id="__codelineno-20-65" name="__codelineno-20-65"></a><a href="#__codelineno-20-65"><span class="linenos" data-linenos=" 65 "></span></a><span class="s"># e.g. ESC to go into visual mode.</span>
</span><span id="__span-20-66"><a id="__codelineno-20-66" name="__codelineno-20-66"></a><a href="#__codelineno-20-66"><span class="linenos" data-linenos=" 66 "></span></a><span class="s"># set -o vi</span>
</span><span id="__span-20-67"><a id="__codelineno-20-67" name="__codelineno-20-67"></a><a href="#__codelineno-20-67"><span class="linenos" data-linenos=" 67 "></span></a>
</span><span id="__span-20-68"><a id="__codelineno-20-68" name="__codelineno-20-68"></a><a href="#__codelineno-20-68"><span class="linenos" data-linenos=" 68 "></span></a>
</span><span id="__span-20-69"><a id="__codelineno-20-69" name="__codelineno-20-69"></a><a href="#__codelineno-20-69"><span class="linenos" data-linenos=" 69 "></span></a><span class="s"># some useful aliases</span>
</span><span id="__span-20-70"><a id="__codelineno-20-70" name="__codelineno-20-70"></a><a href="#__codelineno-20-70"><span class="linenos" data-linenos=" 70 "></span></a><span class="s">alias h=&#39;fc -l&#39;</span>
</span><span id="__span-20-71"><a id="__codelineno-20-71" name="__codelineno-20-71"></a><a href="#__codelineno-20-71"><span class="linenos" data-linenos=" 71 "></span></a><span class="s">alias j=jobs</span>
</span><span id="__span-20-72"><a id="__codelineno-20-72" name="__codelineno-20-72"></a><a href="#__codelineno-20-72"><span class="linenos" data-linenos=" 72 "></span></a><span class="s">alias m=&quot;$PAGER&quot;</span>
</span><span id="__span-20-73"><a id="__codelineno-20-73" name="__codelineno-20-73"></a><a href="#__codelineno-20-73"><span class="linenos" data-linenos=" 73 "></span></a><span class="s">alias ll=&#39;ls -laFo&#39;</span>
</span><span id="__span-20-74"><a id="__codelineno-20-74" name="__codelineno-20-74"></a><a href="#__codelineno-20-74"><span class="linenos" data-linenos=" 74 "></span></a><span class="s">alias l=&#39;ls -l&#39;</span>
</span><span id="__span-20-75"><a id="__codelineno-20-75" name="__codelineno-20-75"></a><a href="#__codelineno-20-75"><span class="linenos" data-linenos=" 75 "></span></a><span class="s">alias g=&#39;egrep -i&#39;</span>
</span><span id="__span-20-76"><a id="__codelineno-20-76" name="__codelineno-20-76"></a><a href="#__codelineno-20-76"><span class="linenos" data-linenos=" 76 "></span></a><span class="s">alias ls=&#39;ls -FGIPTW&#39;</span>
</span><span id="__span-20-77"><a id="__codelineno-20-77" name="__codelineno-20-77"></a><a href="#__codelineno-20-77"><span class="linenos" data-linenos=" 77 "></span></a><span class="s">alias l=&#39;ls -FGIPTWahl&#39;</span>
</span><span id="__span-20-78"><a id="__codelineno-20-78" name="__codelineno-20-78"></a><a href="#__codelineno-20-78"><span class="linenos" data-linenos=" 78 "></span></a>
</span><span id="__span-20-79"><a id="__codelineno-20-79" name="__codelineno-20-79"></a><a href="#__codelineno-20-79"><span class="linenos" data-linenos=" 79 "></span></a><span class="s"># # be paranoid</span>
</span><span id="__span-20-80"><a id="__codelineno-20-80" name="__codelineno-20-80"></a><a href="#__codelineno-20-80"><span class="linenos" data-linenos=" 80 "></span></a><span class="s"># alias cp=&#39;cp -ip&#39;</span>
</span><span id="__span-20-81"><a id="__codelineno-20-81" name="__codelineno-20-81"></a><a href="#__codelineno-20-81"><span class="linenos" data-linenos=" 81 "></span></a><span class="s"># alias mv=&#39;mv -i&#39;</span>
</span><span id="__span-20-82"><a id="__codelineno-20-82" name="__codelineno-20-82"></a><a href="#__codelineno-20-82"><span class="linenos" data-linenos=" 82 "></span></a><span class="s"># alias rm=&#39;rm -i&#39;</span>
</span><span id="__span-20-83"><a id="__codelineno-20-83" name="__codelineno-20-83"></a><a href="#__codelineno-20-83"><span class="linenos" data-linenos=" 83 "></span></a>
</span><span id="__span-20-84"><a id="__codelineno-20-84" name="__codelineno-20-84"></a><a href="#__codelineno-20-84"><span class="linenos" data-linenos=" 84 "></span></a><span class="s"># # csh like history on arrow up and down</span>
</span><span id="__span-20-85"><a id="__codelineno-20-85" name="__codelineno-20-85"></a><a href="#__codelineno-20-85"><span class="linenos" data-linenos=" 85 "></span></a><span class="s">bind ^[[A ed-search-prev-history</span>
</span><span id="__span-20-86"><a id="__codelineno-20-86" name="__codelineno-20-86"></a><a href="#__codelineno-20-86"><span class="linenos" data-linenos=" 86 "></span></a><span class="s">bind ^[[B ed-search-next-history</span>
</span><span id="__span-20-87"><a id="__codelineno-20-87" name="__codelineno-20-87"></a><a href="#__codelineno-20-87"><span class="linenos" data-linenos=" 87 "></span></a>
</span><span id="__span-20-88"><a id="__codelineno-20-88" name="__codelineno-20-88"></a><a href="#__codelineno-20-88"><span class="linenos" data-linenos=" 88 "></span></a><span class="s"># # ctrl+arrow allow to jump from words to words</span>
</span><span id="__span-20-89"><a id="__codelineno-20-89" name="__codelineno-20-89"></a><a href="#__codelineno-20-89"><span class="linenos" data-linenos=" 89 "></span></a><span class="s">bind &quot;\\e[1;5C&quot; em-next-word</span>
</span><span id="__span-20-90"><a id="__codelineno-20-90" name="__codelineno-20-90"></a><a href="#__codelineno-20-90"><span class="linenos" data-linenos=" 90 "></span></a><span class="s">bind &quot;\\e[1;5D&quot; ed-prev-word</span>
</span><span id="__span-20-91"><a id="__codelineno-20-91" name="__codelineno-20-91"></a><a href="#__codelineno-20-91"><span class="linenos" data-linenos=" 91 "></span></a><span class="s">alias history=&#39;fc -l&#39;</span>
</span><span id="__span-20-92"><a id="__codelineno-20-92" name="__codelineno-20-92"></a><a href="#__codelineno-20-92"><span class="linenos" data-linenos=" 92 "></span></a>
</span><span id="__span-20-93"><a id="__codelineno-20-93" name="__codelineno-20-93"></a><a href="#__codelineno-20-93"><span class="linenos" data-linenos=" 93 "></span></a><span class="s"># Fix home/del for mobaxterm</span>
</span><span id="__span-20-94"><a id="__codelineno-20-94" name="__codelineno-20-94"></a><a href="#__codelineno-20-94"><span class="linenos" data-linenos=" 94 "></span></a><span class="s">bind ^[[5~ ed-move-to-beg</span>
</span><span id="__span-20-95"><a id="__codelineno-20-95" name="__codelineno-20-95"></a><a href="#__codelineno-20-95"><span class="linenos" data-linenos=" 95 "></span></a><span class="s">bind ^[[6~ ed-move-to-end</span>
</span><span id="__span-20-96"><a id="__codelineno-20-96" name="__codelineno-20-96"></a><a href="#__codelineno-20-96"><span class="linenos" data-linenos=" 96 "></span></a>
</span><span id="__span-20-97"><a id="__codelineno-20-97" name="__codelineno-20-97"></a><a href="#__codelineno-20-97"><span class="linenos" data-linenos=" 97 "></span></a><span class="s"># set prompt: ``username@hostname:directory $ &#39;&#39;</span>
</span><span id="__span-20-98"><a id="__codelineno-20-98" name="__codelineno-20-98"></a><a href="#__codelineno-20-98"><span class="linenos" data-linenos=" 98 "></span></a><span class="s">PS1=&quot;\[\e[1;36m\][\[\e[1;33m\]\u@\h:\[\e[1;36m\]\w] \\$ \[\e[0m\]&quot;</span>
</span><span id="__span-20-99"><a id="__codelineno-20-99" name="__codelineno-20-99"></a><a href="#__codelineno-20-99"><span class="linenos" data-linenos=" 99 "></span></a>
</span><span id="__span-20-100"><a id="__codelineno-20-100" name="__codelineno-20-100"></a><a href="#__codelineno-20-100"><span class="linenos" data-linenos="100 "></span></a><span class="s"># search path for cd(1)</span>
</span><span id="__span-20-101"><a id="__codelineno-20-101" name="__codelineno-20-101"></a><a href="#__codelineno-20-101"><span class="linenos" data-linenos="101 "></span></a><span class="s"># CDPATH=:$HOME</span>
</span><span id="__span-20-102"><a id="__codelineno-20-102" name="__codelineno-20-102"></a><a href="#__codelineno-20-102"><span class="linenos" data-linenos="102 "></span></a>
</span><span id="__span-20-103"><a id="__codelineno-20-103" name="__codelineno-20-103"></a><a href="#__codelineno-20-103"><span class="linenos" data-linenos="103 "></span></a><span class="s">EOF</span>
</span><span id="__span-20-104"><a id="__codelineno-20-104" name="__codelineno-20-104"></a><a href="#__codelineno-20-104"><span class="linenos" data-linenos="104 "></span></a>
</span><span id="__span-20-105"><a id="__codelineno-20-105" name="__codelineno-20-105"></a><a href="#__codelineno-20-105"><span class="linenos" data-linenos="105 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /mnt/root/.mailrc</span>
</span><span id="__span-20-106"><a id="__codelineno-20-106" name="__codelineno-20-106"></a><a href="#__codelineno-20-106"><span class="linenos" data-linenos="106 "></span></a><span class="s">#</span>
</span><span id="__span-20-107"><a id="__codelineno-20-107" name="__codelineno-20-107"></a><a href="#__codelineno-20-107"><span class="linenos" data-linenos="107 "></span></a><span class="s"># .mailrc - mail resources</span>
</span><span id="__span-20-108"><a id="__codelineno-20-108" name="__codelineno-20-108"></a><a href="#__codelineno-20-108"><span class="linenos" data-linenos="108 "></span></a><span class="s">#</span>
</span><span id="__span-20-109"><a id="__codelineno-20-109" name="__codelineno-20-109"></a><a href="#__codelineno-20-109"><span class="linenos" data-linenos="109 "></span></a><span class="s"># see also mail(1)</span>
</span><span id="__span-20-110"><a id="__codelineno-20-110" name="__codelineno-20-110"></a><a href="#__codelineno-20-110"><span class="linenos" data-linenos="110 "></span></a><span class="s">#</span>
</span><span id="__span-20-111"><a id="__codelineno-20-111" name="__codelineno-20-111"></a><a href="#__codelineno-20-111"><span class="linenos" data-linenos="111 "></span></a>
</span><span id="__span-20-112"><a id="__codelineno-20-112" name="__codelineno-20-112"></a><a href="#__codelineno-20-112"><span class="linenos" data-linenos="112 "></span></a><span class="s">set append ask autoprint</span>
</span><span id="__span-20-113"><a id="__codelineno-20-113" name="__codelineno-20-113"></a><a href="#__codelineno-20-113"><span class="linenos" data-linenos="113 "></span></a><span class="s">set indentprefix=&quot;&gt; &quot;</span>
</span><span id="__span-20-114"><a id="__codelineno-20-114" name="__codelineno-20-114"></a><a href="#__codelineno-20-114"><span class="linenos" data-linenos="114 "></span></a><span class="s">set PAGER=less</span>
</span><span id="__span-20-115"><a id="__codelineno-20-115" name="__codelineno-20-115"></a><a href="#__codelineno-20-115"><span class="linenos" data-linenos="115 "></span></a><span class="s">set EDITOR=ee</span>
</span><span id="__span-20-116"><a id="__codelineno-20-116" name="__codelineno-20-116"></a><a href="#__codelineno-20-116"><span class="linenos" data-linenos="116 "></span></a><span class="s">set VISUAL=ee</span>
</span><span id="__span-20-117"><a id="__codelineno-20-117" name="__codelineno-20-117"></a><a href="#__codelineno-20-117"><span class="linenos" data-linenos="117 "></span></a><span class="s">set folder=Mail</span>
</span><span id="__span-20-118"><a id="__codelineno-20-118" name="__codelineno-20-118"></a><a href="#__codelineno-20-118"><span class="linenos" data-linenos="118 "></span></a><span class="s">retain bcc cc date from subject to</span>
</span><span id="__span-20-119"><a id="__codelineno-20-119" name="__codelineno-20-119"></a><a href="#__codelineno-20-119"><span class="linenos" data-linenos="119 "></span></a>
</span><span id="__span-20-120"><a id="__codelineno-20-120" name="__codelineno-20-120"></a><a href="#__codelineno-20-120"><span class="linenos" data-linenos="120 "></span></a><span class="s"># include your private mail aliases</span>
</span><span id="__span-20-121"><a id="__codelineno-20-121" name="__codelineno-20-121"></a><a href="#__codelineno-20-121"><span class="linenos" data-linenos="121 "></span></a><span class="s">source ~/.mail_aliases</span>
</span><span id="__span-20-122"><a id="__codelineno-20-122" name="__codelineno-20-122"></a><a href="#__codelineno-20-122"><span class="linenos" data-linenos="122 "></span></a>
</span><span id="__span-20-123"><a id="__codelineno-20-123" name="__codelineno-20-123"></a><a href="#__codelineno-20-123"><span class="linenos" data-linenos="123 "></span></a><span class="s">EOF</span>
</span><span id="__span-20-124"><a id="__codelineno-20-124" name="__codelineno-20-124"></a><a href="#__codelineno-20-124"><span class="linenos" data-linenos="124 "></span></a>
</span><span id="__span-20-125"><a id="__codelineno-20-125" name="__codelineno-20-125"></a><a href="#__codelineno-20-125"><span class="linenos" data-linenos="125 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /mnt/root/.profile</span>
</span><span id="__span-20-126"><a id="__codelineno-20-126" name="__codelineno-20-126"></a><a href="#__codelineno-20-126"><span class="linenos" data-linenos="126 "></span></a><span class="s">#</span>
</span><span id="__span-20-127"><a id="__codelineno-20-127" name="__codelineno-20-127"></a><a href="#__codelineno-20-127"><span class="linenos" data-linenos="127 "></span></a><span class="s"># .profile - Bourne Shell startup script for login shells</span>
</span><span id="__span-20-128"><a id="__codelineno-20-128" name="__codelineno-20-128"></a><a href="#__codelineno-20-128"><span class="linenos" data-linenos="128 "></span></a><span class="s">#</span>
</span><span id="__span-20-129"><a id="__codelineno-20-129" name="__codelineno-20-129"></a><a href="#__codelineno-20-129"><span class="linenos" data-linenos="129 "></span></a><span class="s"># see also sh(1), environ(7).</span>
</span><span id="__span-20-130"><a id="__codelineno-20-130" name="__codelineno-20-130"></a><a href="#__codelineno-20-130"><span class="linenos" data-linenos="130 "></span></a><span class="s">#</span>
</span><span id="__span-20-131"><a id="__codelineno-20-131" name="__codelineno-20-131"></a><a href="#__codelineno-20-131"><span class="linenos" data-linenos="131 "></span></a>
</span><span id="__span-20-132"><a id="__codelineno-20-132" name="__codelineno-20-132"></a><a href="#__codelineno-20-132"><span class="linenos" data-linenos="132 "></span></a><span class="s"># These are normally set through /etc/login.conf.  You may override them here</span>
</span><span id="__span-20-133"><a id="__codelineno-20-133" name="__codelineno-20-133"></a><a href="#__codelineno-20-133"><span class="linenos" data-linenos="133 "></span></a><span class="s"># if wanted.</span>
</span><span id="__span-20-134"><a id="__codelineno-20-134" name="__codelineno-20-134"></a><a href="#__codelineno-20-134"><span class="linenos" data-linenos="134 "></span></a><span class="s"># PATH=/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin:$HOME/bin; export PATH</span>
</span><span id="__span-20-135"><a id="__codelineno-20-135" name="__codelineno-20-135"></a><a href="#__codelineno-20-135"><span class="linenos" data-linenos="135 "></span></a>
</span><span id="__span-20-136"><a id="__codelineno-20-136" name="__codelineno-20-136"></a><a href="#__codelineno-20-136"><span class="linenos" data-linenos="136 "></span></a><span class="s"># Setting TERM is normally done through /etc/ttys.  Do only override</span>
</span><span id="__span-20-137"><a id="__codelineno-20-137" name="__codelineno-20-137"></a><a href="#__codelineno-20-137"><span class="linenos" data-linenos="137 "></span></a><span class="s"># if you&#39;re sure that you&#39;ll never log in via telnet or xterm or a</span>
</span><span id="__span-20-138"><a id="__codelineno-20-138" name="__codelineno-20-138"></a><a href="#__codelineno-20-138"><span class="linenos" data-linenos="138 "></span></a><span class="s"># serial line.</span>
</span><span id="__span-20-139"><a id="__codelineno-20-139" name="__codelineno-20-139"></a><a href="#__codelineno-20-139"><span class="linenos" data-linenos="139 "></span></a><span class="s"># TERM=xterm;   export TERM</span>
</span><span id="__span-20-140"><a id="__codelineno-20-140" name="__codelineno-20-140"></a><a href="#__codelineno-20-140"><span class="linenos" data-linenos="140 "></span></a>
</span><span id="__span-20-141"><a id="__codelineno-20-141" name="__codelineno-20-141"></a><a href="#__codelineno-20-141"><span class="linenos" data-linenos="141 "></span></a><span class="s">EDITOR=ee;                           export EDITOR</span>
</span><span id="__span-20-142"><a id="__codelineno-20-142" name="__codelineno-20-142"></a><a href="#__codelineno-20-142"><span class="linenos" data-linenos="142 "></span></a><span class="s">PAGER=less;                          export PAGER</span>
</span><span id="__span-20-143"><a id="__codelineno-20-143" name="__codelineno-20-143"></a><a href="#__codelineno-20-143"><span class="linenos" data-linenos="143 "></span></a><span class="s">CLICOLORS=&quot;YES&quot;;                     export CLICOLOR</span>
</span><span id="__span-20-144"><a id="__codelineno-20-144" name="__codelineno-20-144"></a><a href="#__codelineno-20-144"><span class="linenos" data-linenos="144 "></span></a><span class="s">LSCOLORS=&quot;Dxfxcxdxbxegedabagacad&quot;;   export LSCOLORS</span>
</span><span id="__span-20-145"><a id="__codelineno-20-145" name="__codelineno-20-145"></a><a href="#__codelineno-20-145"><span class="linenos" data-linenos="145 "></span></a><span class="s">COLORFGBG=&quot;15;0&quot;;                    export COLORFGBG</span>
</span><span id="__span-20-146"><a id="__codelineno-20-146" name="__codelineno-20-146"></a><a href="#__codelineno-20-146"><span class="linenos" data-linenos="146 "></span></a><span class="s">COLORTERM=truecolor;                 export COLORTERM</span>
</span><span id="__span-20-147"><a id="__codelineno-20-147" name="__codelineno-20-147"></a><a href="#__codelineno-20-147"><span class="linenos" data-linenos="147 "></span></a><span class="s">TERM=${TERM:-xterm-256color};        export TERM</span>
</span><span id="__span-20-148"><a id="__codelineno-20-148" name="__codelineno-20-148"></a><a href="#__codelineno-20-148"><span class="linenos" data-linenos="148 "></span></a><span class="s">MANCOLOR=&quot;1&quot;;                        export MANCOLOR</span>
</span><span id="__span-20-149"><a id="__codelineno-20-149" name="__codelineno-20-149"></a><a href="#__codelineno-20-149"><span class="linenos" data-linenos="149 "></span></a><span class="s">MANWIDTH=tty;                        export MANWIDTH</span>
</span><span id="__span-20-150"><a id="__codelineno-20-150" name="__codelineno-20-150"></a><a href="#__codelineno-20-150"><span class="linenos" data-linenos="150 "></span></a>
</span><span id="__span-20-151"><a id="__codelineno-20-151" name="__codelineno-20-151"></a><a href="#__codelineno-20-151"><span class="linenos" data-linenos="151 "></span></a><span class="s"># set ENV to a file invoked each time sh is started for interactive use.</span>
</span><span id="__span-20-152"><a id="__codelineno-20-152" name="__codelineno-20-152"></a><a href="#__codelineno-20-152"><span class="linenos" data-linenos="152 "></span></a><span class="s">ENV=$HOME/.shrc; export ENV</span>
</span><span id="__span-20-153"><a id="__codelineno-20-153" name="__codelineno-20-153"></a><a href="#__codelineno-20-153"><span class="linenos" data-linenos="153 "></span></a>
</span><span id="__span-20-154"><a id="__codelineno-20-154" name="__codelineno-20-154"></a><a href="#__codelineno-20-154"><span class="linenos" data-linenos="154 "></span></a><span class="s"># Let sh(1) know it&#39;s at home, despite /home being a symlink.</span>
</span><span id="__span-20-155"><a id="__codelineno-20-155" name="__codelineno-20-155"></a><a href="#__codelineno-20-155"><span class="linenos" data-linenos="155 "></span></a><span class="s">if [ &quot;$PWD&quot; != &quot;$HOME&quot; ] &amp;&amp; [ &quot;$PWD&quot; -ef &quot;$HOME&quot; ] ; then cd ; fi</span>
</span><span id="__span-20-156"><a id="__codelineno-20-156" name="__codelineno-20-156"></a><a href="#__codelineno-20-156"><span class="linenos" data-linenos="156 "></span></a>
</span><span id="__span-20-157"><a id="__codelineno-20-157" name="__codelineno-20-157"></a><a href="#__codelineno-20-157"><span class="linenos" data-linenos="157 "></span></a><span class="s"># Query terminal size; useful for serial lines.</span>
</span><span id="__span-20-158"><a id="__codelineno-20-158" name="__codelineno-20-158"></a><a href="#__codelineno-20-158"><span class="linenos" data-linenos="158 "></span></a><span class="s">if [ -x /usr/bin/resizewin ] ; then /usr/bin/resizewin -z ; fi</span>
</span><span id="__span-20-159"><a id="__codelineno-20-159" name="__codelineno-20-159"></a><a href="#__codelineno-20-159"><span class="linenos" data-linenos="159 "></span></a>
</span><span id="__span-20-160"><a id="__codelineno-20-160" name="__codelineno-20-160"></a><a href="#__codelineno-20-160"><span class="linenos" data-linenos="160 "></span></a><span class="s"># Display a random cookie on each login.</span>
</span><span id="__span-20-161"><a id="__codelineno-20-161" name="__codelineno-20-161"></a><a href="#__codelineno-20-161"><span class="linenos" data-linenos="161 "></span></a><span class="s">if [ -x /usr/bin/fortune ] ; then /usr/bin/fortune freebsd-tips ; fi</span>
</span><span id="__span-20-162"><a id="__codelineno-20-162" name="__codelineno-20-162"></a><a href="#__codelineno-20-162"><span class="linenos" data-linenos="162 "></span></a>
</span><span id="__span-20-163"><a id="__codelineno-20-163" name="__codelineno-20-163"></a><a href="#__codelineno-20-163"><span class="linenos" data-linenos="163 "></span></a><span class="s">EOF</span>
</span></code></pre></div>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1"></a><a href="#__codelineno-21-1"><span class="linenos" data-linenos="1 "></span></a>chroot<span class="w"> </span>/mnt<span class="w"> </span>/usr/bin/env<span class="w"> </span>-i<span class="w"> </span><span class="nv">HOME</span><span class="o">=</span>/root<span class="w"> </span><span class="nv">TERM</span><span class="o">=</span><span class="nv">$TERM</span><span class="w"> </span>/bin/tcsh
</span></code></pre></div>
<h2 id="zeitzone-einrichten">Zeitzone einrichten<a class="headerlink" href="#zeitzone-einrichten" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Zunächst setzen wir die Systemzeit (CMOS clock) mittels <code>tzsetup</code> auf "UTC" (Universal Time Code).</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1"></a><a href="#__codelineno-22-1"><span class="linenos" data-linenos="1 "></span></a>/usr/sbin/tzsetup<span class="w"> </span>UTC
</span></code></pre></div>
<p>Cronjobs zur regelmässigen Syncronisation mit einem Zeitserver einrichten.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1"></a><a href="#__codelineno-23-1"><span class="linenos" data-linenos=" 1 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /etc/crontab</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2"></a><a href="#__codelineno-23-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="s"># /etc/crontab - root&#39;s crontab for FreeBSD</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3"></a><a href="#__codelineno-23-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="s">#</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4"></a><a href="#__codelineno-23-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="s">#</span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5"></a><a href="#__codelineno-23-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="s">SHELL=/bin/sh</span>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6"></a><a href="#__codelineno-23-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="s">PATH=/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin</span>
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7"></a><a href="#__codelineno-23-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="s">#</span>
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8"></a><a href="#__codelineno-23-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="s">#minute hour    mday    month   wday    who     command</span>
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9"></a><a href="#__codelineno-23-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="s">#</span>
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10"></a><a href="#__codelineno-23-10"><span class="linenos" data-linenos="10 "></span></a><span class="s"># Save some entropy so that /dev/random can re-seed on boot.</span>
</span><span id="__span-23-11"><a id="__codelineno-23-11" name="__codelineno-23-11"></a><a href="#__codelineno-23-11"><span class="linenos" data-linenos="11 "></span></a><span class="s">*/11    *       *       *       *       operator /usr/libexec/save-entropy</span>
</span><span id="__span-23-12"><a id="__codelineno-23-12" name="__codelineno-23-12"></a><a href="#__codelineno-23-12"><span class="linenos" data-linenos="12 "></span></a><span class="s">#</span>
</span><span id="__span-23-13"><a id="__codelineno-23-13" name="__codelineno-23-13"></a><a href="#__codelineno-23-13"><span class="linenos" data-linenos="13 "></span></a><span class="s"># Rotate log files every hour, if necessary.</span>
</span><span id="__span-23-14"><a id="__codelineno-23-14" name="__codelineno-23-14"></a><a href="#__codelineno-23-14"><span class="linenos" data-linenos="14 "></span></a><span class="s">0       *       *       *       *       root    newsyslog</span>
</span><span id="__span-23-15"><a id="__codelineno-23-15" name="__codelineno-23-15"></a><a href="#__codelineno-23-15"><span class="linenos" data-linenos="15 "></span></a><span class="s">#</span>
</span><span id="__span-23-16"><a id="__codelineno-23-16" name="__codelineno-23-16"></a><a href="#__codelineno-23-16"><span class="linenos" data-linenos="16 "></span></a><span class="s"># Perform daily/weekly/monthly maintenance.</span>
</span><span id="__span-23-17"><a id="__codelineno-23-17" name="__codelineno-23-17"></a><a href="#__codelineno-23-17"><span class="linenos" data-linenos="17 "></span></a><span class="s">1       3       *       *       *       root    periodic daily</span>
</span><span id="__span-23-18"><a id="__codelineno-23-18" name="__codelineno-23-18"></a><a href="#__codelineno-23-18"><span class="linenos" data-linenos="18 "></span></a><span class="s">15      4       *       *       6       root    periodic weekly</span>
</span><span id="__span-23-19"><a id="__codelineno-23-19" name="__codelineno-23-19"></a><a href="#__codelineno-23-19"><span class="linenos" data-linenos="19 "></span></a><span class="s">30      5       1       *       *       root    periodic monthly</span>
</span><span id="__span-23-20"><a id="__codelineno-23-20" name="__codelineno-23-20"></a><a href="#__codelineno-23-20"><span class="linenos" data-linenos="20 "></span></a><span class="s">#</span>
</span><span id="__span-23-21"><a id="__codelineno-23-21" name="__codelineno-23-21"></a><a href="#__codelineno-23-21"><span class="linenos" data-linenos="21 "></span></a><span class="s"># Adjust the time zone if the CMOS clock keeps local time, as opposed to</span>
</span><span id="__span-23-22"><a id="__codelineno-23-22" name="__codelineno-23-22"></a><a href="#__codelineno-23-22"><span class="linenos" data-linenos="22 "></span></a><span class="s"># UTC time.  See adjkerntz(8) for details.</span>
</span><span id="__span-23-23"><a id="__codelineno-23-23" name="__codelineno-23-23"></a><a href="#__codelineno-23-23"><span class="linenos" data-linenos="23 "></span></a><span class="s">1,31    0-5     *       *       *       root    adjkerntz -a</span>
</span><span id="__span-23-24"><a id="__codelineno-23-24" name="__codelineno-23-24"></a><a href="#__codelineno-23-24"><span class="linenos" data-linenos="24 "></span></a><span class="s">#</span>
</span><span id="__span-23-25"><a id="__codelineno-23-25" name="__codelineno-23-25"></a><a href="#__codelineno-23-25"><span class="linenos" data-linenos="25 "></span></a><span class="s">57      */4     *       *       *       root    /usr/sbin/sntp -S ptbtime1.ptb.de &gt;/dev/null 2&gt;&amp;1</span>
</span><span id="__span-23-26"><a id="__codelineno-23-26" name="__codelineno-23-26"></a><a href="#__codelineno-23-26"><span class="linenos" data-linenos="26 "></span></a><span class="s">58      */4     *       *       *       root    /usr/sbin/sntp -S ptbtime2.ptb.de &gt;/dev/null 2&gt;&amp;1</span>
</span><span id="__span-23-27"><a id="__codelineno-23-27" name="__codelineno-23-27"></a><a href="#__codelineno-23-27"><span class="linenos" data-linenos="27 "></span></a><span class="s">59      */4     *       *       *       root    /usr/sbin/sntp -S ptbtime3.ptb.de &gt;/dev/null 2&gt;&amp;1</span>
</span><span id="__span-23-28"><a id="__codelineno-23-28" name="__codelineno-23-28"></a><a href="#__codelineno-23-28"><span class="linenos" data-linenos="28 "></span></a><span class="s">#</span>
</span><span id="__span-23-29"><a id="__codelineno-23-29" name="__codelineno-23-29"></a><a href="#__codelineno-23-29"><span class="linenos" data-linenos="29 "></span></a><span class="s">#10      7       *       *       *       root    /usr/local/bin/git -C /usr/ports pull --quiet &amp;&amp; /usr/bin/make -C /usr/ports fetchindex &amp;&amp; /usr/local/sbin/pkg version -vIL= &amp;&amp; /usr/local/sbin/pkg audit -F</span>
</span><span id="__span-23-30"><a id="__codelineno-23-30" name="__codelineno-23-30"></a><a href="#__codelineno-23-30"><span class="linenos" data-linenos="30 "></span></a><span class="s">#10      7       *       *       *       root    /usr/local/sbin/pkg update -f &amp;&amp; /usr/local/sbin/pkg audit -F # &amp;&amp; /usr/local/sbin/pkg upgrade</span>
</span><span id="__span-23-31"><a id="__codelineno-23-31" name="__codelineno-23-31"></a><a href="#__codelineno-23-31"><span class="linenos" data-linenos="31 "></span></a><span class="s">#</span>
</span><span id="__span-23-32"><a id="__codelineno-23-32" name="__codelineno-23-32"></a><a href="#__codelineno-23-32"><span class="linenos" data-linenos="32 "></span></a>
</span><span id="__span-23-33"><a id="__codelineno-23-33" name="__codelineno-23-33"></a><a href="#__codelineno-23-33"><span class="linenos" data-linenos="33 "></span></a><span class="s">EOF</span>
</span></code></pre></div>
<h2 id="shell-einrichten">Shell einrichten<a class="headerlink" href="#shell-einrichten" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Wir bringen etwas Farbe in die Console, passen den Prompt an und legen <code>ee</code> statt <code>vi</code> als Default-Editor fest:</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1"></a><a href="#__codelineno-24-1"><span class="linenos" data-linenos="  1 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /usr/share/skel/dot.cshrc</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2"></a><a href="#__codelineno-24-2"><span class="linenos" data-linenos="  2 "></span></a><span class="s">#</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3"></a><a href="#__codelineno-24-3"><span class="linenos" data-linenos="  3 "></span></a><span class="s"># .cshrc - csh resource script, read at beginning of execution by each shell</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4"></a><a href="#__codelineno-24-4"><span class="linenos" data-linenos="  4 "></span></a><span class="s">#</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5"></a><a href="#__codelineno-24-5"><span class="linenos" data-linenos="  5 "></span></a><span class="s"># see also csh(1), environ(7).</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6"></a><a href="#__codelineno-24-6"><span class="linenos" data-linenos="  6 "></span></a><span class="s"># more examples available at /usr/share/examples/csh/</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7"></a><a href="#__codelineno-24-7"><span class="linenos" data-linenos="  7 "></span></a><span class="s">#</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8"></a><a href="#__codelineno-24-8"><span class="linenos" data-linenos="  8 "></span></a>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9"></a><a href="#__codelineno-24-9"><span class="linenos" data-linenos="  9 "></span></a><span class="s">alias h         history 25</span>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10"></a><a href="#__codelineno-24-10"><span class="linenos" data-linenos=" 10 "></span></a><span class="s">alias j         jobs -l</span>
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11"></a><a href="#__codelineno-24-11"><span class="linenos" data-linenos=" 11 "></span></a><span class="s">alias la        ls -aF</span>
</span><span id="__span-24-12"><a id="__codelineno-24-12" name="__codelineno-24-12"></a><a href="#__codelineno-24-12"><span class="linenos" data-linenos=" 12 "></span></a><span class="s">alias lf        ls -FA</span>
</span><span id="__span-24-13"><a id="__codelineno-24-13" name="__codelineno-24-13"></a><a href="#__codelineno-24-13"><span class="linenos" data-linenos=" 13 "></span></a><span class="s">alias ll        ls -lAF</span>
</span><span id="__span-24-14"><a id="__codelineno-24-14" name="__codelineno-24-14"></a><a href="#__codelineno-24-14"><span class="linenos" data-linenos=" 14 "></span></a><span class="s">alias ls        ls -FGIPTW</span>
</span><span id="__span-24-15"><a id="__codelineno-24-15" name="__codelineno-24-15"></a><a href="#__codelineno-24-15"><span class="linenos" data-linenos=" 15 "></span></a><span class="s">alias l         ls -FGIPTWahl</span>
</span><span id="__span-24-16"><a id="__codelineno-24-16" name="__codelineno-24-16"></a><a href="#__codelineno-24-16"><span class="linenos" data-linenos=" 16 "></span></a>
</span><span id="__span-24-17"><a id="__codelineno-24-17" name="__codelineno-24-17"></a><a href="#__codelineno-24-17"><span class="linenos" data-linenos=" 17 "></span></a><span class="s"># These are normally set through /etc/login.conf.  You may override them here</span>
</span><span id="__span-24-18"><a id="__codelineno-24-18" name="__codelineno-24-18"></a><a href="#__codelineno-24-18"><span class="linenos" data-linenos=" 18 "></span></a><span class="s"># if wanted.</span>
</span><span id="__span-24-19"><a id="__codelineno-24-19" name="__codelineno-24-19"></a><a href="#__codelineno-24-19"><span class="linenos" data-linenos=" 19 "></span></a><span class="s"># set path = (/sbin /bin /usr/sbin /usr/bin /usr/local/sbin /usr/local/bin $HOME/bin)</span>
</span><span id="__span-24-20"><a id="__codelineno-24-20" name="__codelineno-24-20"></a><a href="#__codelineno-24-20"><span class="linenos" data-linenos=" 20 "></span></a><span class="s"># A righteous umask</span>
</span><span id="__span-24-21"><a id="__codelineno-24-21" name="__codelineno-24-21"></a><a href="#__codelineno-24-21"><span class="linenos" data-linenos=" 21 "></span></a><span class="s"># umask 22</span>
</span><span id="__span-24-22"><a id="__codelineno-24-22" name="__codelineno-24-22"></a><a href="#__codelineno-24-22"><span class="linenos" data-linenos=" 22 "></span></a>
</span><span id="__span-24-23"><a id="__codelineno-24-23" name="__codelineno-24-23"></a><a href="#__codelineno-24-23"><span class="linenos" data-linenos=" 23 "></span></a><span class="s">setenv  EDITOR  ee</span>
</span><span id="__span-24-24"><a id="__codelineno-24-24" name="__codelineno-24-24"></a><a href="#__codelineno-24-24"><span class="linenos" data-linenos=" 24 "></span></a><span class="s">setenv  PAGER   less</span>
</span><span id="__span-24-25"><a id="__codelineno-24-25" name="__codelineno-24-25"></a><a href="#__codelineno-24-25"><span class="linenos" data-linenos=" 25 "></span></a><span class="s">setenv  LSCOLORS &quot;Dxfxcxdxbxegedabagacad&quot;</span>
</span><span id="__span-24-26"><a id="__codelineno-24-26" name="__codelineno-24-26"></a><a href="#__codelineno-24-26"><span class="linenos" data-linenos=" 26 "></span></a>
</span><span id="__span-24-27"><a id="__codelineno-24-27" name="__codelineno-24-27"></a><a href="#__codelineno-24-27"><span class="linenos" data-linenos=" 27 "></span></a><span class="s">if ($?prompt) then</span>
</span><span id="__span-24-28"><a id="__codelineno-24-28" name="__codelineno-24-28"></a><a href="#__codelineno-24-28"><span class="linenos" data-linenos=" 28 "></span></a><span class="s">        # An interactive shell -- set some stuff up</span>
</span><span id="__span-24-29"><a id="__codelineno-24-29" name="__codelineno-24-29"></a><a href="#__codelineno-24-29"><span class="linenos" data-linenos=" 29 "></span></a><span class="s">        set prompt = &quot;[%B%n%b@%B%m%b:%B%~%b] %# &quot;</span>
</span><span id="__span-24-30"><a id="__codelineno-24-30" name="__codelineno-24-30"></a><a href="#__codelineno-24-30"><span class="linenos" data-linenos=" 30 "></span></a><span class="s">        set promptchars = &quot;%#&quot;</span>
</span><span id="__span-24-31"><a id="__codelineno-24-31" name="__codelineno-24-31"></a><a href="#__codelineno-24-31"><span class="linenos" data-linenos=" 31 "></span></a>
</span><span id="__span-24-32"><a id="__codelineno-24-32" name="__codelineno-24-32"></a><a href="#__codelineno-24-32"><span class="linenos" data-linenos=" 32 "></span></a><span class="s">        set filec</span>
</span><span id="__span-24-33"><a id="__codelineno-24-33" name="__codelineno-24-33"></a><a href="#__codelineno-24-33"><span class="linenos" data-linenos=" 33 "></span></a><span class="s">        set history = 50000</span>
</span><span id="__span-24-34"><a id="__codelineno-24-34" name="__codelineno-24-34"></a><a href="#__codelineno-24-34"><span class="linenos" data-linenos=" 34 "></span></a><span class="s">        set savehist = (5000 merge)</span>
</span><span id="__span-24-35"><a id="__codelineno-24-35" name="__codelineno-24-35"></a><a href="#__codelineno-24-35"><span class="linenos" data-linenos=" 35 "></span></a><span class="s">        set autolist = ambiguous</span>
</span><span id="__span-24-36"><a id="__codelineno-24-36" name="__codelineno-24-36"></a><a href="#__codelineno-24-36"><span class="linenos" data-linenos=" 36 "></span></a><span class="s">        # Use history to aid expansion</span>
</span><span id="__span-24-37"><a id="__codelineno-24-37" name="__codelineno-24-37"></a><a href="#__codelineno-24-37"><span class="linenos" data-linenos=" 37 "></span></a><span class="s">        set autoexpand</span>
</span><span id="__span-24-38"><a id="__codelineno-24-38" name="__codelineno-24-38"></a><a href="#__codelineno-24-38"><span class="linenos" data-linenos=" 38 "></span></a><span class="s">        set autorehash</span>
</span><span id="__span-24-39"><a id="__codelineno-24-39" name="__codelineno-24-39"></a><a href="#__codelineno-24-39"><span class="linenos" data-linenos=" 39 "></span></a><span class="s">        set mail = (/var/mail/$USER)</span>
</span><span id="__span-24-40"><a id="__codelineno-24-40" name="__codelineno-24-40"></a><a href="#__codelineno-24-40"><span class="linenos" data-linenos=" 40 "></span></a><span class="s">        if ( $?tcsh ) then</span>
</span><span id="__span-24-41"><a id="__codelineno-24-41" name="__codelineno-24-41"></a><a href="#__codelineno-24-41"><span class="linenos" data-linenos=" 41 "></span></a><span class="s">                bindkey &quot;^W&quot; backward-delete-word</span>
</span><span id="__span-24-42"><a id="__codelineno-24-42" name="__codelineno-24-42"></a><a href="#__codelineno-24-42"><span class="linenos" data-linenos=" 42 "></span></a><span class="s">                bindkey -k up history-search-backward</span>
</span><span id="__span-24-43"><a id="__codelineno-24-43" name="__codelineno-24-43"></a><a href="#__codelineno-24-43"><span class="linenos" data-linenos=" 43 "></span></a><span class="s">                bindkey -k down history-search-forward</span>
</span><span id="__span-24-44"><a id="__codelineno-24-44" name="__codelineno-24-44"></a><a href="#__codelineno-24-44"><span class="linenos" data-linenos=" 44 "></span></a><span class="s">        endif</span>
</span><span id="__span-24-45"><a id="__codelineno-24-45" name="__codelineno-24-45"></a><a href="#__codelineno-24-45"><span class="linenos" data-linenos=" 45 "></span></a><span class="s">endif</span>
</span><span id="__span-24-46"><a id="__codelineno-24-46" name="__codelineno-24-46"></a><a href="#__codelineno-24-46"><span class="linenos" data-linenos=" 46 "></span></a>
</span><span id="__span-24-47"><a id="__codelineno-24-47" name="__codelineno-24-47"></a><a href="#__codelineno-24-47"><span class="linenos" data-linenos=" 47 "></span></a><span class="s">EOF</span>
</span><span id="__span-24-48"><a id="__codelineno-24-48" name="__codelineno-24-48"></a><a href="#__codelineno-24-48"><span class="linenos" data-linenos=" 48 "></span></a>
</span><span id="__span-24-49"><a id="__codelineno-24-49" name="__codelineno-24-49"></a><a href="#__codelineno-24-49"><span class="linenos" data-linenos=" 49 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /usr/share/skel/dot.shrc</span>
</span><span id="__span-24-50"><a id="__codelineno-24-50" name="__codelineno-24-50"></a><a href="#__codelineno-24-50"><span class="linenos" data-linenos=" 50 "></span></a><span class="s">#</span>
</span><span id="__span-24-51"><a id="__codelineno-24-51" name="__codelineno-24-51"></a><a href="#__codelineno-24-51"><span class="linenos" data-linenos=" 51 "></span></a><span class="s"># .shrc - bourne shell startup file</span>
</span><span id="__span-24-52"><a id="__codelineno-24-52" name="__codelineno-24-52"></a><a href="#__codelineno-24-52"><span class="linenos" data-linenos=" 52 "></span></a><span class="s">#</span>
</span><span id="__span-24-53"><a id="__codelineno-24-53" name="__codelineno-24-53"></a><a href="#__codelineno-24-53"><span class="linenos" data-linenos=" 53 "></span></a><span class="s"># This file will be used if the shell is invoked for interactive use and</span>
</span><span id="__span-24-54"><a id="__codelineno-24-54" name="__codelineno-24-54"></a><a href="#__codelineno-24-54"><span class="linenos" data-linenos=" 54 "></span></a><span class="s"># the environment variable ENV is set to this file.</span>
</span><span id="__span-24-55"><a id="__codelineno-24-55" name="__codelineno-24-55"></a><a href="#__codelineno-24-55"><span class="linenos" data-linenos=" 55 "></span></a><span class="s">#</span>
</span><span id="__span-24-56"><a id="__codelineno-24-56" name="__codelineno-24-56"></a><a href="#__codelineno-24-56"><span class="linenos" data-linenos=" 56 "></span></a><span class="s"># see also sh(1), environ(7).</span>
</span><span id="__span-24-57"><a id="__codelineno-24-57" name="__codelineno-24-57"></a><a href="#__codelineno-24-57"><span class="linenos" data-linenos=" 57 "></span></a><span class="s">#</span>
</span><span id="__span-24-58"><a id="__codelineno-24-58" name="__codelineno-24-58"></a><a href="#__codelineno-24-58"><span class="linenos" data-linenos=" 58 "></span></a>
</span><span id="__span-24-59"><a id="__codelineno-24-59" name="__codelineno-24-59"></a><a href="#__codelineno-24-59"><span class="linenos" data-linenos=" 59 "></span></a>
</span><span id="__span-24-60"><a id="__codelineno-24-60" name="__codelineno-24-60"></a><a href="#__codelineno-24-60"><span class="linenos" data-linenos=" 60 "></span></a><span class="s"># file permissions: rwxr-xr-x</span>
</span><span id="__span-24-61"><a id="__codelineno-24-61" name="__codelineno-24-61"></a><a href="#__codelineno-24-61"><span class="linenos" data-linenos=" 61 "></span></a><span class="s">#</span>
</span><span id="__span-24-62"><a id="__codelineno-24-62" name="__codelineno-24-62"></a><a href="#__codelineno-24-62"><span class="linenos" data-linenos=" 62 "></span></a><span class="s"># umask 022</span>
</span><span id="__span-24-63"><a id="__codelineno-24-63" name="__codelineno-24-63"></a><a href="#__codelineno-24-63"><span class="linenos" data-linenos=" 63 "></span></a>
</span><span id="__span-24-64"><a id="__codelineno-24-64" name="__codelineno-24-64"></a><a href="#__codelineno-24-64"><span class="linenos" data-linenos=" 64 "></span></a><span class="s"># Uncomment this to enable the builtin vi(1) command line editor in sh(1),</span>
</span><span id="__span-24-65"><a id="__codelineno-24-65" name="__codelineno-24-65"></a><a href="#__codelineno-24-65"><span class="linenos" data-linenos=" 65 "></span></a><span class="s"># e.g. ESC to go into visual mode.</span>
</span><span id="__span-24-66"><a id="__codelineno-24-66" name="__codelineno-24-66"></a><a href="#__codelineno-24-66"><span class="linenos" data-linenos=" 66 "></span></a><span class="s"># set -o vi</span>
</span><span id="__span-24-67"><a id="__codelineno-24-67" name="__codelineno-24-67"></a><a href="#__codelineno-24-67"><span class="linenos" data-linenos=" 67 "></span></a>
</span><span id="__span-24-68"><a id="__codelineno-24-68" name="__codelineno-24-68"></a><a href="#__codelineno-24-68"><span class="linenos" data-linenos=" 68 "></span></a>
</span><span id="__span-24-69"><a id="__codelineno-24-69" name="__codelineno-24-69"></a><a href="#__codelineno-24-69"><span class="linenos" data-linenos=" 69 "></span></a><span class="s"># some useful aliases</span>
</span><span id="__span-24-70"><a id="__codelineno-24-70" name="__codelineno-24-70"></a><a href="#__codelineno-24-70"><span class="linenos" data-linenos=" 70 "></span></a><span class="s">alias h=&#39;fc -l&#39;</span>
</span><span id="__span-24-71"><a id="__codelineno-24-71" name="__codelineno-24-71"></a><a href="#__codelineno-24-71"><span class="linenos" data-linenos=" 71 "></span></a><span class="s">alias j=jobs</span>
</span><span id="__span-24-72"><a id="__codelineno-24-72" name="__codelineno-24-72"></a><a href="#__codelineno-24-72"><span class="linenos" data-linenos=" 72 "></span></a><span class="s">alias m=&quot;$PAGER&quot;</span>
</span><span id="__span-24-73"><a id="__codelineno-24-73" name="__codelineno-24-73"></a><a href="#__codelineno-24-73"><span class="linenos" data-linenos=" 73 "></span></a><span class="s">alias ll=&#39;ls -laFo&#39;</span>
</span><span id="__span-24-74"><a id="__codelineno-24-74" name="__codelineno-24-74"></a><a href="#__codelineno-24-74"><span class="linenos" data-linenos=" 74 "></span></a><span class="s">alias l=&#39;ls -l&#39;</span>
</span><span id="__span-24-75"><a id="__codelineno-24-75" name="__codelineno-24-75"></a><a href="#__codelineno-24-75"><span class="linenos" data-linenos=" 75 "></span></a><span class="s">alias g=&#39;egrep -i&#39;</span>
</span><span id="__span-24-76"><a id="__codelineno-24-76" name="__codelineno-24-76"></a><a href="#__codelineno-24-76"><span class="linenos" data-linenos=" 76 "></span></a><span class="s">alias ls=&#39;ls -FGIPTW&#39;</span>
</span><span id="__span-24-77"><a id="__codelineno-24-77" name="__codelineno-24-77"></a><a href="#__codelineno-24-77"><span class="linenos" data-linenos=" 77 "></span></a><span class="s">alias l=&#39;ls -FGIPTWahl&#39;</span>
</span><span id="__span-24-78"><a id="__codelineno-24-78" name="__codelineno-24-78"></a><a href="#__codelineno-24-78"><span class="linenos" data-linenos=" 78 "></span></a>
</span><span id="__span-24-79"><a id="__codelineno-24-79" name="__codelineno-24-79"></a><a href="#__codelineno-24-79"><span class="linenos" data-linenos=" 79 "></span></a><span class="s"># # be paranoid</span>
</span><span id="__span-24-80"><a id="__codelineno-24-80" name="__codelineno-24-80"></a><a href="#__codelineno-24-80"><span class="linenos" data-linenos=" 80 "></span></a><span class="s"># alias cp=&#39;cp -ip&#39;</span>
</span><span id="__span-24-81"><a id="__codelineno-24-81" name="__codelineno-24-81"></a><a href="#__codelineno-24-81"><span class="linenos" data-linenos=" 81 "></span></a><span class="s"># alias mv=&#39;mv -i&#39;</span>
</span><span id="__span-24-82"><a id="__codelineno-24-82" name="__codelineno-24-82"></a><a href="#__codelineno-24-82"><span class="linenos" data-linenos=" 82 "></span></a><span class="s"># alias rm=&#39;rm -i&#39;</span>
</span><span id="__span-24-83"><a id="__codelineno-24-83" name="__codelineno-24-83"></a><a href="#__codelineno-24-83"><span class="linenos" data-linenos=" 83 "></span></a>
</span><span id="__span-24-84"><a id="__codelineno-24-84" name="__codelineno-24-84"></a><a href="#__codelineno-24-84"><span class="linenos" data-linenos=" 84 "></span></a><span class="s"># # csh like history on arrow up and down</span>
</span><span id="__span-24-85"><a id="__codelineno-24-85" name="__codelineno-24-85"></a><a href="#__codelineno-24-85"><span class="linenos" data-linenos=" 85 "></span></a><span class="s">bind ^[[A ed-search-prev-history</span>
</span><span id="__span-24-86"><a id="__codelineno-24-86" name="__codelineno-24-86"></a><a href="#__codelineno-24-86"><span class="linenos" data-linenos=" 86 "></span></a><span class="s">bind ^[[B ed-search-next-history</span>
</span><span id="__span-24-87"><a id="__codelineno-24-87" name="__codelineno-24-87"></a><a href="#__codelineno-24-87"><span class="linenos" data-linenos=" 87 "></span></a>
</span><span id="__span-24-88"><a id="__codelineno-24-88" name="__codelineno-24-88"></a><a href="#__codelineno-24-88"><span class="linenos" data-linenos=" 88 "></span></a><span class="s"># # ctrl+arrow allow to jump from words to words</span>
</span><span id="__span-24-89"><a id="__codelineno-24-89" name="__codelineno-24-89"></a><a href="#__codelineno-24-89"><span class="linenos" data-linenos=" 89 "></span></a><span class="s">bind &quot;\\e[1;5C&quot; em-next-word</span>
</span><span id="__span-24-90"><a id="__codelineno-24-90" name="__codelineno-24-90"></a><a href="#__codelineno-24-90"><span class="linenos" data-linenos=" 90 "></span></a><span class="s">bind &quot;\\e[1;5D&quot; ed-prev-word</span>
</span><span id="__span-24-91"><a id="__codelineno-24-91" name="__codelineno-24-91"></a><a href="#__codelineno-24-91"><span class="linenos" data-linenos=" 91 "></span></a><span class="s">alias history=&#39;fc -l&#39;</span>
</span><span id="__span-24-92"><a id="__codelineno-24-92" name="__codelineno-24-92"></a><a href="#__codelineno-24-92"><span class="linenos" data-linenos=" 92 "></span></a>
</span><span id="__span-24-93"><a id="__codelineno-24-93" name="__codelineno-24-93"></a><a href="#__codelineno-24-93"><span class="linenos" data-linenos=" 93 "></span></a><span class="s"># Fix home/del for mobaxterm</span>
</span><span id="__span-24-94"><a id="__codelineno-24-94" name="__codelineno-24-94"></a><a href="#__codelineno-24-94"><span class="linenos" data-linenos=" 94 "></span></a><span class="s">bind ^[[5~ ed-move-to-beg</span>
</span><span id="__span-24-95"><a id="__codelineno-24-95" name="__codelineno-24-95"></a><a href="#__codelineno-24-95"><span class="linenos" data-linenos=" 95 "></span></a><span class="s">bind ^[[6~ ed-move-to-end</span>
</span><span id="__span-24-96"><a id="__codelineno-24-96" name="__codelineno-24-96"></a><a href="#__codelineno-24-96"><span class="linenos" data-linenos=" 96 "></span></a>
</span><span id="__span-24-97"><a id="__codelineno-24-97" name="__codelineno-24-97"></a><a href="#__codelineno-24-97"><span class="linenos" data-linenos=" 97 "></span></a><span class="s"># set prompt: ``username@hostname:directory $ &#39;&#39;</span>
</span><span id="__span-24-98"><a id="__codelineno-24-98" name="__codelineno-24-98"></a><a href="#__codelineno-24-98"><span class="linenos" data-linenos=" 98 "></span></a><span class="s">PS1=&quot;\[\e[1;36m\][\[\e[1;33m\]\u@\h:\[\e[1;36m\]\w] \\$ \[\e[0m\]&quot;</span>
</span><span id="__span-24-99"><a id="__codelineno-24-99" name="__codelineno-24-99"></a><a href="#__codelineno-24-99"><span class="linenos" data-linenos=" 99 "></span></a>
</span><span id="__span-24-100"><a id="__codelineno-24-100" name="__codelineno-24-100"></a><a href="#__codelineno-24-100"><span class="linenos" data-linenos="100 "></span></a><span class="s"># search path for cd(1)</span>
</span><span id="__span-24-101"><a id="__codelineno-24-101" name="__codelineno-24-101"></a><a href="#__codelineno-24-101"><span class="linenos" data-linenos="101 "></span></a><span class="s"># CDPATH=:$HOME</span>
</span><span id="__span-24-102"><a id="__codelineno-24-102" name="__codelineno-24-102"></a><a href="#__codelineno-24-102"><span class="linenos" data-linenos="102 "></span></a>
</span><span id="__span-24-103"><a id="__codelineno-24-103" name="__codelineno-24-103"></a><a href="#__codelineno-24-103"><span class="linenos" data-linenos="103 "></span></a><span class="s">EOF</span>
</span><span id="__span-24-104"><a id="__codelineno-24-104" name="__codelineno-24-104"></a><a href="#__codelineno-24-104"><span class="linenos" data-linenos="104 "></span></a>
</span><span id="__span-24-105"><a id="__codelineno-24-105" name="__codelineno-24-105"></a><a href="#__codelineno-24-105"><span class="linenos" data-linenos="105 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /usr/share/skel/dot.mailrc</span>
</span><span id="__span-24-106"><a id="__codelineno-24-106" name="__codelineno-24-106"></a><a href="#__codelineno-24-106"><span class="linenos" data-linenos="106 "></span></a><span class="s">#</span>
</span><span id="__span-24-107"><a id="__codelineno-24-107" name="__codelineno-24-107"></a><a href="#__codelineno-24-107"><span class="linenos" data-linenos="107 "></span></a><span class="s"># .mailrc - mail resources</span>
</span><span id="__span-24-108"><a id="__codelineno-24-108" name="__codelineno-24-108"></a><a href="#__codelineno-24-108"><span class="linenos" data-linenos="108 "></span></a><span class="s">#</span>
</span><span id="__span-24-109"><a id="__codelineno-24-109" name="__codelineno-24-109"></a><a href="#__codelineno-24-109"><span class="linenos" data-linenos="109 "></span></a><span class="s"># see also mail(1)</span>
</span><span id="__span-24-110"><a id="__codelineno-24-110" name="__codelineno-24-110"></a><a href="#__codelineno-24-110"><span class="linenos" data-linenos="110 "></span></a><span class="s">#</span>
</span><span id="__span-24-111"><a id="__codelineno-24-111" name="__codelineno-24-111"></a><a href="#__codelineno-24-111"><span class="linenos" data-linenos="111 "></span></a>
</span><span id="__span-24-112"><a id="__codelineno-24-112" name="__codelineno-24-112"></a><a href="#__codelineno-24-112"><span class="linenos" data-linenos="112 "></span></a><span class="s">set append ask autoprint</span>
</span><span id="__span-24-113"><a id="__codelineno-24-113" name="__codelineno-24-113"></a><a href="#__codelineno-24-113"><span class="linenos" data-linenos="113 "></span></a><span class="s">set indentprefix=&quot;&gt; &quot;</span>
</span><span id="__span-24-114"><a id="__codelineno-24-114" name="__codelineno-24-114"></a><a href="#__codelineno-24-114"><span class="linenos" data-linenos="114 "></span></a><span class="s">set PAGER=less</span>
</span><span id="__span-24-115"><a id="__codelineno-24-115" name="__codelineno-24-115"></a><a href="#__codelineno-24-115"><span class="linenos" data-linenos="115 "></span></a><span class="s">set EDITOR=ee</span>
</span><span id="__span-24-116"><a id="__codelineno-24-116" name="__codelineno-24-116"></a><a href="#__codelineno-24-116"><span class="linenos" data-linenos="116 "></span></a><span class="s">set VISUAL=ee</span>
</span><span id="__span-24-117"><a id="__codelineno-24-117" name="__codelineno-24-117"></a><a href="#__codelineno-24-117"><span class="linenos" data-linenos="117 "></span></a><span class="s">set folder=Mail</span>
</span><span id="__span-24-118"><a id="__codelineno-24-118" name="__codelineno-24-118"></a><a href="#__codelineno-24-118"><span class="linenos" data-linenos="118 "></span></a><span class="s">retain bcc cc date from subject to</span>
</span><span id="__span-24-119"><a id="__codelineno-24-119" name="__codelineno-24-119"></a><a href="#__codelineno-24-119"><span class="linenos" data-linenos="119 "></span></a>
</span><span id="__span-24-120"><a id="__codelineno-24-120" name="__codelineno-24-120"></a><a href="#__codelineno-24-120"><span class="linenos" data-linenos="120 "></span></a><span class="s"># include your private mail aliases</span>
</span><span id="__span-24-121"><a id="__codelineno-24-121" name="__codelineno-24-121"></a><a href="#__codelineno-24-121"><span class="linenos" data-linenos="121 "></span></a><span class="s">source ~/.mail_aliases</span>
</span><span id="__span-24-122"><a id="__codelineno-24-122" name="__codelineno-24-122"></a><a href="#__codelineno-24-122"><span class="linenos" data-linenos="122 "></span></a>
</span><span id="__span-24-123"><a id="__codelineno-24-123" name="__codelineno-24-123"></a><a href="#__codelineno-24-123"><span class="linenos" data-linenos="123 "></span></a><span class="s">EOF</span>
</span><span id="__span-24-124"><a id="__codelineno-24-124" name="__codelineno-24-124"></a><a href="#__codelineno-24-124"><span class="linenos" data-linenos="124 "></span></a>
</span><span id="__span-24-125"><a id="__codelineno-24-125" name="__codelineno-24-125"></a><a href="#__codelineno-24-125"><span class="linenos" data-linenos="125 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /usr/share/skel/dot.profile</span>
</span><span id="__span-24-126"><a id="__codelineno-24-126" name="__codelineno-24-126"></a><a href="#__codelineno-24-126"><span class="linenos" data-linenos="126 "></span></a><span class="s">#</span>
</span><span id="__span-24-127"><a id="__codelineno-24-127" name="__codelineno-24-127"></a><a href="#__codelineno-24-127"><span class="linenos" data-linenos="127 "></span></a><span class="s"># .profile - Bourne Shell startup script for login shells</span>
</span><span id="__span-24-128"><a id="__codelineno-24-128" name="__codelineno-24-128"></a><a href="#__codelineno-24-128"><span class="linenos" data-linenos="128 "></span></a><span class="s">#</span>
</span><span id="__span-24-129"><a id="__codelineno-24-129" name="__codelineno-24-129"></a><a href="#__codelineno-24-129"><span class="linenos" data-linenos="129 "></span></a><span class="s"># see also sh(1), environ(7).</span>
</span><span id="__span-24-130"><a id="__codelineno-24-130" name="__codelineno-24-130"></a><a href="#__codelineno-24-130"><span class="linenos" data-linenos="130 "></span></a><span class="s">#</span>
</span><span id="__span-24-131"><a id="__codelineno-24-131" name="__codelineno-24-131"></a><a href="#__codelineno-24-131"><span class="linenos" data-linenos="131 "></span></a>
</span><span id="__span-24-132"><a id="__codelineno-24-132" name="__codelineno-24-132"></a><a href="#__codelineno-24-132"><span class="linenos" data-linenos="132 "></span></a><span class="s"># These are normally set through /etc/login.conf.  You may override them here</span>
</span><span id="__span-24-133"><a id="__codelineno-24-133" name="__codelineno-24-133"></a><a href="#__codelineno-24-133"><span class="linenos" data-linenos="133 "></span></a><span class="s"># if wanted.</span>
</span><span id="__span-24-134"><a id="__codelineno-24-134" name="__codelineno-24-134"></a><a href="#__codelineno-24-134"><span class="linenos" data-linenos="134 "></span></a><span class="s"># PATH=/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin:$HOME/bin; export PATH</span>
</span><span id="__span-24-135"><a id="__codelineno-24-135" name="__codelineno-24-135"></a><a href="#__codelineno-24-135"><span class="linenos" data-linenos="135 "></span></a>
</span><span id="__span-24-136"><a id="__codelineno-24-136" name="__codelineno-24-136"></a><a href="#__codelineno-24-136"><span class="linenos" data-linenos="136 "></span></a><span class="s"># Setting TERM is normally done through /etc/ttys.  Do only override</span>
</span><span id="__span-24-137"><a id="__codelineno-24-137" name="__codelineno-24-137"></a><a href="#__codelineno-24-137"><span class="linenos" data-linenos="137 "></span></a><span class="s"># if you&#39;re sure that you&#39;ll never log in via telnet or xterm or a</span>
</span><span id="__span-24-138"><a id="__codelineno-24-138" name="__codelineno-24-138"></a><a href="#__codelineno-24-138"><span class="linenos" data-linenos="138 "></span></a><span class="s"># serial line.</span>
</span><span id="__span-24-139"><a id="__codelineno-24-139" name="__codelineno-24-139"></a><a href="#__codelineno-24-139"><span class="linenos" data-linenos="139 "></span></a><span class="s"># TERM=xterm;   export TERM</span>
</span><span id="__span-24-140"><a id="__codelineno-24-140" name="__codelineno-24-140"></a><a href="#__codelineno-24-140"><span class="linenos" data-linenos="140 "></span></a>
</span><span id="__span-24-141"><a id="__codelineno-24-141" name="__codelineno-24-141"></a><a href="#__codelineno-24-141"><span class="linenos" data-linenos="141 "></span></a><span class="s">EDITOR=ee;                           export EDITOR</span>
</span><span id="__span-24-142"><a id="__codelineno-24-142" name="__codelineno-24-142"></a><a href="#__codelineno-24-142"><span class="linenos" data-linenos="142 "></span></a><span class="s">PAGER=less;                          export PAGER</span>
</span><span id="__span-24-143"><a id="__codelineno-24-143" name="__codelineno-24-143"></a><a href="#__codelineno-24-143"><span class="linenos" data-linenos="143 "></span></a><span class="s">CLICOLORS=&quot;YES&quot;;                     export CLICOLOR</span>
</span><span id="__span-24-144"><a id="__codelineno-24-144" name="__codelineno-24-144"></a><a href="#__codelineno-24-144"><span class="linenos" data-linenos="144 "></span></a><span class="s">LSCOLORS=&quot;Dxfxcxdxbxegedabagacad&quot;;   export LSCOLORS</span>
</span><span id="__span-24-145"><a id="__codelineno-24-145" name="__codelineno-24-145"></a><a href="#__codelineno-24-145"><span class="linenos" data-linenos="145 "></span></a><span class="s">COLORFGBG=&quot;15;0&quot;;                    export COLORFGBG</span>
</span><span id="__span-24-146"><a id="__codelineno-24-146" name="__codelineno-24-146"></a><a href="#__codelineno-24-146"><span class="linenos" data-linenos="146 "></span></a><span class="s">COLORTERM=truecolor;                 export COLORTERM</span>
</span><span id="__span-24-147"><a id="__codelineno-24-147" name="__codelineno-24-147"></a><a href="#__codelineno-24-147"><span class="linenos" data-linenos="147 "></span></a><span class="s">TERM=${TERM:-xterm-256color};        export TERM</span>
</span><span id="__span-24-148"><a id="__codelineno-24-148" name="__codelineno-24-148"></a><a href="#__codelineno-24-148"><span class="linenos" data-linenos="148 "></span></a><span class="s">MANCOLOR=&quot;1&quot;;                        export MANCOLOR</span>
</span><span id="__span-24-149"><a id="__codelineno-24-149" name="__codelineno-24-149"></a><a href="#__codelineno-24-149"><span class="linenos" data-linenos="149 "></span></a><span class="s">MANWIDTH=tty;                        export MANWIDTH</span>
</span><span id="__span-24-150"><a id="__codelineno-24-150" name="__codelineno-24-150"></a><a href="#__codelineno-24-150"><span class="linenos" data-linenos="150 "></span></a>
</span><span id="__span-24-151"><a id="__codelineno-24-151" name="__codelineno-24-151"></a><a href="#__codelineno-24-151"><span class="linenos" data-linenos="151 "></span></a><span class="s"># set ENV to a file invoked each time sh is started for interactive use.</span>
</span><span id="__span-24-152"><a id="__codelineno-24-152" name="__codelineno-24-152"></a><a href="#__codelineno-24-152"><span class="linenos" data-linenos="152 "></span></a><span class="s">ENV=$HOME/.shrc; export ENV</span>
</span><span id="__span-24-153"><a id="__codelineno-24-153" name="__codelineno-24-153"></a><a href="#__codelineno-24-153"><span class="linenos" data-linenos="153 "></span></a>
</span><span id="__span-24-154"><a id="__codelineno-24-154" name="__codelineno-24-154"></a><a href="#__codelineno-24-154"><span class="linenos" data-linenos="154 "></span></a><span class="s"># Let sh(1) know it&#39;s at home, despite /home being a symlink.</span>
</span><span id="__span-24-155"><a id="__codelineno-24-155" name="__codelineno-24-155"></a><a href="#__codelineno-24-155"><span class="linenos" data-linenos="155 "></span></a><span class="s">if [ &quot;$PWD&quot; != &quot;$HOME&quot; ] &amp;&amp; [ &quot;$PWD&quot; -ef &quot;$HOME&quot; ] ; then cd ; fi</span>
</span><span id="__span-24-156"><a id="__codelineno-24-156" name="__codelineno-24-156"></a><a href="#__codelineno-24-156"><span class="linenos" data-linenos="156 "></span></a>
</span><span id="__span-24-157"><a id="__codelineno-24-157" name="__codelineno-24-157"></a><a href="#__codelineno-24-157"><span class="linenos" data-linenos="157 "></span></a><span class="s"># Query terminal size; useful for serial lines.</span>
</span><span id="__span-24-158"><a id="__codelineno-24-158" name="__codelineno-24-158"></a><a href="#__codelineno-24-158"><span class="linenos" data-linenos="158 "></span></a><span class="s">if [ -x /usr/bin/resizewin ] ; then /usr/bin/resizewin -z ; fi</span>
</span><span id="__span-24-159"><a id="__codelineno-24-159" name="__codelineno-24-159"></a><a href="#__codelineno-24-159"><span class="linenos" data-linenos="159 "></span></a>
</span><span id="__span-24-160"><a id="__codelineno-24-160" name="__codelineno-24-160"></a><a href="#__codelineno-24-160"><span class="linenos" data-linenos="160 "></span></a><span class="s"># Display a random cookie on each login.</span>
</span><span id="__span-24-161"><a id="__codelineno-24-161" name="__codelineno-24-161"></a><a href="#__codelineno-24-161"><span class="linenos" data-linenos="161 "></span></a><span class="s">if [ -x /usr/bin/fortune ] ; then /usr/bin/fortune freebsd-tips ; fi</span>
</span><span id="__span-24-162"><a id="__codelineno-24-162" name="__codelineno-24-162"></a><a href="#__codelineno-24-162"><span class="linenos" data-linenos="162 "></span></a>
</span><span id="__span-24-163"><a id="__codelineno-24-163" name="__codelineno-24-163"></a><a href="#__codelineno-24-163"><span class="linenos" data-linenos="163 "></span></a><span class="s">EOF</span>
</span></code></pre></div>
<p>Wir setzen ein paar Defaults für "root" neu:</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1"></a><a href="#__codelineno-25-1"><span class="linenos" data-linenos="1 "></span></a>pw<span class="w"> </span>useradd<span class="w"> </span>-D<span class="w"> </span>-g<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>-M<span class="w"> </span><span class="m">0700</span><span class="w"> </span>-s<span class="w"> </span>sh<span class="w"> </span>-w<span class="w"> </span>no
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2"></a><a href="#__codelineno-25-2"><span class="linenos" data-linenos="2 "></span></a>pw<span class="w"> </span>usermod<span class="w"> </span>-n<span class="w"> </span>root<span class="w"> </span>-s<span class="w"> </span>sh<span class="w"> </span>-w<span class="w"> </span>none
</span></code></pre></div>
<p>Das Home-Verzeichnis des Users root ist standardmässig leider nicht ausreichend restriktiv in seinen Zugriffsrechten,
was wir mit einem entsprechenden Aufruf von <code>chmod</code> schnell ändern. Bevor wir es vergessen, setzen wir bei dieser
Gelegenheit gleich ein sicheres Passwort für root.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1"></a><a href="#__codelineno-26-1"><span class="linenos" data-linenos=" 1 "></span></a>chmod<span class="w"> </span><span class="m">0700</span><span class="w"> </span>/root
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2"></a><a href="#__codelineno-26-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3"></a><a href="#__codelineno-26-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="c1"># Password erzeugen und in /root/_passwords speichern</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4"></a><a href="#__codelineno-26-4"><span class="linenos" data-linenos=" 4 "></span></a>chmod<span class="w"> </span><span class="m">0600</span><span class="w"> </span>/root/_passwords
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5"></a><a href="#__codelineno-26-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="nv">newpw</span><span class="o">=</span><span class="s2">&quot;`openssl rand -hex 64 | openssl passwd -5 -stdin | tr -cd &#39;[[:print:]]&#39; | cut -c 2-17`&quot;</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6"></a><a href="#__codelineno-26-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Password for systemuser root: </span><span class="nv">$newpw</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/root/_passwords
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7"></a><a href="#__codelineno-26-7"><span class="linenos" data-linenos=" 7 "></span></a>chmod<span class="w"> </span><span class="m">0400</span><span class="w"> </span>/root/_passwords
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8"></a><a href="#__codelineno-26-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Password: </span><span class="nv">$newpw</span><span class="s2">&quot;</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9"></a><a href="#__codelineno-26-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="nb">unset</span><span class="w"> </span>newpw
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10"></a><a href="#__codelineno-26-10"><span class="linenos" data-linenos="10 "></span></a>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11"></a><a href="#__codelineno-26-11"><span class="linenos" data-linenos="11 "></span></a>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12"></a><a href="#__codelineno-26-12"><span class="linenos" data-linenos="12 "></span></a>passwd<span class="w"> </span>root
</span></code></pre></div>
<h2 id="systemsicherheit-verstärken">Systemsicherheit verstärken<a class="headerlink" href="#systemsicherheit-verstärken" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Die hier vorgestellten Massnahmen sind äusserst simple Basics, die aus Hygienegründen auf jedem FreeBSD System
selbstverständlich sein sollten. Um ein FreeBSD System richtig zu härten (Hardened), kommt man jedoch nicht an
komplexeren Methoden wie Security Event Auditing und Mandatory Access Control vorbei. Diese Themen werden im FreeBSD
Handbuch recht ausführlich besprochen; für den Einstieg empfehle ich hier die Lektüre von
<a href="https://docs.freebsd.org/en/books/handbook/security/" rel="noopener" target="_blank">Chapter 14. Security</a>, für die
weiterführenden Themen die <a href="https://docs.freebsd.org/en/books/handbook/mac/" rel="noopener" target="_blank">Chapter 16. Mandatory Access Control</a>
und <a href="https://docs.freebsd.org/en/books/handbook/audit/" rel="noopener" target="_blank">Chapter 17. Security Event Auditing</a>.</p>
<h3 id="openssh-konfigurieren">OpenSSH konfigurieren<a class="headerlink" href="#openssh-konfigurieren" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Da wir gerade ein Produktiv-System aufsetzen, werden wir den OpenSSH-Dienst recht restriktiv konfigurieren, unter
Anderem werden wir den Login per Passwort verbieten und nur per PublicKey zulassen.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1"></a><a href="#__codelineno-27-1"><span class="linenos" data-linenos="  1 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /etc/ssh/sshd_config</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2"></a><a href="#__codelineno-27-2"><span class="linenos" data-linenos="  2 "></span></a><span class="s">#       $OpenBSD: sshd_config,v 1.104 2021/07/02 05:11:21 dtucker Exp $</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3"></a><a href="#__codelineno-27-3"><span class="linenos" data-linenos="  3 "></span></a>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4"></a><a href="#__codelineno-27-4"><span class="linenos" data-linenos="  4 "></span></a><span class="s"># This is the sshd server system-wide configuration file.  See</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5"></a><a href="#__codelineno-27-5"><span class="linenos" data-linenos="  5 "></span></a><span class="s"># sshd_config(5) for more information.</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6"></a><a href="#__codelineno-27-6"><span class="linenos" data-linenos="  6 "></span></a>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7"></a><a href="#__codelineno-27-7"><span class="linenos" data-linenos="  7 "></span></a><span class="s"># This sshd was compiled with PATH=/usr/bin:/bin:/usr/sbin:/sbin</span>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8"></a><a href="#__codelineno-27-8"><span class="linenos" data-linenos="  8 "></span></a>
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9"></a><a href="#__codelineno-27-9"><span class="linenos" data-linenos="  9 "></span></a><span class="s"># The strategy used for options in the default sshd_config shipped with</span>
</span><span id="__span-27-10"><a id="__codelineno-27-10" name="__codelineno-27-10"></a><a href="#__codelineno-27-10"><span class="linenos" data-linenos=" 10 "></span></a><span class="s"># OpenSSH is to specify options with their default value where</span>
</span><span id="__span-27-11"><a id="__codelineno-27-11" name="__codelineno-27-11"></a><a href="#__codelineno-27-11"><span class="linenos" data-linenos=" 11 "></span></a><span class="s"># possible, but leave them commented.  Uncommented options override the</span>
</span><span id="__span-27-12"><a id="__codelineno-27-12" name="__codelineno-27-12"></a><a href="#__codelineno-27-12"><span class="linenos" data-linenos=" 12 "></span></a><span class="s"># default value.</span>
</span><span id="__span-27-13"><a id="__codelineno-27-13" name="__codelineno-27-13"></a><a href="#__codelineno-27-13"><span class="linenos" data-linenos=" 13 "></span></a>
</span><span id="__span-27-14"><a id="__codelineno-27-14" name="__codelineno-27-14"></a><a href="#__codelineno-27-14"><span class="linenos" data-linenos=" 14 "></span></a><span class="s"># Note that some of FreeBSD&#39;s defaults differ from OpenBSD&#39;s, and</span>
</span><span id="__span-27-15"><a id="__codelineno-27-15" name="__codelineno-27-15"></a><a href="#__codelineno-27-15"><span class="linenos" data-linenos=" 15 "></span></a><span class="s"># FreeBSD has a few additional options.</span>
</span><span id="__span-27-16"><a id="__codelineno-27-16" name="__codelineno-27-16"></a><a href="#__codelineno-27-16"><span class="linenos" data-linenos=" 16 "></span></a>
</span><span id="__span-27-17"><a id="__codelineno-27-17" name="__codelineno-27-17"></a><a href="#__codelineno-27-17"><span class="linenos" data-linenos=" 17 "></span></a><span class="s">Port 22</span>
</span><span id="__span-27-18"><a id="__codelineno-27-18" name="__codelineno-27-18"></a><a href="#__codelineno-27-18"><span class="linenos" data-linenos=" 18 "></span></a><span class="s">#AddressFamily any</span>
</span><span id="__span-27-19"><a id="__codelineno-27-19" name="__codelineno-27-19"></a><a href="#__codelineno-27-19"><span class="linenos" data-linenos=" 19 "></span></a><span class="s">#ListenAddress 0.0.0.0</span>
</span><span id="__span-27-20"><a id="__codelineno-27-20" name="__codelineno-27-20"></a><a href="#__codelineno-27-20"><span class="linenos" data-linenos=" 20 "></span></a><span class="s">#ListenAddress ::</span>
</span><span id="__span-27-21"><a id="__codelineno-27-21" name="__codelineno-27-21"></a><a href="#__codelineno-27-21"><span class="linenos" data-linenos=" 21 "></span></a>
</span><span id="__span-27-22"><a id="__codelineno-27-22" name="__codelineno-27-22"></a><a href="#__codelineno-27-22"><span class="linenos" data-linenos=" 22 "></span></a><span class="s">#HostKey /etc/ssh/ssh_host_rsa_key</span>
</span><span id="__span-27-23"><a id="__codelineno-27-23" name="__codelineno-27-23"></a><a href="#__codelineno-27-23"><span class="linenos" data-linenos=" 23 "></span></a><span class="s">#HostKey /etc/ssh/ssh_host_ecdsa_key</span>
</span><span id="__span-27-24"><a id="__codelineno-27-24" name="__codelineno-27-24"></a><a href="#__codelineno-27-24"><span class="linenos" data-linenos=" 24 "></span></a><span class="s">#HostKey /etc/ssh/ssh_host_ed25519_key</span>
</span><span id="__span-27-25"><a id="__codelineno-27-25" name="__codelineno-27-25"></a><a href="#__codelineno-27-25"><span class="linenos" data-linenos=" 25 "></span></a>
</span><span id="__span-27-26"><a id="__codelineno-27-26" name="__codelineno-27-26"></a><a href="#__codelineno-27-26"><span class="linenos" data-linenos=" 26 "></span></a><span class="s"># Ciphers and keying</span>
</span><span id="__span-27-27"><a id="__codelineno-27-27" name="__codelineno-27-27"></a><a href="#__codelineno-27-27"><span class="linenos" data-linenos=" 27 "></span></a><span class="s">Ciphers chacha20-poly1305@openssh.com,aes256-gcm@openssh.com</span>
</span><span id="__span-27-28"><a id="__codelineno-27-28" name="__codelineno-27-28"></a><a href="#__codelineno-27-28"><span class="linenos" data-linenos=" 28 "></span></a><span class="s">Macs hmac-sha2-512,hmac-sha2-512-etm@openssh.com,hmac-sha2-256,hmac-sha2-256-etm@openssh.com</span>
</span><span id="__span-27-29"><a id="__codelineno-27-29" name="__codelineno-27-29"></a><a href="#__codelineno-27-29"><span class="linenos" data-linenos=" 29 "></span></a><span class="s">KexAlgorithms sntrup761x25519-sha512@openssh.com,curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp521,ecdh-sha2-nistp384,ecdh-sha2-nistp256</span>
</span><span id="__span-27-30"><a id="__codelineno-27-30" name="__codelineno-27-30"></a><a href="#__codelineno-27-30"><span class="linenos" data-linenos=" 30 "></span></a><span class="s">#RekeyLimit default none</span>
</span><span id="__span-27-31"><a id="__codelineno-27-31" name="__codelineno-27-31"></a><a href="#__codelineno-27-31"><span class="linenos" data-linenos=" 31 "></span></a>
</span><span id="__span-27-32"><a id="__codelineno-27-32" name="__codelineno-27-32"></a><a href="#__codelineno-27-32"><span class="linenos" data-linenos=" 32 "></span></a><span class="s"># Logging</span>
</span><span id="__span-27-33"><a id="__codelineno-27-33" name="__codelineno-27-33"></a><a href="#__codelineno-27-33"><span class="linenos" data-linenos=" 33 "></span></a><span class="s">#SyslogFacility AUTH</span>
</span><span id="__span-27-34"><a id="__codelineno-27-34" name="__codelineno-27-34"></a><a href="#__codelineno-27-34"><span class="linenos" data-linenos=" 34 "></span></a><span class="s">#LogLevel INFO</span>
</span><span id="__span-27-35"><a id="__codelineno-27-35" name="__codelineno-27-35"></a><a href="#__codelineno-27-35"><span class="linenos" data-linenos=" 35 "></span></a>
</span><span id="__span-27-36"><a id="__codelineno-27-36" name="__codelineno-27-36"></a><a href="#__codelineno-27-36"><span class="linenos" data-linenos=" 36 "></span></a><span class="s"># Authentication:</span>
</span><span id="__span-27-37"><a id="__codelineno-27-37" name="__codelineno-27-37"></a><a href="#__codelineno-27-37"><span class="linenos" data-linenos=" 37 "></span></a>
</span><span id="__span-27-38"><a id="__codelineno-27-38" name="__codelineno-27-38"></a><a href="#__codelineno-27-38"><span class="linenos" data-linenos=" 38 "></span></a><span class="s">#LoginGraceTime 2m</span>
</span><span id="__span-27-39"><a id="__codelineno-27-39" name="__codelineno-27-39"></a><a href="#__codelineno-27-39"><span class="linenos" data-linenos=" 39 "></span></a><span class="s">PermitRootLogin prohibit-password</span>
</span><span id="__span-27-40"><a id="__codelineno-27-40" name="__codelineno-27-40"></a><a href="#__codelineno-27-40"><span class="linenos" data-linenos=" 40 "></span></a><span class="s">#StrictModes yes</span>
</span><span id="__span-27-41"><a id="__codelineno-27-41" name="__codelineno-27-41"></a><a href="#__codelineno-27-41"><span class="linenos" data-linenos=" 41 "></span></a><span class="s">#MaxAuthTries 6</span>
</span><span id="__span-27-42"><a id="__codelineno-27-42" name="__codelineno-27-42"></a><a href="#__codelineno-27-42"><span class="linenos" data-linenos=" 42 "></span></a><span class="s">#MaxSessions 10</span>
</span><span id="__span-27-43"><a id="__codelineno-27-43" name="__codelineno-27-43"></a><a href="#__codelineno-27-43"><span class="linenos" data-linenos=" 43 "></span></a>
</span><span id="__span-27-44"><a id="__codelineno-27-44" name="__codelineno-27-44"></a><a href="#__codelineno-27-44"><span class="linenos" data-linenos=" 44 "></span></a><span class="s">PubkeyAuthentication yes</span>
</span><span id="__span-27-45"><a id="__codelineno-27-45" name="__codelineno-27-45"></a><a href="#__codelineno-27-45"><span class="linenos" data-linenos=" 45 "></span></a>
</span><span id="__span-27-46"><a id="__codelineno-27-46" name="__codelineno-27-46"></a><a href="#__codelineno-27-46"><span class="linenos" data-linenos=" 46 "></span></a><span class="s"># The default is to check both .ssh/authorized_keys and .ssh/authorized_keys2</span>
</span><span id="__span-27-47"><a id="__codelineno-27-47" name="__codelineno-27-47"></a><a href="#__codelineno-27-47"><span class="linenos" data-linenos=" 47 "></span></a><span class="s"># but this is overridden so installations will only check .ssh/authorized_keys</span>
</span><span id="__span-27-48"><a id="__codelineno-27-48" name="__codelineno-27-48"></a><a href="#__codelineno-27-48"><span class="linenos" data-linenos=" 48 "></span></a><span class="s">AuthorizedKeysFile      .ssh/authorized_keys</span>
</span><span id="__span-27-49"><a id="__codelineno-27-49" name="__codelineno-27-49"></a><a href="#__codelineno-27-49"><span class="linenos" data-linenos=" 49 "></span></a>
</span><span id="__span-27-50"><a id="__codelineno-27-50" name="__codelineno-27-50"></a><a href="#__codelineno-27-50"><span class="linenos" data-linenos=" 50 "></span></a><span class="s">#AuthorizedPrincipalsFile none</span>
</span><span id="__span-27-51"><a id="__codelineno-27-51" name="__codelineno-27-51"></a><a href="#__codelineno-27-51"><span class="linenos" data-linenos=" 51 "></span></a>
</span><span id="__span-27-52"><a id="__codelineno-27-52" name="__codelineno-27-52"></a><a href="#__codelineno-27-52"><span class="linenos" data-linenos=" 52 "></span></a><span class="s">#AuthorizedKeysCommand none</span>
</span><span id="__span-27-53"><a id="__codelineno-27-53" name="__codelineno-27-53"></a><a href="#__codelineno-27-53"><span class="linenos" data-linenos=" 53 "></span></a><span class="s">#AuthorizedKeysCommandUser nobody</span>
</span><span id="__span-27-54"><a id="__codelineno-27-54" name="__codelineno-27-54"></a><a href="#__codelineno-27-54"><span class="linenos" data-linenos=" 54 "></span></a>
</span><span id="__span-27-55"><a id="__codelineno-27-55" name="__codelineno-27-55"></a><a href="#__codelineno-27-55"><span class="linenos" data-linenos=" 55 "></span></a><span class="s"># For this to work you will also need host keys in /etc/ssh/ssh_known_hosts</span>
</span><span id="__span-27-56"><a id="__codelineno-27-56" name="__codelineno-27-56"></a><a href="#__codelineno-27-56"><span class="linenos" data-linenos=" 56 "></span></a><span class="s">#HostbasedAuthentication no</span>
</span><span id="__span-27-57"><a id="__codelineno-27-57" name="__codelineno-27-57"></a><a href="#__codelineno-27-57"><span class="linenos" data-linenos=" 57 "></span></a><span class="s"># Change to yes if you don&#39;t trust ~/.ssh/known_hosts for</span>
</span><span id="__span-27-58"><a id="__codelineno-27-58" name="__codelineno-27-58"></a><a href="#__codelineno-27-58"><span class="linenos" data-linenos=" 58 "></span></a><span class="s"># HostbasedAuthentication</span>
</span><span id="__span-27-59"><a id="__codelineno-27-59" name="__codelineno-27-59"></a><a href="#__codelineno-27-59"><span class="linenos" data-linenos=" 59 "></span></a><span class="s">#IgnoreUserKnownHosts no</span>
</span><span id="__span-27-60"><a id="__codelineno-27-60" name="__codelineno-27-60"></a><a href="#__codelineno-27-60"><span class="linenos" data-linenos=" 60 "></span></a><span class="s"># Don&#39;t read the user&#39;s ~/.rhosts and ~/.shosts files</span>
</span><span id="__span-27-61"><a id="__codelineno-27-61" name="__codelineno-27-61"></a><a href="#__codelineno-27-61"><span class="linenos" data-linenos=" 61 "></span></a><span class="s">#IgnoreRhosts yes</span>
</span><span id="__span-27-62"><a id="__codelineno-27-62" name="__codelineno-27-62"></a><a href="#__codelineno-27-62"><span class="linenos" data-linenos=" 62 "></span></a>
</span><span id="__span-27-63"><a id="__codelineno-27-63" name="__codelineno-27-63"></a><a href="#__codelineno-27-63"><span class="linenos" data-linenos=" 63 "></span></a><span class="s"># Change to yes to enable built-in password authentication.</span>
</span><span id="__span-27-64"><a id="__codelineno-27-64" name="__codelineno-27-64"></a><a href="#__codelineno-27-64"><span class="linenos" data-linenos=" 64 "></span></a><span class="s"># Note that passwords may also be accepted via KbdInteractiveAuthentication.</span>
</span><span id="__span-27-65"><a id="__codelineno-27-65" name="__codelineno-27-65"></a><a href="#__codelineno-27-65"><span class="linenos" data-linenos=" 65 "></span></a><span class="s">PasswordAuthentication no</span>
</span><span id="__span-27-66"><a id="__codelineno-27-66" name="__codelineno-27-66"></a><a href="#__codelineno-27-66"><span class="linenos" data-linenos=" 66 "></span></a><span class="s">PermitEmptyPasswords no</span>
</span><span id="__span-27-67"><a id="__codelineno-27-67" name="__codelineno-27-67"></a><a href="#__codelineno-27-67"><span class="linenos" data-linenos=" 67 "></span></a>
</span><span id="__span-27-68"><a id="__codelineno-27-68" name="__codelineno-27-68"></a><a href="#__codelineno-27-68"><span class="linenos" data-linenos=" 68 "></span></a><span class="s"># Change to no to disable PAM authentication</span>
</span><span id="__span-27-69"><a id="__codelineno-27-69" name="__codelineno-27-69"></a><a href="#__codelineno-27-69"><span class="linenos" data-linenos=" 69 "></span></a><span class="s">KbdInteractiveAuthentication no</span>
</span><span id="__span-27-70"><a id="__codelineno-27-70" name="__codelineno-27-70"></a><a href="#__codelineno-27-70"><span class="linenos" data-linenos=" 70 "></span></a>
</span><span id="__span-27-71"><a id="__codelineno-27-71" name="__codelineno-27-71"></a><a href="#__codelineno-27-71"><span class="linenos" data-linenos=" 71 "></span></a><span class="s"># Kerberos options</span>
</span><span id="__span-27-72"><a id="__codelineno-27-72" name="__codelineno-27-72"></a><a href="#__codelineno-27-72"><span class="linenos" data-linenos=" 72 "></span></a><span class="s">#KerberosAuthentication no</span>
</span><span id="__span-27-73"><a id="__codelineno-27-73" name="__codelineno-27-73"></a><a href="#__codelineno-27-73"><span class="linenos" data-linenos=" 73 "></span></a><span class="s">#KerberosOrLocalPasswd yes</span>
</span><span id="__span-27-74"><a id="__codelineno-27-74" name="__codelineno-27-74"></a><a href="#__codelineno-27-74"><span class="linenos" data-linenos=" 74 "></span></a><span class="s">#KerberosTicketCleanup yes</span>
</span><span id="__span-27-75"><a id="__codelineno-27-75" name="__codelineno-27-75"></a><a href="#__codelineno-27-75"><span class="linenos" data-linenos=" 75 "></span></a><span class="s">#KerberosGetAFSToken no</span>
</span><span id="__span-27-76"><a id="__codelineno-27-76" name="__codelineno-27-76"></a><a href="#__codelineno-27-76"><span class="linenos" data-linenos=" 76 "></span></a>
</span><span id="__span-27-77"><a id="__codelineno-27-77" name="__codelineno-27-77"></a><a href="#__codelineno-27-77"><span class="linenos" data-linenos=" 77 "></span></a><span class="s"># GSSAPI options</span>
</span><span id="__span-27-78"><a id="__codelineno-27-78" name="__codelineno-27-78"></a><a href="#__codelineno-27-78"><span class="linenos" data-linenos=" 78 "></span></a><span class="s">#GSSAPIAuthentication no</span>
</span><span id="__span-27-79"><a id="__codelineno-27-79" name="__codelineno-27-79"></a><a href="#__codelineno-27-79"><span class="linenos" data-linenos=" 79 "></span></a><span class="s">#GSSAPICleanupCredentials yes</span>
</span><span id="__span-27-80"><a id="__codelineno-27-80" name="__codelineno-27-80"></a><a href="#__codelineno-27-80"><span class="linenos" data-linenos=" 80 "></span></a>
</span><span id="__span-27-81"><a id="__codelineno-27-81" name="__codelineno-27-81"></a><a href="#__codelineno-27-81"><span class="linenos" data-linenos=" 81 "></span></a><span class="s"># Set this to &#39;no&#39; to disable PAM authentication, account processing,</span>
</span><span id="__span-27-82"><a id="__codelineno-27-82" name="__codelineno-27-82"></a><a href="#__codelineno-27-82"><span class="linenos" data-linenos=" 82 "></span></a><span class="s"># and session processing. If this is enabled, PAM authentication will</span>
</span><span id="__span-27-83"><a id="__codelineno-27-83" name="__codelineno-27-83"></a><a href="#__codelineno-27-83"><span class="linenos" data-linenos=" 83 "></span></a><span class="s"># be allowed through the KbdInteractiveAuthentication and</span>
</span><span id="__span-27-84"><a id="__codelineno-27-84" name="__codelineno-27-84"></a><a href="#__codelineno-27-84"><span class="linenos" data-linenos=" 84 "></span></a><span class="s"># PasswordAuthentication.  Depending on your PAM configuration,</span>
</span><span id="__span-27-85"><a id="__codelineno-27-85" name="__codelineno-27-85"></a><a href="#__codelineno-27-85"><span class="linenos" data-linenos=" 85 "></span></a><span class="s"># PAM authentication via KbdInteractiveAuthentication may bypass</span>
</span><span id="__span-27-86"><a id="__codelineno-27-86" name="__codelineno-27-86"></a><a href="#__codelineno-27-86"><span class="linenos" data-linenos=" 86 "></span></a><span class="s"># the setting of &quot;PermitRootLogin prohibit-password&quot;.</span>
</span><span id="__span-27-87"><a id="__codelineno-27-87" name="__codelineno-27-87"></a><a href="#__codelineno-27-87"><span class="linenos" data-linenos=" 87 "></span></a><span class="s"># If you just want the PAM account and session checks to run without</span>
</span><span id="__span-27-88"><a id="__codelineno-27-88" name="__codelineno-27-88"></a><a href="#__codelineno-27-88"><span class="linenos" data-linenos=" 88 "></span></a><span class="s"># PAM authentication, then enable this but set PasswordAuthentication</span>
</span><span id="__span-27-89"><a id="__codelineno-27-89" name="__codelineno-27-89"></a><a href="#__codelineno-27-89"><span class="linenos" data-linenos=" 89 "></span></a><span class="s"># and KbdInteractiveAuthentication to &#39;no&#39;.</span>
</span><span id="__span-27-90"><a id="__codelineno-27-90" name="__codelineno-27-90"></a><a href="#__codelineno-27-90"><span class="linenos" data-linenos=" 90 "></span></a><span class="s">UsePAM no</span>
</span><span id="__span-27-91"><a id="__codelineno-27-91" name="__codelineno-27-91"></a><a href="#__codelineno-27-91"><span class="linenos" data-linenos=" 91 "></span></a>
</span><span id="__span-27-92"><a id="__codelineno-27-92" name="__codelineno-27-92"></a><a href="#__codelineno-27-92"><span class="linenos" data-linenos=" 92 "></span></a><span class="s">AllowAgentForwarding no</span>
</span><span id="__span-27-93"><a id="__codelineno-27-93" name="__codelineno-27-93"></a><a href="#__codelineno-27-93"><span class="linenos" data-linenos=" 93 "></span></a><span class="s">AllowTcpForwarding no</span>
</span><span id="__span-27-94"><a id="__codelineno-27-94" name="__codelineno-27-94"></a><a href="#__codelineno-27-94"><span class="linenos" data-linenos=" 94 "></span></a><span class="s">GatewayPorts no</span>
</span><span id="__span-27-95"><a id="__codelineno-27-95" name="__codelineno-27-95"></a><a href="#__codelineno-27-95"><span class="linenos" data-linenos=" 95 "></span></a><span class="s">X11Forwarding no</span>
</span><span id="__span-27-96"><a id="__codelineno-27-96" name="__codelineno-27-96"></a><a href="#__codelineno-27-96"><span class="linenos" data-linenos=" 96 "></span></a><span class="s">#X11DisplayOffset 10</span>
</span><span id="__span-27-97"><a id="__codelineno-27-97" name="__codelineno-27-97"></a><a href="#__codelineno-27-97"><span class="linenos" data-linenos=" 97 "></span></a><span class="s">#X11UseLocalhost yes</span>
</span><span id="__span-27-98"><a id="__codelineno-27-98" name="__codelineno-27-98"></a><a href="#__codelineno-27-98"><span class="linenos" data-linenos=" 98 "></span></a><span class="s">#PermitTTY yes</span>
</span><span id="__span-27-99"><a id="__codelineno-27-99" name="__codelineno-27-99"></a><a href="#__codelineno-27-99"><span class="linenos" data-linenos=" 99 "></span></a><span class="s">#PrintMotd yes</span>
</span><span id="__span-27-100"><a id="__codelineno-27-100" name="__codelineno-27-100"></a><a href="#__codelineno-27-100"><span class="linenos" data-linenos="100 "></span></a><span class="s">#PrintLastLog yes</span>
</span><span id="__span-27-101"><a id="__codelineno-27-101" name="__codelineno-27-101"></a><a href="#__codelineno-27-101"><span class="linenos" data-linenos="101 "></span></a><span class="s">#TCPKeepAlive yes</span>
</span><span id="__span-27-102"><a id="__codelineno-27-102" name="__codelineno-27-102"></a><a href="#__codelineno-27-102"><span class="linenos" data-linenos="102 "></span></a><span class="s">PermitUserEnvironment no</span>
</span><span id="__span-27-103"><a id="__codelineno-27-103" name="__codelineno-27-103"></a><a href="#__codelineno-27-103"><span class="linenos" data-linenos="103 "></span></a><span class="s">#Compression delayed</span>
</span><span id="__span-27-104"><a id="__codelineno-27-104" name="__codelineno-27-104"></a><a href="#__codelineno-27-104"><span class="linenos" data-linenos="104 "></span></a><span class="s">ClientAliveInterval 10</span>
</span><span id="__span-27-105"><a id="__codelineno-27-105" name="__codelineno-27-105"></a><a href="#__codelineno-27-105"><span class="linenos" data-linenos="105 "></span></a><span class="s">ClientAliveCountMax 6</span>
</span><span id="__span-27-106"><a id="__codelineno-27-106" name="__codelineno-27-106"></a><a href="#__codelineno-27-106"><span class="linenos" data-linenos="106 "></span></a><span class="s">#UseDNS yes</span>
</span><span id="__span-27-107"><a id="__codelineno-27-107" name="__codelineno-27-107"></a><a href="#__codelineno-27-107"><span class="linenos" data-linenos="107 "></span></a><span class="s">PidFile /var/run/sshd.pid</span>
</span><span id="__span-27-108"><a id="__codelineno-27-108" name="__codelineno-27-108"></a><a href="#__codelineno-27-108"><span class="linenos" data-linenos="108 "></span></a><span class="s">MaxStartups 10:30:100</span>
</span><span id="__span-27-109"><a id="__codelineno-27-109" name="__codelineno-27-109"></a><a href="#__codelineno-27-109"><span class="linenos" data-linenos="109 "></span></a><span class="s">PermitTunnel no</span>
</span><span id="__span-27-110"><a id="__codelineno-27-110" name="__codelineno-27-110"></a><a href="#__codelineno-27-110"><span class="linenos" data-linenos="110 "></span></a><span class="s">ChrootDirectory %h</span>
</span><span id="__span-27-111"><a id="__codelineno-27-111" name="__codelineno-27-111"></a><a href="#__codelineno-27-111"><span class="linenos" data-linenos="111 "></span></a><span class="s">UseBlacklist no</span>
</span><span id="__span-27-112"><a id="__codelineno-27-112" name="__codelineno-27-112"></a><a href="#__codelineno-27-112"><span class="linenos" data-linenos="112 "></span></a><span class="s">VersionAddendum none</span>
</span><span id="__span-27-113"><a id="__codelineno-27-113" name="__codelineno-27-113"></a><a href="#__codelineno-27-113"><span class="linenos" data-linenos="113 "></span></a>
</span><span id="__span-27-114"><a id="__codelineno-27-114" name="__codelineno-27-114"></a><a href="#__codelineno-27-114"><span class="linenos" data-linenos="114 "></span></a><span class="s"># no default banner path</span>
</span><span id="__span-27-115"><a id="__codelineno-27-115" name="__codelineno-27-115"></a><a href="#__codelineno-27-115"><span class="linenos" data-linenos="115 "></span></a><span class="s">#Banner none</span>
</span><span id="__span-27-116"><a id="__codelineno-27-116" name="__codelineno-27-116"></a><a href="#__codelineno-27-116"><span class="linenos" data-linenos="116 "></span></a>
</span><span id="__span-27-117"><a id="__codelineno-27-117" name="__codelineno-27-117"></a><a href="#__codelineno-27-117"><span class="linenos" data-linenos="117 "></span></a><span class="s"># override default of no subsystems</span>
</span><span id="__span-27-118"><a id="__codelineno-27-118" name="__codelineno-27-118"></a><a href="#__codelineno-27-118"><span class="linenos" data-linenos="118 "></span></a><span class="s">#Subsystem      sftp    /usr/libexec/sftp-server</span>
</span><span id="__span-27-119"><a id="__codelineno-27-119" name="__codelineno-27-119"></a><a href="#__codelineno-27-119"><span class="linenos" data-linenos="119 "></span></a>
</span><span id="__span-27-120"><a id="__codelineno-27-120" name="__codelineno-27-120"></a><a href="#__codelineno-27-120"><span class="linenos" data-linenos="120 "></span></a><span class="s"># Example of overriding settings on a per-user basis</span>
</span><span id="__span-27-121"><a id="__codelineno-27-121" name="__codelineno-27-121"></a><a href="#__codelineno-27-121"><span class="linenos" data-linenos="121 "></span></a><span class="s">#Match User anoncvs</span>
</span><span id="__span-27-122"><a id="__codelineno-27-122" name="__codelineno-27-122"></a><a href="#__codelineno-27-122"><span class="linenos" data-linenos="122 "></span></a><span class="s">#       X11Forwarding no</span>
</span><span id="__span-27-123"><a id="__codelineno-27-123" name="__codelineno-27-123"></a><a href="#__codelineno-27-123"><span class="linenos" data-linenos="123 "></span></a><span class="s">#       AllowTcpForwarding no</span>
</span><span id="__span-27-124"><a id="__codelineno-27-124" name="__codelineno-27-124"></a><a href="#__codelineno-27-124"><span class="linenos" data-linenos="124 "></span></a><span class="s">#       PermitTTY no</span>
</span><span id="__span-27-125"><a id="__codelineno-27-125" name="__codelineno-27-125"></a><a href="#__codelineno-27-125"><span class="linenos" data-linenos="125 "></span></a><span class="s">#       ForceCommand cvs server</span>
</span><span id="__span-27-126"><a id="__codelineno-27-126" name="__codelineno-27-126"></a><a href="#__codelineno-27-126"><span class="linenos" data-linenos="126 "></span></a>
</span><span id="__span-27-127"><a id="__codelineno-27-127" name="__codelineno-27-127"></a><a href="#__codelineno-27-127"><span class="linenos" data-linenos="127 "></span></a><span class="s">Subsystem sftp internal-sftp -u 0027</span>
</span><span id="__span-27-128"><a id="__codelineno-27-128" name="__codelineno-27-128"></a><a href="#__codelineno-27-128"><span class="linenos" data-linenos="128 "></span></a>
</span><span id="__span-27-129"><a id="__codelineno-27-129" name="__codelineno-27-129"></a><a href="#__codelineno-27-129"><span class="linenos" data-linenos="129 "></span></a><span class="s">AllowGroups wheel admin sshusers sftponly</span>
</span><span id="__span-27-130"><a id="__codelineno-27-130" name="__codelineno-27-130"></a><a href="#__codelineno-27-130"><span class="linenos" data-linenos="130 "></span></a>
</span><span id="__span-27-131"><a id="__codelineno-27-131" name="__codelineno-27-131"></a><a href="#__codelineno-27-131"><span class="linenos" data-linenos="131 "></span></a><span class="s">Match User root</span>
</span><span id="__span-27-132"><a id="__codelineno-27-132" name="__codelineno-27-132"></a><a href="#__codelineno-27-132"><span class="linenos" data-linenos="132 "></span></a><span class="s">    ChrootDirectory none</span>
</span><span id="__span-27-133"><a id="__codelineno-27-133" name="__codelineno-27-133"></a><a href="#__codelineno-27-133"><span class="linenos" data-linenos="133 "></span></a><span class="s">    PasswordAuthentication no</span>
</span><span id="__span-27-134"><a id="__codelineno-27-134" name="__codelineno-27-134"></a><a href="#__codelineno-27-134"><span class="linenos" data-linenos="134 "></span></a>
</span><span id="__span-27-135"><a id="__codelineno-27-135" name="__codelineno-27-135"></a><a href="#__codelineno-27-135"><span class="linenos" data-linenos="135 "></span></a><span class="s">Match Group admin</span>
</span><span id="__span-27-136"><a id="__codelineno-27-136" name="__codelineno-27-136"></a><a href="#__codelineno-27-136"><span class="linenos" data-linenos="136 "></span></a><span class="s">    ChrootDirectory none</span>
</span><span id="__span-27-137"><a id="__codelineno-27-137" name="__codelineno-27-137"></a><a href="#__codelineno-27-137"><span class="linenos" data-linenos="137 "></span></a><span class="s">    PasswordAuthentication yes</span>
</span><span id="__span-27-138"><a id="__codelineno-27-138" name="__codelineno-27-138"></a><a href="#__codelineno-27-138"><span class="linenos" data-linenos="138 "></span></a>
</span><span id="__span-27-139"><a id="__codelineno-27-139" name="__codelineno-27-139"></a><a href="#__codelineno-27-139"><span class="linenos" data-linenos="139 "></span></a><span class="s">Match Group sshusers</span>
</span><span id="__span-27-140"><a id="__codelineno-27-140" name="__codelineno-27-140"></a><a href="#__codelineno-27-140"><span class="linenos" data-linenos="140 "></span></a><span class="s">    ChrootDirectory none</span>
</span><span id="__span-27-141"><a id="__codelineno-27-141" name="__codelineno-27-141"></a><a href="#__codelineno-27-141"><span class="linenos" data-linenos="141 "></span></a><span class="s">    PasswordAuthentication no</span>
</span><span id="__span-27-142"><a id="__codelineno-27-142" name="__codelineno-27-142"></a><a href="#__codelineno-27-142"><span class="linenos" data-linenos="142 "></span></a>
</span><span id="__span-27-143"><a id="__codelineno-27-143" name="__codelineno-27-143"></a><a href="#__codelineno-27-143"><span class="linenos" data-linenos="143 "></span></a><span class="s">Match Group sftponly</span>
</span><span id="__span-27-144"><a id="__codelineno-27-144" name="__codelineno-27-144"></a><a href="#__codelineno-27-144"><span class="linenos" data-linenos="144 "></span></a><span class="s">    ChrootDirectory /home</span>
</span><span id="__span-27-145"><a id="__codelineno-27-145" name="__codelineno-27-145"></a><a href="#__codelineno-27-145"><span class="linenos" data-linenos="145 "></span></a><span class="s">    PasswordAuthentication yes</span>
</span><span id="__span-27-146"><a id="__codelineno-27-146" name="__codelineno-27-146"></a><a href="#__codelineno-27-146"><span class="linenos" data-linenos="146 "></span></a><span class="s">    ForceCommand internal-sftp -d %u</span>
</span><span id="__span-27-147"><a id="__codelineno-27-147" name="__codelineno-27-147"></a><a href="#__codelineno-27-147"><span class="linenos" data-linenos="147 "></span></a>
</span><span id="__span-27-148"><a id="__codelineno-27-148" name="__codelineno-27-148"></a><a href="#__codelineno-27-148"><span class="linenos" data-linenos="148 "></span></a><span class="s">EOF</span>
</span><span id="__span-27-149"><a id="__codelineno-27-149" name="__codelineno-27-149"></a><a href="#__codelineno-27-149"><span class="linenos" data-linenos="149 "></span></a>
</span><span id="__span-27-150"><a id="__codelineno-27-150" name="__codelineno-27-150"></a><a href="#__codelineno-27-150"><span class="linenos" data-linenos="150 "></span></a>rm<span class="w"> </span>-f<span class="w"> </span>/etc/ssh/ssh_host_*_key*
</span><span id="__span-27-151"><a id="__codelineno-27-151" name="__codelineno-27-151"></a><a href="#__codelineno-27-151"><span class="linenos" data-linenos="151 "></span></a>ssh-keygen<span class="w"> </span>-q<span class="w"> </span>-t<span class="w"> </span>rsa<span class="w"> </span>-b<span class="w"> </span><span class="m">4096</span><span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;/etc/ssh/ssh_host_rsa_key&quot;</span><span class="w"> </span>-N<span class="w"> </span><span class="s2">&quot;&quot;</span>
</span><span id="__span-27-152"><a id="__codelineno-27-152" name="__codelineno-27-152"></a><a href="#__codelineno-27-152"><span class="linenos" data-linenos="152 "></span></a>ssh-keygen<span class="w"> </span>-l<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;/etc/ssh/ssh_host_rsa_key.pub&quot;</span>
</span><span id="__span-27-153"><a id="__codelineno-27-153" name="__codelineno-27-153"></a><a href="#__codelineno-27-153"><span class="linenos" data-linenos="153 "></span></a>ssh-keygen<span class="w"> </span>-q<span class="w"> </span>-t<span class="w"> </span>ecdsa<span class="w"> </span>-b<span class="w"> </span><span class="m">384</span><span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;/etc/ssh/ssh_host_ecdsa_key&quot;</span><span class="w"> </span>-N<span class="w"> </span><span class="s2">&quot;&quot;</span>
</span><span id="__span-27-154"><a id="__codelineno-27-154" name="__codelineno-27-154"></a><a href="#__codelineno-27-154"><span class="linenos" data-linenos="154 "></span></a>ssh-keygen<span class="w"> </span>-l<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;/etc/ssh/ssh_host_ecdsa_key.pub&quot;</span>
</span><span id="__span-27-155"><a id="__codelineno-27-155" name="__codelineno-27-155"></a><a href="#__codelineno-27-155"><span class="linenos" data-linenos="155 "></span></a>ssh-keygen<span class="w"> </span>-q<span class="w"> </span>-t<span class="w"> </span>ed25519<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;/etc/ssh/ssh_host_ed25519_key&quot;</span><span class="w"> </span>-N<span class="w"> </span><span class="s2">&quot;&quot;</span>
</span><span id="__span-27-156"><a id="__codelineno-27-156" name="__codelineno-27-156"></a><a href="#__codelineno-27-156"><span class="linenos" data-linenos="156 "></span></a>ssh-keygen<span class="w"> </span>-l<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;/etc/ssh/ssh_host_ed25519_key.pub&quot;</span>
</span><span id="__span-27-157"><a id="__codelineno-27-157" name="__codelineno-27-157"></a><a href="#__codelineno-27-157"><span class="linenos" data-linenos="157 "></span></a>
</span><span id="__span-27-158"><a id="__codelineno-27-158" name="__codelineno-27-158"></a><a href="#__codelineno-27-158"><span class="linenos" data-linenos="158 "></span></a>mkdir<span class="w"> </span>-p<span class="w"> </span>/root/.ssh
</span><span id="__span-27-159"><a id="__codelineno-27-159" name="__codelineno-27-159"></a><a href="#__codelineno-27-159"><span class="linenos" data-linenos="159 "></span></a>chmod<span class="w"> </span><span class="m">0700</span><span class="w"> </span>/root/.ssh
</span><span id="__span-27-160"><a id="__codelineno-27-160" name="__codelineno-27-160"></a><a href="#__codelineno-27-160"><span class="linenos" data-linenos="160 "></span></a>ssh-keygen<span class="w"> </span>-t<span class="w"> </span>ed25519<span class="w"> </span>-O<span class="w"> </span>clear<span class="w"> </span>-O<span class="w"> </span>permit-pty<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;/root/.ssh/id_ed25519&quot;</span><span class="w"> </span>-N<span class="w"> </span><span class="s2">&quot;&quot;</span>
</span><span id="__span-27-161"><a id="__codelineno-27-161" name="__codelineno-27-161"></a><a href="#__codelineno-27-161"><span class="linenos" data-linenos="161 "></span></a>cat<span class="w"> </span>/root/.ssh/id_ed25519.pub<span class="w"> </span>&gt;&gt;<span class="w"> </span>/root/.ssh/authorized_keys
</span><span id="__span-27-162"><a id="__codelineno-27-162" name="__codelineno-27-162"></a><a href="#__codelineno-27-162"><span class="linenos" data-linenos="162 "></span></a>ssh-keygen<span class="w"> </span>-t<span class="w"> </span>ecdsa<span class="w"> </span>-b<span class="w"> </span><span class="m">384</span><span class="w"> </span>-O<span class="w"> </span>clear<span class="w"> </span>-O<span class="w"> </span>permit-pty<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;/root/.ssh/id_ecdsa&quot;</span><span class="w"> </span>-N<span class="w"> </span><span class="s2">&quot;&quot;</span>
</span><span id="__span-27-163"><a id="__codelineno-27-163" name="__codelineno-27-163"></a><a href="#__codelineno-27-163"><span class="linenos" data-linenos="163 "></span></a>cat<span class="w"> </span>/root/.ssh/id_ecdsa.pub<span class="w"> </span>&gt;&gt;<span class="w"> </span>/root/.ssh/authorized_keys
</span><span id="__span-27-164"><a id="__codelineno-27-164" name="__codelineno-27-164"></a><a href="#__codelineno-27-164"><span class="linenos" data-linenos="164 "></span></a>ssh-keygen<span class="w"> </span>-t<span class="w"> </span>rsa<span class="w"> </span>-b<span class="w"> </span><span class="m">4096</span><span class="w"> </span>-O<span class="w"> </span>clear<span class="w"> </span>-O<span class="w"> </span>permit-pty<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;/root/.ssh/id_rsa&quot;</span><span class="w"> </span>-N<span class="w"> </span><span class="s2">&quot;&quot;</span>
</span><span id="__span-27-165"><a id="__codelineno-27-165" name="__codelineno-27-165"></a><a href="#__codelineno-27-165"><span class="linenos" data-linenos="165 "></span></a>cat<span class="w"> </span>/root/.ssh/id_rsa.pub<span class="w"> </span>&gt;&gt;<span class="w"> </span>/root/.ssh/authorized_keys
</span></code></pre></div>
<h3 id="etcsysctlconf-anpassen">/etc/sysctl.conf anpassen<a class="headerlink" href="#etcsysctlconf-anpassen" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>In der <code>sysctl.conf</code> können die meisten Kernel-Parameter verändert werden. Wir wollen dies nutzen, um unser System
etwas robuster und sicherer zu machen.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1"></a><a href="#__codelineno-28-1"><span class="linenos" data-linenos=" 1 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /etc/sysctl.conf</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2"></a><a href="#__codelineno-28-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="s"># https://calomel.org/freebsd_network_tuning.html</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3"></a><a href="#__codelineno-28-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="s">kern.ipc.maxsockbuf=16777216</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4"></a><a href="#__codelineno-28-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="s">net.inet.tcp.recvbuf_max=4194304  # (default 2097152)</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5"></a><a href="#__codelineno-28-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="s">net.inet.tcp.recvspace=65536      # (default 65536)</span>
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6"></a><a href="#__codelineno-28-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="s">net.inet.tcp.sendbuf_inc=65536    # (default 8192)</span>
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7"></a><a href="#__codelineno-28-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="s">net.inet.tcp.sendbuf_max=4194304  # (default 2097152)</span>
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8"></a><a href="#__codelineno-28-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="s">net.inet.tcp.sendspace=65536      # (default 32768)</span>
</span><span id="__span-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9"></a><a href="#__codelineno-28-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="s">net.inet.tcp.mssdflt=1240  # Option 2 (default 536)</span>
</span><span id="__span-28-10"><a id="__codelineno-28-10" name="__codelineno-28-10"></a><a href="#__codelineno-28-10"><span class="linenos" data-linenos="10 "></span></a><span class="s">net.inet.tcp.minmss=536  # (default 216)</span>
</span><span id="__span-28-11"><a id="__codelineno-28-11" name="__codelineno-28-11"></a><a href="#__codelineno-28-11"><span class="linenos" data-linenos="11 "></span></a><span class="s">net.inet.tcp.abc_l_var=52  # (default 2) if net.inet.tcp.mssdflt = 1240</span>
</span><span id="__span-28-12"><a id="__codelineno-28-12" name="__codelineno-28-12"></a><a href="#__codelineno-28-12"><span class="linenos" data-linenos="12 "></span></a><span class="s">net.inet.tcp.initcwnd_segments=52           # (default 10 for FreeBSD 11.2) if net.inet.tcp.mssdflt = 1240</span>
</span><span id="__span-28-13"><a id="__codelineno-28-13" name="__codelineno-28-13"></a><a href="#__codelineno-28-13"><span class="linenos" data-linenos="13 "></span></a><span class="s">net.inet.tcp.cc.abe=1  # (default 0, disabled)</span>
</span><span id="__span-28-14"><a id="__codelineno-28-14" name="__codelineno-28-14"></a><a href="#__codelineno-28-14"><span class="linenos" data-linenos="14 "></span></a><span class="s">net.inet.tcp.rfc6675_pipe=1  # (default 0)</span>
</span><span id="__span-28-15"><a id="__codelineno-28-15" name="__codelineno-28-15"></a><a href="#__codelineno-28-15"><span class="linenos" data-linenos="15 "></span></a><span class="s">net.inet.tcp.syncache.rexmtlimit=0  # (default 3)</span>
</span><span id="__span-28-16"><a id="__codelineno-28-16" name="__codelineno-28-16"></a><a href="#__codelineno-28-16"><span class="linenos" data-linenos="16 "></span></a><span class="s">net.inet.ip.maxfragpackets=0     # (default 63474)</span>
</span><span id="__span-28-17"><a id="__codelineno-28-17" name="__codelineno-28-17"></a><a href="#__codelineno-28-17"><span class="linenos" data-linenos="17 "></span></a><span class="s">net.inet.ip.maxfragsperpacket=0  # (default 16)</span>
</span><span id="__span-28-18"><a id="__codelineno-28-18" name="__codelineno-28-18"></a><a href="#__codelineno-28-18"><span class="linenos" data-linenos="18 "></span></a><span class="s">net.inet6.ip6.maxfragpackets=0   # (default 507715)</span>
</span><span id="__span-28-19"><a id="__codelineno-28-19" name="__codelineno-28-19"></a><a href="#__codelineno-28-19"><span class="linenos" data-linenos="19 "></span></a><span class="s">net.inet6.ip6.maxfrags=0         # (default 507715)</span>
</span><span id="__span-28-20"><a id="__codelineno-28-20" name="__codelineno-28-20"></a><a href="#__codelineno-28-20"><span class="linenos" data-linenos="20 "></span></a><span class="s">net.inet.tcp.syncookies=0  # (default 1)</span>
</span><span id="__span-28-21"><a id="__codelineno-28-21" name="__codelineno-28-21"></a><a href="#__codelineno-28-21"><span class="linenos" data-linenos="21 "></span></a><span class="s">net.inet.tcp.isn_reseed_interval=4500  # (default 0, disabled)</span>
</span><span id="__span-28-22"><a id="__codelineno-28-22" name="__codelineno-28-22"></a><a href="#__codelineno-28-22"><span class="linenos" data-linenos="22 "></span></a><span class="s">net.inet.tcp.tso=0  # (default 1)</span>
</span><span id="__span-28-23"><a id="__codelineno-28-23" name="__codelineno-28-23"></a><a href="#__codelineno-28-23"><span class="linenos" data-linenos="23 "></span></a><span class="s">kern.random.fortuna.minpoolsize=128  # (default 64)</span>
</span><span id="__span-28-24"><a id="__codelineno-28-24" name="__codelineno-28-24"></a><a href="#__codelineno-28-24"><span class="linenos" data-linenos="24 "></span></a><span class="s">kern.random.harvest.mask=33119   # (default 33247, FreeBSD 13 with Intel Secure Key RNG)</span>
</span><span id="__span-28-25"><a id="__codelineno-28-25" name="__codelineno-28-25"></a><a href="#__codelineno-28-25"><span class="linenos" data-linenos="25 "></span></a><span class="s">hw.kbd.keymap_restrict_change=4    # disallow keymap changes for non-privileged users (default 0)</span>
</span><span id="__span-28-26"><a id="__codelineno-28-26" name="__codelineno-28-26"></a><a href="#__codelineno-28-26"><span class="linenos" data-linenos="26 "></span></a><span class="s">kern.elf32.allow_wx=0              # disallow pages to be mapped writable and executable, enforce W^X memory mapping policy for 32 bit user processes (default 1, enabled/allow needed for chrome, libreoffice and go apps)</span>
</span><span id="__span-28-27"><a id="__codelineno-28-27" name="__codelineno-28-27"></a><a href="#__codelineno-28-27"><span class="linenos" data-linenos="27 "></span></a><span class="s">kern.elf64.allow_wx=0              # disallow pages to be mapped writable and executable, enforce W^X memory mapping policy for 64 bit user processes (default 1, enabled/allow needed for chrome, libreoffice and go apps)</span>
</span><span id="__span-28-28"><a id="__codelineno-28-28" name="__codelineno-28-28"></a><a href="#__codelineno-28-28"><span class="linenos" data-linenos="28 "></span></a><span class="s">kern.ipc.shm_use_phys=1            # lock shared memory into RAM and prevent it from being paged out to swap (default 0, disabled)</span>
</span><span id="__span-28-29"><a id="__codelineno-28-29" name="__codelineno-28-29"></a><a href="#__codelineno-28-29"><span class="linenos" data-linenos="29 "></span></a><span class="s">kern.msgbuf_show_timestamp=1       # display timestamp in msgbuf (default 0)</span>
</span><span id="__span-28-30"><a id="__codelineno-28-30" name="__codelineno-28-30"></a><a href="#__codelineno-28-30"><span class="linenos" data-linenos="30 "></span></a><span class="s">kern.randompid=1                   # calculate PIDs by the modulus of an integer, set to one(1) to auto random (default 0)</span>
</span><span id="__span-28-31"><a id="__codelineno-28-31" name="__codelineno-28-31"></a><a href="#__codelineno-28-31"><span class="linenos" data-linenos="31 "></span></a><span class="s">net.bpf.optimize_writers=1         # bpf is write-only unless program explicitly specifies the read filter (default 0)</span>
</span><span id="__span-28-32"><a id="__codelineno-28-32" name="__codelineno-28-32"></a><a href="#__codelineno-28-32"><span class="linenos" data-linenos="32 "></span></a><span class="s">net.inet.icmp.drop_redirect=1      # no redirected ICMP packets (default 0)</span>
</span><span id="__span-28-33"><a id="__codelineno-28-33" name="__codelineno-28-33"></a><a href="#__codelineno-28-33"><span class="linenos" data-linenos="33 "></span></a><span class="s">net.inet.ip.check_interface=1      # verify packet arrives on correct interface (default 0)</span>
</span><span id="__span-28-34"><a id="__codelineno-28-34" name="__codelineno-28-34"></a><a href="#__codelineno-28-34"><span class="linenos" data-linenos="34 "></span></a><span class="s">net.inet.ip.portrange.first=32768  # use ports 32768 to portrange.last for outgoing connections (default 10000)</span>
</span><span id="__span-28-35"><a id="__codelineno-28-35" name="__codelineno-28-35"></a><a href="#__codelineno-28-35"><span class="linenos" data-linenos="35 "></span></a><span class="s">net.inet.ip.portrange.randomcps=9999 # use random port allocation if less than this many ports per second are allocated (default 10)</span>
</span><span id="__span-28-36"><a id="__codelineno-28-36" name="__codelineno-28-36"></a><a href="#__codelineno-28-36"><span class="linenos" data-linenos="36 "></span></a><span class="s">net.inet.ip.portrange.randomtime=1 # seconds to use sequental port allocation before switching back to random (default 45 secs)</span>
</span><span id="__span-28-37"><a id="__codelineno-28-37" name="__codelineno-28-37"></a><a href="#__codelineno-28-37"><span class="linenos" data-linenos="37 "></span></a><span class="s">net.inet.ip.random_id=1            # assign a random IP id to each packet leaving the system (default 0)</span>
</span><span id="__span-28-38"><a id="__codelineno-28-38" name="__codelineno-28-38"></a><a href="#__codelineno-28-38"><span class="linenos" data-linenos="38 "></span></a><span class="s">net.inet.ip.redirect=0             # do not send IP redirects (default 1)</span>
</span><span id="__span-28-39"><a id="__codelineno-28-39" name="__codelineno-28-39"></a><a href="#__codelineno-28-39"><span class="linenos" data-linenos="39 "></span></a><span class="s">net.inet6.ip6.redirect=0           # do not send IPv6 redirects (default 1)</span>
</span><span id="__span-28-40"><a id="__codelineno-28-40" name="__codelineno-28-40"></a><a href="#__codelineno-28-40"><span class="linenos" data-linenos="40 "></span></a><span class="s">net.inet.tcp.blackhole=2           # drop tcp packets destined for closed ports (default 0)</span>
</span><span id="__span-28-41"><a id="__codelineno-28-41" name="__codelineno-28-41"></a><a href="#__codelineno-28-41"><span class="linenos" data-linenos="41 "></span></a><span class="s">net.inet.tcp.drop_synfin=1         # SYN/FIN packets get dropped on initial connection (default 0)</span>
</span><span id="__span-28-42"><a id="__codelineno-28-42" name="__codelineno-28-42"></a><a href="#__codelineno-28-42"><span class="linenos" data-linenos="42 "></span></a><span class="s">net.inet.tcp.fast_finwait2_recycle=1 # recycle FIN/WAIT states quickly, helps against DoS, but may cause false RST (default 0)</span>
</span><span id="__span-28-43"><a id="__codelineno-28-43" name="__codelineno-28-43"></a><a href="#__codelineno-28-43"><span class="linenos" data-linenos="43 "></span></a><span class="s">net.inet.tcp.fastopen.client_enable=0 # disable TCP Fast Open client side, enforce three way TCP handshake (default 1, enabled)</span>
</span><span id="__span-28-44"><a id="__codelineno-28-44" name="__codelineno-28-44"></a><a href="#__codelineno-28-44"><span class="linenos" data-linenos="44 "></span></a><span class="s">net.inet.tcp.fastopen.server_enable=0 # disable TCP Fast Open server side, enforce three way TCP handshake (default 0)</span>
</span><span id="__span-28-45"><a id="__codelineno-28-45" name="__codelineno-28-45"></a><a href="#__codelineno-28-45"><span class="linenos" data-linenos="45 "></span></a><span class="s">net.inet.tcp.finwait2_timeout=1000 # TCP FIN_WAIT_2 timeout waiting for client FIN packet before state close (default 60000, 60 sec)</span>
</span><span id="__span-28-46"><a id="__codelineno-28-46" name="__codelineno-28-46"></a><a href="#__codelineno-28-46"><span class="linenos" data-linenos="46 "></span></a><span class="s">net.inet.tcp.icmp_may_rst=0        # icmp may not send RST to avoid spoofed icmp/udp floods (default 1)</span>
</span><span id="__span-28-47"><a id="__codelineno-28-47" name="__codelineno-28-47"></a><a href="#__codelineno-28-47"><span class="linenos" data-linenos="47 "></span></a><span class="s">net.inet.tcp.keepcnt=2             # amount of tcp keep alive probe failures before socket is forced closed (default 8)</span>
</span><span id="__span-28-48"><a id="__codelineno-28-48" name="__codelineno-28-48"></a><a href="#__codelineno-28-48"><span class="linenos" data-linenos="48 "></span></a><span class="s">net.inet.tcp.keepidle=62000        # time before starting tcp keep alive probes on an idle, TCP connection (default 7200000, 7200 secs)</span>
</span><span id="__span-28-49"><a id="__codelineno-28-49" name="__codelineno-28-49"></a><a href="#__codelineno-28-49"><span class="linenos" data-linenos="49 "></span></a><span class="s">net.inet.tcp.keepinit=5000         # tcp keep alive client reply timeout (default 75000, 75 secs)</span>
</span><span id="__span-28-50"><a id="__codelineno-28-50" name="__codelineno-28-50"></a><a href="#__codelineno-28-50"><span class="linenos" data-linenos="50 "></span></a><span class="s">net.inet.tcp.msl=2500              # Maximum Segment Lifetime, time the connection spends in TIME_WAIT state (default 30000, 2*MSL = 60 sec)</span>
</span><span id="__span-28-51"><a id="__codelineno-28-51" name="__codelineno-28-51"></a><a href="#__codelineno-28-51"><span class="linenos" data-linenos="51 "></span></a><span class="s">net.inet.tcp.path_mtu_discovery=0  # disable for mtu=1500 as most paths drop ICMP type 3 packets, but keep enabled for mtu=9000 (default 1)</span>
</span><span id="__span-28-52"><a id="__codelineno-28-52" name="__codelineno-28-52"></a><a href="#__codelineno-28-52"><span class="linenos" data-linenos="52 "></span></a><span class="s">net.inet.udp.blackhole=1           # drop udp packets destined for closed sockets (default 0)</span>
</span><span id="__span-28-53"><a id="__codelineno-28-53" name="__codelineno-28-53"></a><a href="#__codelineno-28-53"><span class="linenos" data-linenos="53 "></span></a><span class="s">net.inet.udp.recvspace=1048576     # UDP receive space, HTTP/3 webserver, &quot;netstat -sn -p udp&quot; and increase if full socket buffers (default 42080)</span>
</span><span id="__span-28-54"><a id="__codelineno-28-54" name="__codelineno-28-54"></a><a href="#__codelineno-28-54"><span class="linenos" data-linenos="54 "></span></a><span class="s">security.bsd.hardlink_check_gid=1  # unprivileged processes may not create hard links to files owned by other groups, DISABLE for mailman (default 0)</span>
</span><span id="__span-28-55"><a id="__codelineno-28-55" name="__codelineno-28-55"></a><a href="#__codelineno-28-55"><span class="linenos" data-linenos="55 "></span></a><span class="s">security.bsd.hardlink_check_uid=1  # unprivileged processes may not create hard links to files owned by other users,  DISABLE for mailman (default 0)</span>
</span><span id="__span-28-56"><a id="__codelineno-28-56" name="__codelineno-28-56"></a><a href="#__codelineno-28-56"><span class="linenos" data-linenos="56 "></span></a><span class="s">security.bsd.see_other_gids=0      # groups only see their own processes. root can see all (default 1)</span>
</span><span id="__span-28-57"><a id="__codelineno-28-57" name="__codelineno-28-57"></a><a href="#__codelineno-28-57"><span class="linenos" data-linenos="57 "></span></a><span class="s">security.bsd.see_other_uids=0      # users only see their own processes. root can see all (default 1)</span>
</span><span id="__span-28-58"><a id="__codelineno-28-58" name="__codelineno-28-58"></a><a href="#__codelineno-28-58"><span class="linenos" data-linenos="58 "></span></a><span class="s">security.bsd.stack_guard_page=1    # insert a stack guard page ahead of growable segments, stack smashing protection (SSP) (default 0)</span>
</span><span id="__span-28-59"><a id="__codelineno-28-59" name="__codelineno-28-59"></a><a href="#__codelineno-28-59"><span class="linenos" data-linenos="59 "></span></a><span class="s">security.bsd.unprivileged_proc_debug=0 # unprivileged processes may not use process debugging (default 1)</span>
</span><span id="__span-28-60"><a id="__codelineno-28-60" name="__codelineno-28-60"></a><a href="#__codelineno-28-60"><span class="linenos" data-linenos="60 "></span></a><span class="s">security.bsd.unprivileged_read_msgbuf=0 # unprivileged processes may not read the kernel message buffer (default 1)</span>
</span><span id="__span-28-61"><a id="__codelineno-28-61" name="__codelineno-28-61"></a><a href="#__codelineno-28-61"><span class="linenos" data-linenos="61 "></span></a><span class="s">vfs.zfs.delay_min_dirty_percent=98  # write throttle when dirty &quot;modified&quot; data reaches 98% of dirty_data_max (default 60%)</span>
</span><span id="__span-28-62"><a id="__codelineno-28-62" name="__codelineno-28-62"></a><a href="#__codelineno-28-62"><span class="linenos" data-linenos="62 "></span></a><span class="s">vfs.zfs.dirty_data_sync_percent=95  # force commit Transaction Group (TXG) if dirty_data reaches 95% of dirty_data_max (default 20%)</span>
</span><span id="__span-28-63"><a id="__codelineno-28-63" name="__codelineno-28-63"></a><a href="#__codelineno-28-63"><span class="linenos" data-linenos="63 "></span></a><span class="s">vfs.zfs.min_auto_ashift=12          # newly created pool ashift, set to 12 for 4K and 13 for 8k alignment, zdb (default 9, 512 byte, ashift=9)</span>
</span><span id="__span-28-64"><a id="__codelineno-28-64" name="__codelineno-28-64"></a><a href="#__codelineno-28-64"><span class="linenos" data-linenos="64 "></span></a><span class="s">vfs.zfs.trim.txg_batch=128          # max number of TRIMs per top-level vdev (default 32)</span>
</span><span id="__span-28-65"><a id="__codelineno-28-65" name="__codelineno-28-65"></a><a href="#__codelineno-28-65"><span class="linenos" data-linenos="65 "></span></a><span class="s">vfs.zfs.txg.timeout=75              # force commit Transaction Group (TXG) at 75 secs, increase to aggregated more data (default 5 sec)</span>
</span><span id="__span-28-66"><a id="__codelineno-28-66" name="__codelineno-28-66"></a><a href="#__codelineno-28-66"><span class="linenos" data-linenos="66 "></span></a><span class="s">vfs.zfs.vdev.def_queue_depth=128    # max number of outstanding I/Os per top-level vdev (default 32)</span>
</span><span id="__span-28-67"><a id="__codelineno-28-67" name="__codelineno-28-67"></a><a href="#__codelineno-28-67"><span class="linenos" data-linenos="67 "></span></a><span class="s">vfs.zfs.vdev.write_gap_limit=0      # max gap between any two aggregated writes, 0 to minimize frags (default 4096, 4KB)</span>
</span><span id="__span-28-68"><a id="__codelineno-28-68" name="__codelineno-28-68"></a><a href="#__codelineno-28-68"><span class="linenos" data-linenos="68 "></span></a><span class="s">net.inet.raw.maxdgram=16384       # (default 9216)</span>
</span><span id="__span-28-69"><a id="__codelineno-28-69" name="__codelineno-28-69"></a><a href="#__codelineno-28-69"><span class="linenos" data-linenos="69 "></span></a><span class="s">net.inet.raw.recvspace=16384      # (default 9216)</span>
</span><span id="__span-28-70"><a id="__codelineno-28-70" name="__codelineno-28-70"></a><a href="#__codelineno-28-70"><span class="linenos" data-linenos="70 "></span></a><span class="s">net.local.stream.sendspace=16384  # (default 8192)</span>
</span><span id="__span-28-71"><a id="__codelineno-28-71" name="__codelineno-28-71"></a><a href="#__codelineno-28-71"><span class="linenos" data-linenos="71 "></span></a><span class="s">net.local.stream.recvspace=16384  # (default 8192)</span>
</span><span id="__span-28-72"><a id="__codelineno-28-72" name="__codelineno-28-72"></a><a href="#__codelineno-28-72"><span class="linenos" data-linenos="72 "></span></a><span class="s">kern.ipc.soacceptqueue=1024</span>
</span><span id="__span-28-73"><a id="__codelineno-28-73" name="__codelineno-28-73"></a><a href="#__codelineno-28-73"><span class="linenos" data-linenos="73 "></span></a><span class="s">kern.ipc.somaxconn=1024</span>
</span><span id="__span-28-74"><a id="__codelineno-28-74" name="__codelineno-28-74"></a><a href="#__codelineno-28-74"><span class="linenos" data-linenos="74 "></span></a><span class="s">net.inet.icmp.icmplim=1</span>
</span><span id="__span-28-75"><a id="__codelineno-28-75" name="__codelineno-28-75"></a><a href="#__codelineno-28-75"><span class="linenos" data-linenos="75 "></span></a><span class="s">net.inet.icmp.icmplim_output=0</span>
</span><span id="__span-28-76"><a id="__codelineno-28-76" name="__codelineno-28-76"></a><a href="#__codelineno-28-76"><span class="linenos" data-linenos="76 "></span></a><span class="s">kern.maxfiles=65536</span>
</span><span id="__span-28-77"><a id="__codelineno-28-77" name="__codelineno-28-77"></a><a href="#__codelineno-28-77"><span class="linenos" data-linenos="77 "></span></a><span class="s">kern.maxprocperuid=65535</span>
</span><span id="__span-28-78"><a id="__codelineno-28-78" name="__codelineno-28-78"></a><a href="#__codelineno-28-78"><span class="linenos" data-linenos="78 "></span></a><span class="s">kern.ps_arg_cache_limit=4096</span>
</span><span id="__span-28-79"><a id="__codelineno-28-79" name="__codelineno-28-79"></a><a href="#__codelineno-28-79"><span class="linenos" data-linenos="79 "></span></a><span class="s">kern.threads.max_threads_per_proc=4096</span>
</span><span id="__span-28-80"><a id="__codelineno-28-80" name="__codelineno-28-80"></a><a href="#__codelineno-28-80"><span class="linenos" data-linenos="80 "></span></a><span class="s">net.inet.ip.ttl=128</span>
</span><span id="__span-28-81"><a id="__codelineno-28-81" name="__codelineno-28-81"></a><a href="#__codelineno-28-81"><span class="linenos" data-linenos="81 "></span></a><span class="s">net.inet.tcp.syncookies_only=1</span>
</span><span id="__span-28-82"><a id="__codelineno-28-82" name="__codelineno-28-82"></a><a href="#__codelineno-28-82"><span class="linenos" data-linenos="82 "></span></a><span class="s">net.inet6.icmp6.nodeinfo=0</span>
</span><span id="__span-28-83"><a id="__codelineno-28-83" name="__codelineno-28-83"></a><a href="#__codelineno-28-83"><span class="linenos" data-linenos="83 "></span></a><span class="s">net.inet6.icmp6.rediraccept=0</span>
</span><span id="__span-28-84"><a id="__codelineno-28-84" name="__codelineno-28-84"></a><a href="#__codelineno-28-84"><span class="linenos" data-linenos="84 "></span></a><span class="s">security.bsd.see_jail_proc=0</span>
</span><span id="__span-28-85"><a id="__codelineno-28-85" name="__codelineno-28-85"></a><a href="#__codelineno-28-85"><span class="linenos" data-linenos="85 "></span></a><span class="s">vfs.read_max=128</span>
</span><span id="__span-28-86"><a id="__codelineno-28-86" name="__codelineno-28-86"></a><a href="#__codelineno-28-86"><span class="linenos" data-linenos="86 "></span></a><span class="s">vfs.ufs.dirhash_maxmem=67108864</span>
</span><span id="__span-28-87"><a id="__codelineno-28-87" name="__codelineno-28-87"></a><a href="#__codelineno-28-87"><span class="linenos" data-linenos="87 "></span></a>
</span><span id="__span-28-88"><a id="__codelineno-28-88" name="__codelineno-28-88"></a><a href="#__codelineno-28-88"><span class="linenos" data-linenos="88 "></span></a><span class="s">EOF</span>
</span></code></pre></div>
<h3 id="stärkere-passwort-hashes-verwenden">Stärkere Passwort-Hashes verwenden<a class="headerlink" href="#stärkere-passwort-hashes-verwenden" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Um Bruteforce-Attacken erheblich auszubremsen setzen wir für die Passworte der Systemuser eine Mindestlänge
(minpasswordlen) von 12 Zeichen in einem Mix aus Gross- und Kleinschreibung (mixpasswordcase) fest. Desweiteren lassen
wir User nach 30 Minuten Inaktivität automatisch ausloggen (idletime). Wir bearbeiten hierzu mit dem Editor <code>ee</code> (<code>ee
/etc/login.conf</code>) in der Datei <code>/etc/login.conf</code> die Login-Klasse <code>default</code>, indem wir vor der vorletzten Zeile
folgende Zeilen hinzufügen.</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1"></a><a href="#__codelineno-29-1"><span class="linenos" data-linenos="1 "></span></a>        :mixpasswordcase=true:\
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2"></a><a href="#__codelineno-29-2"><span class="linenos" data-linenos="2 "></span></a>        :minpasswordlen=12:\
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3"></a><a href="#__codelineno-29-3"><span class="linenos" data-linenos="3 "></span></a>        :idletime=30:\
</span></code></pre></div>
<p>Anschliessend muss die Datei in eine Systemdatenbank umgewandelt werden.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1"></a><a href="#__codelineno-30-1"><span class="linenos" data-linenos="1 "></span></a>cap_mkdb<span class="w"> </span>/etc/login.conf
</span></code></pre></div>
<p>Die neuen Einstellungen werden erst wirksam, wenn das Passwort eines Benutzers geändert wird. Deshalb müssen wir jetzt
die Passwörter für <code>root</code> und alle anderen bisher von uns angelegten User ändern.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1"></a><a href="#__codelineno-31-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="c1"># Password erzeugen und in /root/_passwords speichern</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2"></a><a href="#__codelineno-31-2"><span class="linenos" data-linenos=" 2 "></span></a>chmod<span class="w"> </span><span class="m">0600</span><span class="w"> </span>/root/_passwords
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3"></a><a href="#__codelineno-31-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="nv">newpw</span><span class="o">=</span><span class="s2">&quot;`openssl rand -hex 64 | openssl passwd -5 -stdin | tr -cd &#39;[[:print:]]&#39; | cut -c 2-17`&quot;</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4"></a><a href="#__codelineno-31-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Password for systemuser root: </span><span class="nv">$newpw</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/root/_passwords
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5"></a><a href="#__codelineno-31-5"><span class="linenos" data-linenos=" 5 "></span></a>chmod<span class="w"> </span><span class="m">0400</span><span class="w"> </span>/root/_passwords
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6"></a><a href="#__codelineno-31-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$newpw</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-I<span class="w"> </span>%<span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s|__PASSWORD__|%|g&#39;</span><span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>/root/_passwords
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7"></a><a href="#__codelineno-31-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Password: </span><span class="nv">$newpw</span><span class="s2">&quot;</span>
</span><span id="__span-31-8"><a id="__codelineno-31-8" name="__codelineno-31-8"></a><a href="#__codelineno-31-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="nb">unset</span><span class="w"> </span>newpw
</span><span id="__span-31-9"><a id="__codelineno-31-9" name="__codelineno-31-9"></a><a href="#__codelineno-31-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-31-10"><a id="__codelineno-31-10" name="__codelineno-31-10"></a><a href="#__codelineno-31-10"><span class="linenos" data-linenos="10 "></span></a>
</span><span id="__span-31-11"><a id="__codelineno-31-11" name="__codelineno-31-11"></a><a href="#__codelineno-31-11"><span class="linenos" data-linenos="11 "></span></a>passwd<span class="w"> </span>root
</span></code></pre></div>
<h3 id="terminals-absichern">Terminals absichern<a class="headerlink" href="#terminals-absichern" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Um zu verhindern, dass das System im Single User Mode ohne jeglichen Schutz benutzbar ist, ändern wir in der Datei
<code>/etc/ttys</code> die Zeile <code>console none...</code> wie folgt ab.</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1"></a><a href="#__codelineno-32-1"><span class="linenos" data-linenos="1 "></span></a>console none                            unknown off insecure
</span></code></pre></div>
<p>Dadurch wird die Eingabe des root-Kennworts erforderlich, um das System im Single User Mode booten zu können.
Den Rest sollten wir hingegen unverändert lassen.</p>
<p>Zusätzlich können wir veranlassen, dass die Konsole bei jedem Logout gelöscht wird, so dass nicht versehentlich
vertrauliche Informationen auf dem Bildschirm sichtbar bleiben. Dazu ändern wir in der Datei <code>/etc/gettytab</code>
den Eintrag <code>P|Pc|Pc console</code> (circa Zeile 170) wie folgt ab.</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1"></a><a href="#__codelineno-33-1"><span class="linenos" data-linenos="1 "></span></a>P|Pc|Pc console:\
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2"></a><a href="#__codelineno-33-2"><span class="linenos" data-linenos="2 "></span></a>        :ht:np:sp#115200:\
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3"></a><a href="#__codelineno-33-3"><span class="linenos" data-linenos="3 "></span></a>        :cl=\E[H\E[2J:
</span></code></pre></div>
<p>Wir passen auch unsere Login-Begrüssung (motd) an.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1"></a><a href="#__codelineno-34-1"><span class="linenos" data-linenos=" 1 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /etc/motd.template</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2"></a><a href="#__codelineno-34-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3"></a><a href="#__codelineno-34-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="s">      ______                                 ,        ,</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4"></a><a href="#__codelineno-34-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="s">     |  ____| __ ___  ___                   /(        )`</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5"></a><a href="#__codelineno-34-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="s">     | |__ | &#39;__/ _ \/ _ \                  \ \___   / |</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6"></a><a href="#__codelineno-34-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="s">     |  __|| | |  __/  __/                  /- _  `-/  &#39;</span>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7"></a><a href="#__codelineno-34-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="s">     | |   | | |    |    |                 (/\/ \ \   /\</span>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8"></a><a href="#__codelineno-34-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="s">     |_|   |_|  \___|\___|                 / /   | `    \</span>
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9"></a><a href="#__codelineno-34-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="s">      ____   _____ _____                   O O   ) /    |</span>
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10"></a><a href="#__codelineno-34-10"><span class="linenos" data-linenos="10 "></span></a><span class="s">     |  _ \ / ____|  __ \                  `-^--&#39;`&lt;     &#39;</span>
</span><span id="__span-34-11"><a id="__codelineno-34-11" name="__codelineno-34-11"></a><a href="#__codelineno-34-11"><span class="linenos" data-linenos="11 "></span></a><span class="s">     | |_) | (___ | |  | |                (_.)  _  )   /</span>
</span><span id="__span-34-12"><a id="__codelineno-34-12" name="__codelineno-34-12"></a><a href="#__codelineno-34-12"><span class="linenos" data-linenos="12 "></span></a><span class="s">     |  _ &lt; \___ \| |  | |                 `.___/`    /</span>
</span><span id="__span-34-13"><a id="__codelineno-34-13" name="__codelineno-34-13"></a><a href="#__codelineno-34-13"><span class="linenos" data-linenos="13 "></span></a><span class="s">     | |_) |____) | |__| |                   `-----&#39; /</span>
</span><span id="__span-34-14"><a id="__codelineno-34-14" name="__codelineno-34-14"></a><a href="#__codelineno-34-14"><span class="linenos" data-linenos="14 "></span></a><span class="s">     |     |      |      |      &lt;----.     __ / __   \</span>
</span><span id="__span-34-15"><a id="__codelineno-34-15" name="__codelineno-34-15"></a><a href="#__codelineno-34-15"><span class="linenos" data-linenos="15 "></span></a><span class="s">     |____/|_____/|_____/       &lt;----|====O)))==) \) /====</span>
</span><span id="__span-34-16"><a id="__codelineno-34-16" name="__codelineno-34-16"></a><a href="#__codelineno-34-16"><span class="linenos" data-linenos="16 "></span></a><span class="s">                                &lt;----&#39;    `--&#39; `.__,&#39; \</span>
</span><span id="__span-34-17"><a id="__codelineno-34-17" name="__codelineno-34-17"></a><a href="#__codelineno-34-17"><span class="linenos" data-linenos="17 "></span></a><span class="s">                                             |        |</span>
</span><span id="__span-34-18"><a id="__codelineno-34-18" name="__codelineno-34-18"></a><a href="#__codelineno-34-18"><span class="linenos" data-linenos="18 "></span></a><span class="s">     Welcome to our Server                    \       /       /\</span>
</span><span id="__span-34-19"><a id="__codelineno-34-19" name="__codelineno-34-19"></a><a href="#__codelineno-34-19"><span class="linenos" data-linenos="19 "></span></a><span class="s">                                         ______( (_  / \______/</span>
</span><span id="__span-34-20"><a id="__codelineno-34-20" name="__codelineno-34-20"></a><a href="#__codelineno-34-20"><span class="linenos" data-linenos="20 "></span></a><span class="s">                                       ,&#39;  ,-----&#39;   |</span>
</span><span id="__span-34-21"><a id="__codelineno-34-21" name="__codelineno-34-21"></a><a href="#__codelineno-34-21"><span class="linenos" data-linenos="21 "></span></a><span class="s">                                       `--{__________)</span>
</span><span id="__span-34-22"><a id="__codelineno-34-22" name="__codelineno-34-22"></a><a href="#__codelineno-34-22"><span class="linenos" data-linenos="22 "></span></a>
</span><span id="__span-34-23"><a id="__codelineno-34-23" name="__codelineno-34-23"></a><a href="#__codelineno-34-23"><span class="linenos" data-linenos="23 "></span></a><span class="s">EOF</span>
</span></code></pre></div>
<h2 id="system-konfigurieren">System konfigurieren<a class="headerlink" href="#system-konfigurieren" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Die aliases-Datenbank für FreeBSDs DMA müssen wir mittels <code>newaliases</code> anlegen, auch wenn wir später DMA gar nicht
verwenden möchten.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1"></a><a href="#__codelineno-35-1"><span class="linenos" data-linenos=" 1 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /etc/mail/aliases</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2"></a><a href="#__codelineno-35-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="s">#       @(#)aliases     5.3 (Berkeley) 5/24/90</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3"></a><a href="#__codelineno-35-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="s">#</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4"></a><a href="#__codelineno-35-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="s">#  Aliases in this file will NOT be expanded in the header from</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5"></a><a href="#__codelineno-35-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="s">#  Mail, but WILL be visible over networks.</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6"></a><a href="#__codelineno-35-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="s">#</span>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7"></a><a href="#__codelineno-35-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="s">#       &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;      The program &quot;newaliases&quot; must be run after</span>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8"></a><a href="#__codelineno-35-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="s">#       &gt;&gt; NOTE &gt;&gt;      this file is updated for any changes to</span>
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9"></a><a href="#__codelineno-35-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="s">#       &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;      show through to sendmail.</span>
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10"></a><a href="#__codelineno-35-10"><span class="linenos" data-linenos="10 "></span></a><span class="s">#</span>
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11"></a><a href="#__codelineno-35-11"><span class="linenos" data-linenos="11 "></span></a><span class="s">#</span>
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12"></a><a href="#__codelineno-35-12"><span class="linenos" data-linenos="12 "></span></a><span class="s"># See also RFC 2142, `MAILBOX NAMES FOR COMMON SERVICES, ROLES</span>
</span><span id="__span-35-13"><a id="__codelineno-35-13" name="__codelineno-35-13"></a><a href="#__codelineno-35-13"><span class="linenos" data-linenos="13 "></span></a><span class="s"># AND FUNCTIONS&#39;, May 1997</span>
</span><span id="__span-35-14"><a id="__codelineno-35-14" name="__codelineno-35-14"></a><a href="#__codelineno-35-14"><span class="linenos" data-linenos="14 "></span></a><span class="s">#       http://tools.ietf.org/html/rfc2142</span>
</span><span id="__span-35-15"><a id="__codelineno-35-15" name="__codelineno-35-15"></a><a href="#__codelineno-35-15"><span class="linenos" data-linenos="15 "></span></a>
</span><span id="__span-35-16"><a id="__codelineno-35-16" name="__codelineno-35-16"></a><a href="#__codelineno-35-16"><span class="linenos" data-linenos="16 "></span></a><span class="s"># Pretty much everything else in this file points to &quot;root&quot;, so</span>
</span><span id="__span-35-17"><a id="__codelineno-35-17" name="__codelineno-35-17"></a><a href="#__codelineno-35-17"><span class="linenos" data-linenos="17 "></span></a><span class="s"># you would do well in either reading root&#39;s mailbox or forwarding</span>
</span><span id="__span-35-18"><a id="__codelineno-35-18" name="__codelineno-35-18"></a><a href="#__codelineno-35-18"><span class="linenos" data-linenos="18 "></span></a><span class="s"># root&#39;s email from here.</span>
</span><span id="__span-35-19"><a id="__codelineno-35-19" name="__codelineno-35-19"></a><a href="#__codelineno-35-19"><span class="linenos" data-linenos="19 "></span></a>
</span><span id="__span-35-20"><a id="__codelineno-35-20" name="__codelineno-35-20"></a><a href="#__codelineno-35-20"><span class="linenos" data-linenos="20 "></span></a><span class="s">root:    admin@example.com</span>
</span><span id="__span-35-21"><a id="__codelineno-35-21" name="__codelineno-35-21"></a><a href="#__codelineno-35-21"><span class="linenos" data-linenos="21 "></span></a>
</span><span id="__span-35-22"><a id="__codelineno-35-22" name="__codelineno-35-22"></a><a href="#__codelineno-35-22"><span class="linenos" data-linenos="22 "></span></a><span class="s"># Basic system aliases -- these MUST be present</span>
</span><span id="__span-35-23"><a id="__codelineno-35-23" name="__codelineno-35-23"></a><a href="#__codelineno-35-23"><span class="linenos" data-linenos="23 "></span></a><span class="s">MAILER-DAEMON: postmaster</span>
</span><span id="__span-35-24"><a id="__codelineno-35-24" name="__codelineno-35-24"></a><a href="#__codelineno-35-24"><span class="linenos" data-linenos="24 "></span></a><span class="s">postmaster: root</span>
</span><span id="__span-35-25"><a id="__codelineno-35-25" name="__codelineno-35-25"></a><a href="#__codelineno-35-25"><span class="linenos" data-linenos="25 "></span></a>
</span><span id="__span-35-26"><a id="__codelineno-35-26" name="__codelineno-35-26"></a><a href="#__codelineno-35-26"><span class="linenos" data-linenos="26 "></span></a><span class="s"># General redirections for pseudo accounts</span>
</span><span id="__span-35-27"><a id="__codelineno-35-27" name="__codelineno-35-27"></a><a href="#__codelineno-35-27"><span class="linenos" data-linenos="27 "></span></a><span class="s">_dhcp:  root</span>
</span><span id="__span-35-28"><a id="__codelineno-35-28" name="__codelineno-35-28"></a><a href="#__codelineno-35-28"><span class="linenos" data-linenos="28 "></span></a><span class="s">_pflogd: root</span>
</span><span id="__span-35-29"><a id="__codelineno-35-29" name="__codelineno-35-29"></a><a href="#__codelineno-35-29"><span class="linenos" data-linenos="29 "></span></a><span class="s">auditdistd:     root</span>
</span><span id="__span-35-30"><a id="__codelineno-35-30" name="__codelineno-35-30"></a><a href="#__codelineno-35-30"><span class="linenos" data-linenos="30 "></span></a><span class="s">bin:    root</span>
</span><span id="__span-35-31"><a id="__codelineno-35-31" name="__codelineno-35-31"></a><a href="#__codelineno-35-31"><span class="linenos" data-linenos="31 "></span></a><span class="s">bind:   root</span>
</span><span id="__span-35-32"><a id="__codelineno-35-32" name="__codelineno-35-32"></a><a href="#__codelineno-35-32"><span class="linenos" data-linenos="32 "></span></a><span class="s">daemon: root</span>
</span><span id="__span-35-33"><a id="__codelineno-35-33" name="__codelineno-35-33"></a><a href="#__codelineno-35-33"><span class="linenos" data-linenos="33 "></span></a><span class="s">games:  root</span>
</span><span id="__span-35-34"><a id="__codelineno-35-34" name="__codelineno-35-34"></a><a href="#__codelineno-35-34"><span class="linenos" data-linenos="34 "></span></a><span class="s">hast:   root</span>
</span><span id="__span-35-35"><a id="__codelineno-35-35" name="__codelineno-35-35"></a><a href="#__codelineno-35-35"><span class="linenos" data-linenos="35 "></span></a><span class="s">kmem:   root</span>
</span><span id="__span-35-36"><a id="__codelineno-35-36" name="__codelineno-35-36"></a><a href="#__codelineno-35-36"><span class="linenos" data-linenos="36 "></span></a><span class="s">mailnull: postmaster</span>
</span><span id="__span-35-37"><a id="__codelineno-35-37" name="__codelineno-35-37"></a><a href="#__codelineno-35-37"><span class="linenos" data-linenos="37 "></span></a><span class="s">man:    root</span>
</span><span id="__span-35-38"><a id="__codelineno-35-38" name="__codelineno-35-38"></a><a href="#__codelineno-35-38"><span class="linenos" data-linenos="38 "></span></a><span class="s">news:   root</span>
</span><span id="__span-35-39"><a id="__codelineno-35-39" name="__codelineno-35-39"></a><a href="#__codelineno-35-39"><span class="linenos" data-linenos="39 "></span></a><span class="s">nobody: root</span>
</span><span id="__span-35-40"><a id="__codelineno-35-40" name="__codelineno-35-40"></a><a href="#__codelineno-35-40"><span class="linenos" data-linenos="40 "></span></a><span class="s">operator: root</span>
</span><span id="__span-35-41"><a id="__codelineno-35-41" name="__codelineno-35-41"></a><a href="#__codelineno-35-41"><span class="linenos" data-linenos="41 "></span></a><span class="s">pop:    root</span>
</span><span id="__span-35-42"><a id="__codelineno-35-42" name="__codelineno-35-42"></a><a href="#__codelineno-35-42"><span class="linenos" data-linenos="42 "></span></a><span class="s">proxy:  root</span>
</span><span id="__span-35-43"><a id="__codelineno-35-43" name="__codelineno-35-43"></a><a href="#__codelineno-35-43"><span class="linenos" data-linenos="43 "></span></a><span class="s">smmsp:  postmaster</span>
</span><span id="__span-35-44"><a id="__codelineno-35-44" name="__codelineno-35-44"></a><a href="#__codelineno-35-44"><span class="linenos" data-linenos="44 "></span></a><span class="s">sshd:   root</span>
</span><span id="__span-35-45"><a id="__codelineno-35-45" name="__codelineno-35-45"></a><a href="#__codelineno-35-45"><span class="linenos" data-linenos="45 "></span></a><span class="s">system: root</span>
</span><span id="__span-35-46"><a id="__codelineno-35-46" name="__codelineno-35-46"></a><a href="#__codelineno-35-46"><span class="linenos" data-linenos="46 "></span></a><span class="s">toor:   root</span>
</span><span id="__span-35-47"><a id="__codelineno-35-47" name="__codelineno-35-47"></a><a href="#__codelineno-35-47"><span class="linenos" data-linenos="47 "></span></a><span class="s">tty:    root</span>
</span><span id="__span-35-48"><a id="__codelineno-35-48" name="__codelineno-35-48"></a><a href="#__codelineno-35-48"><span class="linenos" data-linenos="48 "></span></a><span class="s">usenet: news</span>
</span><span id="__span-35-49"><a id="__codelineno-35-49" name="__codelineno-35-49"></a><a href="#__codelineno-35-49"><span class="linenos" data-linenos="49 "></span></a><span class="s">uucp:   root</span>
</span><span id="__span-35-50"><a id="__codelineno-35-50" name="__codelineno-35-50"></a><a href="#__codelineno-35-50"><span class="linenos" data-linenos="50 "></span></a>
</span><span id="__span-35-51"><a id="__codelineno-35-51" name="__codelineno-35-51"></a><a href="#__codelineno-35-51"><span class="linenos" data-linenos="51 "></span></a><span class="s"># Well-known aliases -- these should be filled in!</span>
</span><span id="__span-35-52"><a id="__codelineno-35-52" name="__codelineno-35-52"></a><a href="#__codelineno-35-52"><span class="linenos" data-linenos="52 "></span></a><span class="s"># manager:</span>
</span><span id="__span-35-53"><a id="__codelineno-35-53" name="__codelineno-35-53"></a><a href="#__codelineno-35-53"><span class="linenos" data-linenos="53 "></span></a><span class="s"># dumper:</span>
</span><span id="__span-35-54"><a id="__codelineno-35-54" name="__codelineno-35-54"></a><a href="#__codelineno-35-54"><span class="linenos" data-linenos="54 "></span></a>
</span><span id="__span-35-55"><a id="__codelineno-35-55" name="__codelineno-35-55"></a><a href="#__codelineno-35-55"><span class="linenos" data-linenos="55 "></span></a><span class="s"># BUSINESS-RELATED MAILBOX NAMES</span>
</span><span id="__span-35-56"><a id="__codelineno-35-56" name="__codelineno-35-56"></a><a href="#__codelineno-35-56"><span class="linenos" data-linenos="56 "></span></a><span class="s"># info:</span>
</span><span id="__span-35-57"><a id="__codelineno-35-57" name="__codelineno-35-57"></a><a href="#__codelineno-35-57"><span class="linenos" data-linenos="57 "></span></a><span class="s"># marketing:</span>
</span><span id="__span-35-58"><a id="__codelineno-35-58" name="__codelineno-35-58"></a><a href="#__codelineno-35-58"><span class="linenos" data-linenos="58 "></span></a><span class="s"># sales:</span>
</span><span id="__span-35-59"><a id="__codelineno-35-59" name="__codelineno-35-59"></a><a href="#__codelineno-35-59"><span class="linenos" data-linenos="59 "></span></a><span class="s"># support:</span>
</span><span id="__span-35-60"><a id="__codelineno-35-60" name="__codelineno-35-60"></a><a href="#__codelineno-35-60"><span class="linenos" data-linenos="60 "></span></a>
</span><span id="__span-35-61"><a id="__codelineno-35-61" name="__codelineno-35-61"></a><a href="#__codelineno-35-61"><span class="linenos" data-linenos="61 "></span></a><span class="s"># NETWORK OPERATIONS MAILBOX NAMES</span>
</span><span id="__span-35-62"><a id="__codelineno-35-62" name="__codelineno-35-62"></a><a href="#__codelineno-35-62"><span class="linenos" data-linenos="62 "></span></a><span class="s">abuse:  root</span>
</span><span id="__span-35-63"><a id="__codelineno-35-63" name="__codelineno-35-63"></a><a href="#__codelineno-35-63"><span class="linenos" data-linenos="63 "></span></a><span class="s"># noc:          root</span>
</span><span id="__span-35-64"><a id="__codelineno-35-64" name="__codelineno-35-64"></a><a href="#__codelineno-35-64"><span class="linenos" data-linenos="64 "></span></a><span class="s">security:       root</span>
</span><span id="__span-35-65"><a id="__codelineno-35-65" name="__codelineno-35-65"></a><a href="#__codelineno-35-65"><span class="linenos" data-linenos="65 "></span></a>
</span><span id="__span-35-66"><a id="__codelineno-35-66" name="__codelineno-35-66"></a><a href="#__codelineno-35-66"><span class="linenos" data-linenos="66 "></span></a><span class="s"># SUPPORT MAILBOX NAMES FOR SPECIFIC INTERNET SERVICES</span>
</span><span id="__span-35-67"><a id="__codelineno-35-67" name="__codelineno-35-67"></a><a href="#__codelineno-35-67"><span class="linenos" data-linenos="67 "></span></a><span class="s">ftp:            root</span>
</span><span id="__span-35-68"><a id="__codelineno-35-68" name="__codelineno-35-68"></a><a href="#__codelineno-35-68"><span class="linenos" data-linenos="68 "></span></a><span class="s">ftp-bugs:       ftp</span>
</span><span id="__span-35-69"><a id="__codelineno-35-69" name="__codelineno-35-69"></a><a href="#__codelineno-35-69"><span class="linenos" data-linenos="69 "></span></a><span class="s">hostmaster:     root</span>
</span><span id="__span-35-70"><a id="__codelineno-35-70" name="__codelineno-35-70"></a><a href="#__codelineno-35-70"><span class="linenos" data-linenos="70 "></span></a><span class="s">webmaster:      root</span>
</span><span id="__span-35-71"><a id="__codelineno-35-71" name="__codelineno-35-71"></a><a href="#__codelineno-35-71"><span class="linenos" data-linenos="71 "></span></a><span class="s">www:            webmaster</span>
</span><span id="__span-35-72"><a id="__codelineno-35-72" name="__codelineno-35-72"></a><a href="#__codelineno-35-72"><span class="linenos" data-linenos="72 "></span></a>
</span><span id="__span-35-73"><a id="__codelineno-35-73" name="__codelineno-35-73"></a><a href="#__codelineno-35-73"><span class="linenos" data-linenos="73 "></span></a><span class="s"># NOTE: /var/msgs and /var/msgs/bounds must be owned by sendmail&#39;s</span>
</span><span id="__span-35-74"><a id="__codelineno-35-74" name="__codelineno-35-74"></a><a href="#__codelineno-35-74"><span class="linenos" data-linenos="74 "></span></a><span class="s">#       DefaultUser (defaults to mailnull) for the msgs alias to work.</span>
</span><span id="__span-35-75"><a id="__codelineno-35-75" name="__codelineno-35-75"></a><a href="#__codelineno-35-75"><span class="linenos" data-linenos="75 "></span></a><span class="s">#</span>
</span><span id="__span-35-76"><a id="__codelineno-35-76" name="__codelineno-35-76"></a><a href="#__codelineno-35-76"><span class="linenos" data-linenos="76 "></span></a><span class="s"># msgs: &quot;| /usr/bin/msgs -s&quot;</span>
</span><span id="__span-35-77"><a id="__codelineno-35-77" name="__codelineno-35-77"></a><a href="#__codelineno-35-77"><span class="linenos" data-linenos="77 "></span></a>
</span><span id="__span-35-78"><a id="__codelineno-35-78" name="__codelineno-35-78"></a><a href="#__codelineno-35-78"><span class="linenos" data-linenos="78 "></span></a><span class="s"># bit-bucket: /dev/null</span>
</span><span id="__span-35-79"><a id="__codelineno-35-79" name="__codelineno-35-79"></a><a href="#__codelineno-35-79"><span class="linenos" data-linenos="79 "></span></a><span class="s"># dev-null: bit-bucket</span>
</span><span id="__span-35-80"><a id="__codelineno-35-80" name="__codelineno-35-80"></a><a href="#__codelineno-35-80"><span class="linenos" data-linenos="80 "></span></a><span class="s">vmail: root</span>
</span><span id="__span-35-81"><a id="__codelineno-35-81" name="__codelineno-35-81"></a><a href="#__codelineno-35-81"><span class="linenos" data-linenos="81 "></span></a><span class="s">clamav: root</span>
</span><span id="__span-35-82"><a id="__codelineno-35-82" name="__codelineno-35-82"></a><a href="#__codelineno-35-82"><span class="linenos" data-linenos="82 "></span></a><span class="s">vscan: root</span>
</span><span id="__span-35-83"><a id="__codelineno-35-83" name="__codelineno-35-83"></a><a href="#__codelineno-35-83"><span class="linenos" data-linenos="83 "></span></a>
</span><span id="__span-35-84"><a id="__codelineno-35-84" name="__codelineno-35-84"></a><a href="#__codelineno-35-84"><span class="linenos" data-linenos="84 "></span></a><span class="s">EOF</span>
</span><span id="__span-35-85"><a id="__codelineno-35-85" name="__codelineno-35-85"></a><a href="#__codelineno-35-85"><span class="linenos" data-linenos="85 "></span></a>
</span><span id="__span-35-86"><a id="__codelineno-35-86" name="__codelineno-35-86"></a><a href="#__codelineno-35-86"><span class="linenos" data-linenos="86 "></span></a>newaliases
</span></code></pre></div>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1"></a><a href="#__codelineno-36-1"><span class="linenos" data-linenos=" 1 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /etc/nscd.conf</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2"></a><a href="#__codelineno-36-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="s">#</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3"></a><a href="#__codelineno-36-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="s"># Default caching daemon configuration file</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4"></a><a href="#__codelineno-36-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="s">#</span>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5"></a><a href="#__codelineno-36-5"><span class="linenos" data-linenos=" 5 "></span></a>
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6"></a><a href="#__codelineno-36-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="s">enable-cache passwd yes</span>
</span><span id="__span-36-7"><a id="__codelineno-36-7" name="__codelineno-36-7"></a><a href="#__codelineno-36-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="s">enable-cache group yes</span>
</span><span id="__span-36-8"><a id="__codelineno-36-8" name="__codelineno-36-8"></a><a href="#__codelineno-36-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="s">enable-cache hosts yes</span>
</span><span id="__span-36-9"><a id="__codelineno-36-9" name="__codelineno-36-9"></a><a href="#__codelineno-36-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="s">enable-cache services yes</span>
</span><span id="__span-36-10"><a id="__codelineno-36-10" name="__codelineno-36-10"></a><a href="#__codelineno-36-10"><span class="linenos" data-linenos="10 "></span></a><span class="s">enable-cache protocols yes</span>
</span><span id="__span-36-11"><a id="__codelineno-36-11" name="__codelineno-36-11"></a><a href="#__codelineno-36-11"><span class="linenos" data-linenos="11 "></span></a><span class="s">enable-cache rpc yes</span>
</span><span id="__span-36-12"><a id="__codelineno-36-12" name="__codelineno-36-12"></a><a href="#__codelineno-36-12"><span class="linenos" data-linenos="12 "></span></a><span class="s">enable-cache networks yes</span>
</span><span id="__span-36-13"><a id="__codelineno-36-13" name="__codelineno-36-13"></a><a href="#__codelineno-36-13"><span class="linenos" data-linenos="13 "></span></a><span class="s">keep-hot-count hosts 16384</span>
</span><span id="__span-36-14"><a id="__codelineno-36-14" name="__codelineno-36-14"></a><a href="#__codelineno-36-14"><span class="linenos" data-linenos="14 "></span></a>
</span><span id="__span-36-15"><a id="__codelineno-36-15" name="__codelineno-36-15"></a><a href="#__codelineno-36-15"><span class="linenos" data-linenos="15 "></span></a><span class="s">EOF</span>
</span></code></pre></div>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1"></a><a href="#__codelineno-37-1"><span class="linenos" data-linenos=" 1 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /etc/nsswitch.conf</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2"></a><a href="#__codelineno-37-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="s">#</span>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3"></a><a href="#__codelineno-37-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="s"># nsswitch.conf(5) - name service switch configuration file</span>
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4"></a><a href="#__codelineno-37-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="s">#</span>
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5"></a><a href="#__codelineno-37-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="s">group: files</span>
</span><span id="__span-37-6"><a id="__codelineno-37-6" name="__codelineno-37-6"></a><a href="#__codelineno-37-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="s"># group_compat: nis</span>
</span><span id="__span-37-7"><a id="__codelineno-37-7" name="__codelineno-37-7"></a><a href="#__codelineno-37-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="s">hosts: files dns</span>
</span><span id="__span-37-8"><a id="__codelineno-37-8" name="__codelineno-37-8"></a><a href="#__codelineno-37-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="s">netgroup: files</span>
</span><span id="__span-37-9"><a id="__codelineno-37-9" name="__codelineno-37-9"></a><a href="#__codelineno-37-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="s">networks: files</span>
</span><span id="__span-37-10"><a id="__codelineno-37-10" name="__codelineno-37-10"></a><a href="#__codelineno-37-10"><span class="linenos" data-linenos="10 "></span></a><span class="s">passwd: files</span>
</span><span id="__span-37-11"><a id="__codelineno-37-11" name="__codelineno-37-11"></a><a href="#__codelineno-37-11"><span class="linenos" data-linenos="11 "></span></a><span class="s"># passwd_compat: nis</span>
</span><span id="__span-37-12"><a id="__codelineno-37-12" name="__codelineno-37-12"></a><a href="#__codelineno-37-12"><span class="linenos" data-linenos="12 "></span></a><span class="s">shells: files</span>
</span><span id="__span-37-13"><a id="__codelineno-37-13" name="__codelineno-37-13"></a><a href="#__codelineno-37-13"><span class="linenos" data-linenos="13 "></span></a><span class="s">services: files</span>
</span><span id="__span-37-14"><a id="__codelineno-37-14" name="__codelineno-37-14"></a><a href="#__codelineno-37-14"><span class="linenos" data-linenos="14 "></span></a><span class="s"># services_compat: nis</span>
</span><span id="__span-37-15"><a id="__codelineno-37-15" name="__codelineno-37-15"></a><a href="#__codelineno-37-15"><span class="linenos" data-linenos="15 "></span></a><span class="s">protocols: files</span>
</span><span id="__span-37-16"><a id="__codelineno-37-16" name="__codelineno-37-16"></a><a href="#__codelineno-37-16"><span class="linenos" data-linenos="16 "></span></a><span class="s">rpc: files</span>
</span><span id="__span-37-17"><a id="__codelineno-37-17" name="__codelineno-37-17"></a><a href="#__codelineno-37-17"><span class="linenos" data-linenos="17 "></span></a>
</span><span id="__span-37-18"><a id="__codelineno-37-18" name="__codelineno-37-18"></a><a href="#__codelineno-37-18"><span class="linenos" data-linenos="18 "></span></a><span class="s">EOF</span>
</span></code></pre></div>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1"></a><a href="#__codelineno-38-1"><span class="linenos" data-linenos="  1 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /etc/ntp.conf</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2"></a><a href="#__codelineno-38-2"><span class="linenos" data-linenos="  2 "></span></a><span class="s">#</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3"></a><a href="#__codelineno-38-3"><span class="linenos" data-linenos="  3 "></span></a><span class="s">#</span>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4"></a><a href="#__codelineno-38-4"><span class="linenos" data-linenos="  4 "></span></a><span class="s"># Default NTP servers for the FreeBSD operating system.</span>
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5"></a><a href="#__codelineno-38-5"><span class="linenos" data-linenos="  5 "></span></a><span class="s">#</span>
</span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6"></a><a href="#__codelineno-38-6"><span class="linenos" data-linenos="  6 "></span></a><span class="s"># Don&#39;t forget to enable ntpd in /etc/rc.conf with:</span>
</span><span id="__span-38-7"><a id="__codelineno-38-7" name="__codelineno-38-7"></a><a href="#__codelineno-38-7"><span class="linenos" data-linenos="  7 "></span></a><span class="s"># ntpd_enable=&quot;YES&quot;</span>
</span><span id="__span-38-8"><a id="__codelineno-38-8" name="__codelineno-38-8"></a><a href="#__codelineno-38-8"><span class="linenos" data-linenos="  8 "></span></a><span class="s">#</span>
</span><span id="__span-38-9"><a id="__codelineno-38-9" name="__codelineno-38-9"></a><a href="#__codelineno-38-9"><span class="linenos" data-linenos="  9 "></span></a><span class="s"># The driftfile is by default /var/db/ntpd.drift, check</span>
</span><span id="__span-38-10"><a id="__codelineno-38-10" name="__codelineno-38-10"></a><a href="#__codelineno-38-10"><span class="linenos" data-linenos=" 10 "></span></a><span class="s"># /etc/defaults/rc.conf on how to change the location.</span>
</span><span id="__span-38-11"><a id="__codelineno-38-11" name="__codelineno-38-11"></a><a href="#__codelineno-38-11"><span class="linenos" data-linenos=" 11 "></span></a><span class="s">#</span>
</span><span id="__span-38-12"><a id="__codelineno-38-12" name="__codelineno-38-12"></a><a href="#__codelineno-38-12"><span class="linenos" data-linenos=" 12 "></span></a>
</span><span id="__span-38-13"><a id="__codelineno-38-13" name="__codelineno-38-13"></a><a href="#__codelineno-38-13"><span class="linenos" data-linenos=" 13 "></span></a><span class="s">#</span>
</span><span id="__span-38-14"><a id="__codelineno-38-14" name="__codelineno-38-14"></a><a href="#__codelineno-38-14"><span class="linenos" data-linenos=" 14 "></span></a><span class="s"># Set the target and limit for adding servers configured via pool statements</span>
</span><span id="__span-38-15"><a id="__codelineno-38-15" name="__codelineno-38-15"></a><a href="#__codelineno-38-15"><span class="linenos" data-linenos=" 15 "></span></a><span class="s"># or discovered dynamically via mechanisms such as broadcast and manycast.</span>
</span><span id="__span-38-16"><a id="__codelineno-38-16" name="__codelineno-38-16"></a><a href="#__codelineno-38-16"><span class="linenos" data-linenos=" 16 "></span></a><span class="s"># Ntpd automatically adds maxclock-1 servers from configured pools, and may</span>
</span><span id="__span-38-17"><a id="__codelineno-38-17" name="__codelineno-38-17"></a><a href="#__codelineno-38-17"><span class="linenos" data-linenos=" 17 "></span></a><span class="s"># add as many as maxclock*2 if necessary to ensure that at least minclock</span>
</span><span id="__span-38-18"><a id="__codelineno-38-18" name="__codelineno-38-18"></a><a href="#__codelineno-38-18"><span class="linenos" data-linenos=" 18 "></span></a><span class="s"># servers are providing good consistent time.</span>
</span><span id="__span-38-19"><a id="__codelineno-38-19" name="__codelineno-38-19"></a><a href="#__codelineno-38-19"><span class="linenos" data-linenos=" 19 "></span></a><span class="s">#</span>
</span><span id="__span-38-20"><a id="__codelineno-38-20" name="__codelineno-38-20"></a><a href="#__codelineno-38-20"><span class="linenos" data-linenos=" 20 "></span></a><span class="s">tos minclock 3 maxclock 6</span>
</span><span id="__span-38-21"><a id="__codelineno-38-21" name="__codelineno-38-21"></a><a href="#__codelineno-38-21"><span class="linenos" data-linenos=" 21 "></span></a>
</span><span id="__span-38-22"><a id="__codelineno-38-22" name="__codelineno-38-22"></a><a href="#__codelineno-38-22"><span class="linenos" data-linenos=" 22 "></span></a><span class="s">#</span>
</span><span id="__span-38-23"><a id="__codelineno-38-23" name="__codelineno-38-23"></a><a href="#__codelineno-38-23"><span class="linenos" data-linenos=" 23 "></span></a><span class="s"># The following pool statements will give you a random set of IPv4 and IPv6</span>
</span><span id="__span-38-24"><a id="__codelineno-38-24" name="__codelineno-38-24"></a><a href="#__codelineno-38-24"><span class="linenos" data-linenos=" 24 "></span></a><span class="s"># NTP servers geographically close to you.  A single pool statement adds</span>
</span><span id="__span-38-25"><a id="__codelineno-38-25" name="__codelineno-38-25"></a><a href="#__codelineno-38-25"><span class="linenos" data-linenos=" 25 "></span></a><span class="s"># multiple servers from the pool, according to the tos minclock/maxclock</span>
</span><span id="__span-38-26"><a id="__codelineno-38-26" name="__codelineno-38-26"></a><a href="#__codelineno-38-26"><span class="linenos" data-linenos=" 26 "></span></a><span class="s"># targets.</span>
</span><span id="__span-38-27"><a id="__codelineno-38-27" name="__codelineno-38-27"></a><a href="#__codelineno-38-27"><span class="linenos" data-linenos=" 27 "></span></a><span class="s"># See http://www.pool.ntp.org/ for details.  Note, pool.ntp.org encourages</span>
</span><span id="__span-38-28"><a id="__codelineno-38-28" name="__codelineno-38-28"></a><a href="#__codelineno-38-28"><span class="linenos" data-linenos=" 28 "></span></a><span class="s"># users with a static IP and good upstream NTP servers to add a server</span>
</span><span id="__span-38-29"><a id="__codelineno-38-29" name="__codelineno-38-29"></a><a href="#__codelineno-38-29"><span class="linenos" data-linenos=" 29 "></span></a><span class="s"># to the pool.  See http://www.pool.ntp.org/join.html if you are interested.</span>
</span><span id="__span-38-30"><a id="__codelineno-38-30" name="__codelineno-38-30"></a><a href="#__codelineno-38-30"><span class="linenos" data-linenos=" 30 "></span></a><span class="s">#</span>
</span><span id="__span-38-31"><a id="__codelineno-38-31" name="__codelineno-38-31"></a><a href="#__codelineno-38-31"><span class="linenos" data-linenos=" 31 "></span></a><span class="s"># The option `iburst&#39; is used for faster initial synchronization.</span>
</span><span id="__span-38-32"><a id="__codelineno-38-32" name="__codelineno-38-32"></a><a href="#__codelineno-38-32"><span class="linenos" data-linenos=" 32 "></span></a><span class="s">#</span>
</span><span id="__span-38-33"><a id="__codelineno-38-33" name="__codelineno-38-33"></a><a href="#__codelineno-38-33"><span class="linenos" data-linenos=" 33 "></span></a><span class="s">pool 2.freebsd.pool.ntp.org iburst</span>
</span><span id="__span-38-34"><a id="__codelineno-38-34" name="__codelineno-38-34"></a><a href="#__codelineno-38-34"><span class="linenos" data-linenos=" 34 "></span></a>
</span><span id="__span-38-35"><a id="__codelineno-38-35" name="__codelineno-38-35"></a><a href="#__codelineno-38-35"><span class="linenos" data-linenos=" 35 "></span></a><span class="s">#</span>
</span><span id="__span-38-36"><a id="__codelineno-38-36" name="__codelineno-38-36"></a><a href="#__codelineno-38-36"><span class="linenos" data-linenos=" 36 "></span></a><span class="s"># If you want to pick yourself which country&#39;s public NTP server</span>
</span><span id="__span-38-37"><a id="__codelineno-38-37" name="__codelineno-38-37"></a><a href="#__codelineno-38-37"><span class="linenos" data-linenos=" 37 "></span></a><span class="s"># you want to sync against, comment out the above pool statements,</span>
</span><span id="__span-38-38"><a id="__codelineno-38-38" name="__codelineno-38-38"></a><a href="#__codelineno-38-38"><span class="linenos" data-linenos=" 38 "></span></a><span class="s"># uncomment the next ones, and replace CC with the country&#39;s abbreviation.</span>
</span><span id="__span-38-39"><a id="__codelineno-38-39" name="__codelineno-38-39"></a><a href="#__codelineno-38-39"><span class="linenos" data-linenos=" 39 "></span></a><span class="s"># Make sure that the hostnames resolves to a proper IP address!</span>
</span><span id="__span-38-40"><a id="__codelineno-38-40" name="__codelineno-38-40"></a><a href="#__codelineno-38-40"><span class="linenos" data-linenos=" 40 "></span></a><span class="s">#</span>
</span><span id="__span-38-41"><a id="__codelineno-38-41" name="__codelineno-38-41"></a><a href="#__codelineno-38-41"><span class="linenos" data-linenos=" 41 "></span></a><span class="s">pool 0.de.pool.ntp.org iburst</span>
</span><span id="__span-38-42"><a id="__codelineno-38-42" name="__codelineno-38-42"></a><a href="#__codelineno-38-42"><span class="linenos" data-linenos=" 42 "></span></a>
</span><span id="__span-38-43"><a id="__codelineno-38-43" name="__codelineno-38-43"></a><a href="#__codelineno-38-43"><span class="linenos" data-linenos=" 43 "></span></a><span class="s">#</span>
</span><span id="__span-38-44"><a id="__codelineno-38-44" name="__codelineno-38-44"></a><a href="#__codelineno-38-44"><span class="linenos" data-linenos=" 44 "></span></a><span class="s"># To configure a specific server, such as an organization-wide local</span>
</span><span id="__span-38-45"><a id="__codelineno-38-45" name="__codelineno-38-45"></a><a href="#__codelineno-38-45"><span class="linenos" data-linenos=" 45 "></span></a><span class="s"># server, add lines similar to the following.  One or more specific</span>
</span><span id="__span-38-46"><a id="__codelineno-38-46" name="__codelineno-38-46"></a><a href="#__codelineno-38-46"><span class="linenos" data-linenos=" 46 "></span></a><span class="s"># servers can be configured in addition to, or instead of, any server</span>
</span><span id="__span-38-47"><a id="__codelineno-38-47" name="__codelineno-38-47"></a><a href="#__codelineno-38-47"><span class="linenos" data-linenos=" 47 "></span></a><span class="s"># pools specified above.  When both are configured, ntpd first adds all</span>
</span><span id="__span-38-48"><a id="__codelineno-38-48" name="__codelineno-38-48"></a><a href="#__codelineno-38-48"><span class="linenos" data-linenos=" 48 "></span></a><span class="s"># the specific servers, then adds servers from the pool until the tos</span>
</span><span id="__span-38-49"><a id="__codelineno-38-49" name="__codelineno-38-49"></a><a href="#__codelineno-38-49"><span class="linenos" data-linenos=" 49 "></span></a><span class="s"># minclock/maxclock targets are met.</span>
</span><span id="__span-38-50"><a id="__codelineno-38-50" name="__codelineno-38-50"></a><a href="#__codelineno-38-50"><span class="linenos" data-linenos=" 50 "></span></a><span class="s">#</span>
</span><span id="__span-38-51"><a id="__codelineno-38-51" name="__codelineno-38-51"></a><a href="#__codelineno-38-51"><span class="linenos" data-linenos=" 51 "></span></a><span class="s">server ptbtime3.ptb.de iburst</span>
</span><span id="__span-38-52"><a id="__codelineno-38-52" name="__codelineno-38-52"></a><a href="#__codelineno-38-52"><span class="linenos" data-linenos=" 52 "></span></a><span class="s">server ptbtime2.ptb.de iburst</span>
</span><span id="__span-38-53"><a id="__codelineno-38-53" name="__codelineno-38-53"></a><a href="#__codelineno-38-53"><span class="linenos" data-linenos=" 53 "></span></a><span class="s">server ptbtime1.ptb.de iburst</span>
</span><span id="__span-38-54"><a id="__codelineno-38-54" name="__codelineno-38-54"></a><a href="#__codelineno-38-54"><span class="linenos" data-linenos=" 54 "></span></a>
</span><span id="__span-38-55"><a id="__codelineno-38-55" name="__codelineno-38-55"></a><a href="#__codelineno-38-55"><span class="linenos" data-linenos=" 55 "></span></a>
</span><span id="__span-38-56"><a id="__codelineno-38-56" name="__codelineno-38-56"></a><a href="#__codelineno-38-56"><span class="linenos" data-linenos=" 56 "></span></a><span class="s">#</span>
</span><span id="__span-38-57"><a id="__codelineno-38-57" name="__codelineno-38-57"></a><a href="#__codelineno-38-57"><span class="linenos" data-linenos=" 57 "></span></a><span class="s"># Security:</span>
</span><span id="__span-38-58"><a id="__codelineno-38-58" name="__codelineno-38-58"></a><a href="#__codelineno-38-58"><span class="linenos" data-linenos=" 58 "></span></a><span class="s">#</span>
</span><span id="__span-38-59"><a id="__codelineno-38-59" name="__codelineno-38-59"></a><a href="#__codelineno-38-59"><span class="linenos" data-linenos=" 59 "></span></a><span class="s"># By default, only allow time queries and block all other requests</span>
</span><span id="__span-38-60"><a id="__codelineno-38-60" name="__codelineno-38-60"></a><a href="#__codelineno-38-60"><span class="linenos" data-linenos=" 60 "></span></a><span class="s"># from unauthenticated clients.</span>
</span><span id="__span-38-61"><a id="__codelineno-38-61" name="__codelineno-38-61"></a><a href="#__codelineno-38-61"><span class="linenos" data-linenos=" 61 "></span></a><span class="s">#</span>
</span><span id="__span-38-62"><a id="__codelineno-38-62" name="__codelineno-38-62"></a><a href="#__codelineno-38-62"><span class="linenos" data-linenos=" 62 "></span></a><span class="s"># The &quot;restrict source&quot; line allows peers to be mobilized when added by</span>
</span><span id="__span-38-63"><a id="__codelineno-38-63" name="__codelineno-38-63"></a><a href="#__codelineno-38-63"><span class="linenos" data-linenos=" 63 "></span></a><span class="s"># ntpd from a pool, but does not enable mobilizing a new peer association</span>
</span><span id="__span-38-64"><a id="__codelineno-38-64" name="__codelineno-38-64"></a><a href="#__codelineno-38-64"><span class="linenos" data-linenos=" 64 "></span></a><span class="s"># by other dynamic means (broadcast, manycast, ntpq commands, etc).</span>
</span><span id="__span-38-65"><a id="__codelineno-38-65" name="__codelineno-38-65"></a><a href="#__codelineno-38-65"><span class="linenos" data-linenos=" 65 "></span></a><span class="s">#</span>
</span><span id="__span-38-66"><a id="__codelineno-38-66" name="__codelineno-38-66"></a><a href="#__codelineno-38-66"><span class="linenos" data-linenos=" 66 "></span></a><span class="s"># See http://support.ntp.org/bin/view/Support/AccessRestrictions</span>
</span><span id="__span-38-67"><a id="__codelineno-38-67" name="__codelineno-38-67"></a><a href="#__codelineno-38-67"><span class="linenos" data-linenos=" 67 "></span></a><span class="s"># for more information.</span>
</span><span id="__span-38-68"><a id="__codelineno-38-68" name="__codelineno-38-68"></a><a href="#__codelineno-38-68"><span class="linenos" data-linenos=" 68 "></span></a><span class="s">#</span>
</span><span id="__span-38-69"><a id="__codelineno-38-69" name="__codelineno-38-69"></a><a href="#__codelineno-38-69"><span class="linenos" data-linenos=" 69 "></span></a><span class="s">restrict default limited kod nomodify notrap noquery nopeer</span>
</span><span id="__span-38-70"><a id="__codelineno-38-70" name="__codelineno-38-70"></a><a href="#__codelineno-38-70"><span class="linenos" data-linenos=" 70 "></span></a><span class="s">restrict source  limited kod nomodify notrap noquery</span>
</span><span id="__span-38-71"><a id="__codelineno-38-71" name="__codelineno-38-71"></a><a href="#__codelineno-38-71"><span class="linenos" data-linenos=" 71 "></span></a>
</span><span id="__span-38-72"><a id="__codelineno-38-72" name="__codelineno-38-72"></a><a href="#__codelineno-38-72"><span class="linenos" data-linenos=" 72 "></span></a><span class="s">#</span>
</span><span id="__span-38-73"><a id="__codelineno-38-73" name="__codelineno-38-73"></a><a href="#__codelineno-38-73"><span class="linenos" data-linenos=" 73 "></span></a><span class="s"># Alternatively, the following rules would block all unauthorized access.</span>
</span><span id="__span-38-74"><a id="__codelineno-38-74" name="__codelineno-38-74"></a><a href="#__codelineno-38-74"><span class="linenos" data-linenos=" 74 "></span></a><span class="s">#</span>
</span><span id="__span-38-75"><a id="__codelineno-38-75" name="__codelineno-38-75"></a><a href="#__codelineno-38-75"><span class="linenos" data-linenos=" 75 "></span></a><span class="s">#restrict default ignore</span>
</span><span id="__span-38-76"><a id="__codelineno-38-76" name="__codelineno-38-76"></a><a href="#__codelineno-38-76"><span class="linenos" data-linenos=" 76 "></span></a><span class="s">#</span>
</span><span id="__span-38-77"><a id="__codelineno-38-77" name="__codelineno-38-77"></a><a href="#__codelineno-38-77"><span class="linenos" data-linenos=" 77 "></span></a><span class="s"># In this case, all remote NTP time servers also need to be explicitly</span>
</span><span id="__span-38-78"><a id="__codelineno-38-78" name="__codelineno-38-78"></a><a href="#__codelineno-38-78"><span class="linenos" data-linenos=" 78 "></span></a><span class="s"># allowed or they would not be able to exchange time information with</span>
</span><span id="__span-38-79"><a id="__codelineno-38-79" name="__codelineno-38-79"></a><a href="#__codelineno-38-79"><span class="linenos" data-linenos=" 79 "></span></a><span class="s"># this server.</span>
</span><span id="__span-38-80"><a id="__codelineno-38-80" name="__codelineno-38-80"></a><a href="#__codelineno-38-80"><span class="linenos" data-linenos=" 80 "></span></a><span class="s">#</span>
</span><span id="__span-38-81"><a id="__codelineno-38-81" name="__codelineno-38-81"></a><a href="#__codelineno-38-81"><span class="linenos" data-linenos=" 81 "></span></a><span class="s"># Please note that this example doesn&#39;t work for the servers in</span>
</span><span id="__span-38-82"><a id="__codelineno-38-82" name="__codelineno-38-82"></a><a href="#__codelineno-38-82"><span class="linenos" data-linenos=" 82 "></span></a><span class="s"># the pool.ntp.org domain since they return multiple A records.</span>
</span><span id="__span-38-83"><a id="__codelineno-38-83" name="__codelineno-38-83"></a><a href="#__codelineno-38-83"><span class="linenos" data-linenos=" 83 "></span></a><span class="s">#</span>
</span><span id="__span-38-84"><a id="__codelineno-38-84" name="__codelineno-38-84"></a><a href="#__codelineno-38-84"><span class="linenos" data-linenos=" 84 "></span></a><span class="s">#restrict 0.pool.ntp.org nomodify nopeer noquery notrap</span>
</span><span id="__span-38-85"><a id="__codelineno-38-85" name="__codelineno-38-85"></a><a href="#__codelineno-38-85"><span class="linenos" data-linenos=" 85 "></span></a><span class="s">#restrict 1.pool.ntp.org nomodify nopeer noquery notrap</span>
</span><span id="__span-38-86"><a id="__codelineno-38-86" name="__codelineno-38-86"></a><a href="#__codelineno-38-86"><span class="linenos" data-linenos=" 86 "></span></a><span class="s">#restrict 2.pool.ntp.org nomodify nopeer noquery notrap</span>
</span><span id="__span-38-87"><a id="__codelineno-38-87" name="__codelineno-38-87"></a><a href="#__codelineno-38-87"><span class="linenos" data-linenos=" 87 "></span></a><span class="s">#</span>
</span><span id="__span-38-88"><a id="__codelineno-38-88" name="__codelineno-38-88"></a><a href="#__codelineno-38-88"><span class="linenos" data-linenos=" 88 "></span></a><span class="s"># The following settings allow unrestricted access from the localhost</span>
</span><span id="__span-38-89"><a id="__codelineno-38-89" name="__codelineno-38-89"></a><a href="#__codelineno-38-89"><span class="linenos" data-linenos=" 89 "></span></a><span class="s">#</span>
</span><span id="__span-38-90"><a id="__codelineno-38-90" name="__codelineno-38-90"></a><a href="#__codelineno-38-90"><span class="linenos" data-linenos=" 90 "></span></a><span class="s">restrict 127.0.0.1</span>
</span><span id="__span-38-91"><a id="__codelineno-38-91" name="__codelineno-38-91"></a><a href="#__codelineno-38-91"><span class="linenos" data-linenos=" 91 "></span></a><span class="s">restrict ::1</span>
</span><span id="__span-38-92"><a id="__codelineno-38-92" name="__codelineno-38-92"></a><a href="#__codelineno-38-92"><span class="linenos" data-linenos=" 92 "></span></a>
</span><span id="__span-38-93"><a id="__codelineno-38-93" name="__codelineno-38-93"></a><a href="#__codelineno-38-93"><span class="linenos" data-linenos=" 93 "></span></a><span class="s">#</span>
</span><span id="__span-38-94"><a id="__codelineno-38-94" name="__codelineno-38-94"></a><a href="#__codelineno-38-94"><span class="linenos" data-linenos=" 94 "></span></a><span class="s"># If a server loses sync with all upstream servers, NTP clients</span>
</span><span id="__span-38-95"><a id="__codelineno-38-95" name="__codelineno-38-95"></a><a href="#__codelineno-38-95"><span class="linenos" data-linenos=" 95 "></span></a><span class="s"># no longer follow that server. The local clock can be configured</span>
</span><span id="__span-38-96"><a id="__codelineno-38-96" name="__codelineno-38-96"></a><a href="#__codelineno-38-96"><span class="linenos" data-linenos=" 96 "></span></a><span class="s"># to provide a time source when this happens, but it should usually</span>
</span><span id="__span-38-97"><a id="__codelineno-38-97" name="__codelineno-38-97"></a><a href="#__codelineno-38-97"><span class="linenos" data-linenos=" 97 "></span></a><span class="s"># be configured on just one server on a network. For more details see</span>
</span><span id="__span-38-98"><a id="__codelineno-38-98" name="__codelineno-38-98"></a><a href="#__codelineno-38-98"><span class="linenos" data-linenos=" 98 "></span></a><span class="s"># http://support.ntp.org/bin/view/Support/UndisciplinedLocalClock</span>
</span><span id="__span-38-99"><a id="__codelineno-38-99" name="__codelineno-38-99"></a><a href="#__codelineno-38-99"><span class="linenos" data-linenos=" 99 "></span></a><span class="s"># The use of Orphan Mode may be preferable.</span>
</span><span id="__span-38-100"><a id="__codelineno-38-100" name="__codelineno-38-100"></a><a href="#__codelineno-38-100"><span class="linenos" data-linenos="100 "></span></a><span class="s">#</span>
</span><span id="__span-38-101"><a id="__codelineno-38-101" name="__codelineno-38-101"></a><a href="#__codelineno-38-101"><span class="linenos" data-linenos="101 "></span></a><span class="s">#server 127.127.1.0</span>
</span><span id="__span-38-102"><a id="__codelineno-38-102" name="__codelineno-38-102"></a><a href="#__codelineno-38-102"><span class="linenos" data-linenos="102 "></span></a><span class="s">#fudge 127.127.1.0 stratum 10</span>
</span><span id="__span-38-103"><a id="__codelineno-38-103" name="__codelineno-38-103"></a><a href="#__codelineno-38-103"><span class="linenos" data-linenos="103 "></span></a>
</span><span id="__span-38-104"><a id="__codelineno-38-104" name="__codelineno-38-104"></a><a href="#__codelineno-38-104"><span class="linenos" data-linenos="104 "></span></a><span class="s"># See http://support.ntp.org/bin/view/Support/ConfiguringNTP#Section_6.14.</span>
</span><span id="__span-38-105"><a id="__codelineno-38-105" name="__codelineno-38-105"></a><a href="#__codelineno-38-105"><span class="linenos" data-linenos="105 "></span></a><span class="s"># for documentation regarding leapfile. Updates to the file can be obtained</span>
</span><span id="__span-38-106"><a id="__codelineno-38-106" name="__codelineno-38-106"></a><a href="#__codelineno-38-106"><span class="linenos" data-linenos="106 "></span></a><span class="s"># from ftp://time.nist.gov/pub/ or ftp://tycho.usno.navy.mil/pub/ntp/.</span>
</span><span id="__span-38-107"><a id="__codelineno-38-107" name="__codelineno-38-107"></a><a href="#__codelineno-38-107"><span class="linenos" data-linenos="107 "></span></a><span class="s"># Use either leapfile in /etc/ntp or periodically updated leapfile in /var/db.</span>
</span><span id="__span-38-108"><a id="__codelineno-38-108" name="__codelineno-38-108"></a><a href="#__codelineno-38-108"><span class="linenos" data-linenos="108 "></span></a><span class="s">#</span>
</span><span id="__span-38-109"><a id="__codelineno-38-109" name="__codelineno-38-109"></a><a href="#__codelineno-38-109"><span class="linenos" data-linenos="109 "></span></a><span class="s">leapfile &quot;/var/db/ntpd.leap-seconds.list&quot;</span>
</span><span id="__span-38-110"><a id="__codelineno-38-110" name="__codelineno-38-110"></a><a href="#__codelineno-38-110"><span class="linenos" data-linenos="110 "></span></a>
</span><span id="__span-38-111"><a id="__codelineno-38-111" name="__codelineno-38-111"></a><a href="#__codelineno-38-111"><span class="linenos" data-linenos="111 "></span></a><span class="s"># Specify the number of megabytes of memory that should be allocated and</span>
</span><span id="__span-38-112"><a id="__codelineno-38-112" name="__codelineno-38-112"></a><a href="#__codelineno-38-112"><span class="linenos" data-linenos="112 "></span></a><span class="s"># locked. -1 (default) means &quot;do not lock the process into memory&quot;.</span>
</span><span id="__span-38-113"><a id="__codelineno-38-113" name="__codelineno-38-113"></a><a href="#__codelineno-38-113"><span class="linenos" data-linenos="113 "></span></a><span class="s"># 0 means &quot;lock whatever memory the process wants into memory&quot;. Any other</span>
</span><span id="__span-38-114"><a id="__codelineno-38-114" name="__codelineno-38-114"></a><a href="#__codelineno-38-114"><span class="linenos" data-linenos="114 "></span></a><span class="s"># number means to lock up to that number of megabytes into memory.</span>
</span><span id="__span-38-115"><a id="__codelineno-38-115" name="__codelineno-38-115"></a><a href="#__codelineno-38-115"><span class="linenos" data-linenos="115 "></span></a><span class="s"># 0 may result in a segfault when ASLR with stack gap randomization</span>
</span><span id="__span-38-116"><a id="__codelineno-38-116" name="__codelineno-38-116"></a><a href="#__codelineno-38-116"><span class="linenos" data-linenos="116 "></span></a><span class="s"># is enabled.</span>
</span><span id="__span-38-117"><a id="__codelineno-38-117" name="__codelineno-38-117"></a><a href="#__codelineno-38-117"><span class="linenos" data-linenos="117 "></span></a><span class="s">#</span>
</span><span id="__span-38-118"><a id="__codelineno-38-118" name="__codelineno-38-118"></a><a href="#__codelineno-38-118"><span class="linenos" data-linenos="118 "></span></a><span class="s">#rlimit memlock 32</span>
</span><span id="__span-38-119"><a id="__codelineno-38-119" name="__codelineno-38-119"></a><a href="#__codelineno-38-119"><span class="linenos" data-linenos="119 "></span></a><span class="s">#</span>
</span><span id="__span-38-120"><a id="__codelineno-38-120" name="__codelineno-38-120"></a><a href="#__codelineno-38-120"><span class="linenos" data-linenos="120 "></span></a><span class="s">interface ignore wildcard</span>
</span><span id="__span-38-121"><a id="__codelineno-38-121" name="__codelineno-38-121"></a><a href="#__codelineno-38-121"><span class="linenos" data-linenos="121 "></span></a><span class="s">interface listen 127.0.0.1</span>
</span><span id="__span-38-122"><a id="__codelineno-38-122" name="__codelineno-38-122"></a><a href="#__codelineno-38-122"><span class="linenos" data-linenos="122 "></span></a><span class="s">interface listen ::1</span>
</span><span id="__span-38-123"><a id="__codelineno-38-123" name="__codelineno-38-123"></a><a href="#__codelineno-38-123"><span class="linenos" data-linenos="123 "></span></a>
</span><span id="__span-38-124"><a id="__codelineno-38-124" name="__codelineno-38-124"></a><a href="#__codelineno-38-124"><span class="linenos" data-linenos="124 "></span></a><span class="s">EOF</span>
</span></code></pre></div>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1"></a><a href="#__codelineno-39-1"><span class="linenos" data-linenos="1 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /etc/resolvconf.conf</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2"></a><a href="#__codelineno-39-2"><span class="linenos" data-linenos="2 "></span></a><span class="s">resolvconf=NO</span>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3"></a><a href="#__codelineno-39-3"><span class="linenos" data-linenos="3 "></span></a>
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4"></a><a href="#__codelineno-39-4"><span class="linenos" data-linenos="4 "></span></a><span class="s">EOF</span>
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5"></a><a href="#__codelineno-39-5"><span class="linenos" data-linenos="5 "></span></a>
</span><span id="__span-39-6"><a id="__codelineno-39-6" name="__codelineno-39-6"></a><a href="#__codelineno-39-6"><span class="linenos" data-linenos="6 "></span></a>resolvconf<span class="w"> </span>-u
</span></code></pre></div>
<p>Die <code>/etc/periodic.conf</code> legen wir mit folgendem Inhalt an.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1"></a><a href="#__codelineno-40-1"><span class="linenos" data-linenos=" 1 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /etc/periodic.conf</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2"></a><a href="#__codelineno-40-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="s">daily_clean_hoststat_enable=&quot;NO&quot;</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3"></a><a href="#__codelineno-40-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="s">daily_clean_tmps_enable=&quot;YES&quot;</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4"></a><a href="#__codelineno-40-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="s">daily_status_gmirror_enable=&quot;YES&quot;</span>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5"></a><a href="#__codelineno-40-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="s">daily_status_include_submit_mailq=&quot;NO&quot;</span>
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6"></a><a href="#__codelineno-40-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="s">daily_status_mail_rejects_enable=&quot;NO&quot;</span>
</span><span id="__span-40-7"><a id="__codelineno-40-7" name="__codelineno-40-7"></a><a href="#__codelineno-40-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="s">daily_status_ntpd_enable=&quot;YES&quot;</span>
</span><span id="__span-40-8"><a id="__codelineno-40-8" name="__codelineno-40-8"></a><a href="#__codelineno-40-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="s">daily_submit_queuerun=&quot;NO&quot;</span>
</span><span id="__span-40-9"><a id="__codelineno-40-9" name="__codelineno-40-9"></a><a href="#__codelineno-40-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="s">weekly_noid_enable=&quot;YES&quot;</span>
</span><span id="__span-40-10"><a id="__codelineno-40-10" name="__codelineno-40-10"></a><a href="#__codelineno-40-10"><span class="linenos" data-linenos="10 "></span></a><span class="s">daily_backup_pkg_enable=&quot;YES&quot;</span>
</span><span id="__span-40-11"><a id="__codelineno-40-11" name="__codelineno-40-11"></a><a href="#__codelineno-40-11"><span class="linenos" data-linenos="11 "></span></a><span class="s">daily_status_pkg_changes_enable=&quot;YES&quot;</span>
</span><span id="__span-40-12"><a id="__codelineno-40-12" name="__codelineno-40-12"></a><a href="#__codelineno-40-12"><span class="linenos" data-linenos="12 "></span></a><span class="s">weekly_status_pkg_enable=&quot;YES&quot;</span>
</span><span id="__span-40-13"><a id="__codelineno-40-13" name="__codelineno-40-13"></a><a href="#__codelineno-40-13"><span class="linenos" data-linenos="13 "></span></a><span class="s">security_status_pkgaudit_enable=&quot;YES&quot;</span>
</span><span id="__span-40-14"><a id="__codelineno-40-14" name="__codelineno-40-14"></a><a href="#__codelineno-40-14"><span class="linenos" data-linenos="14 "></span></a><span class="s">security_status_pkgchecksum_enable=&quot;YES&quot;</span>
</span><span id="__span-40-15"><a id="__codelineno-40-15" name="__codelineno-40-15"></a><a href="#__codelineno-40-15"><span class="linenos" data-linenos="15 "></span></a>
</span><span id="__span-40-16"><a id="__codelineno-40-16" name="__codelineno-40-16"></a><a href="#__codelineno-40-16"><span class="linenos" data-linenos="16 "></span></a><span class="s">EOF</span>
</span></code></pre></div>
<p>Die <code>/etc/fstab</code> legen wir entsprechend unserem Partitionslayout an.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1"></a><a href="#__codelineno-41-1"><span class="linenos" data-linenos="1 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /etc/fstab</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2"></a><a href="#__codelineno-41-2"><span class="linenos" data-linenos="2 "></span></a><span class="s"># Device           Mountpoint    FStype     Options      Dump    Pass</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3"></a><a href="#__codelineno-41-3"><span class="linenos" data-linenos="3 "></span></a><span class="s"># Custom /etc/fstab for FreeBSD VM images</span>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4"></a><a href="#__codelineno-41-4"><span class="linenos" data-linenos="4 "></span></a><span class="s">/dev/mirror/rootfs    /             ufs        rw           1       1</span>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5"></a><a href="#__codelineno-41-5"><span class="linenos" data-linenos="5 "></span></a><span class="s">/dev/mirror/swapfs    none          swap       sw           0       0</span>
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6"></a><a href="#__codelineno-41-6"><span class="linenos" data-linenos="6 "></span></a><span class="s">/dev/mirror/efiesp    /boot/efi     msdosfs    rw           2       2</span>
</span><span id="__span-41-7"><a id="__codelineno-41-7" name="__codelineno-41-7"></a><a href="#__codelineno-41-7"><span class="linenos" data-linenos="7 "></span></a>
</span><span id="__span-41-8"><a id="__codelineno-41-8" name="__codelineno-41-8"></a><a href="#__codelineno-41-8"><span class="linenos" data-linenos="8 "></span></a><span class="s">EOF</span>
</span></code></pre></div>
<p>In der <code>/etc/rc.conf</code> werden diverse Grundeinstellungen für das System und die installierten Dienste vorgenommen.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1"></a><a href="#__codelineno-42-1"><span class="linenos" data-linenos=" 1 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /etc/rc.conf</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2"></a><a href="#__codelineno-42-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="s">##############################################################</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3"></a><a href="#__codelineno-42-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="s">###  Important initial Boot-time options  ####################</span>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4"></a><a href="#__codelineno-42-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="s">##############################################################</span>
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5"></a><a href="#__codelineno-42-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="s">#kern_securelevel_enable=&quot;YES&quot;</span>
</span><span id="__span-42-6"><a id="__codelineno-42-6" name="__codelineno-42-6"></a><a href="#__codelineno-42-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="s">#kern_securelevel=&quot;1&quot;</span>
</span><span id="__span-42-7"><a id="__codelineno-42-7" name="__codelineno-42-7"></a><a href="#__codelineno-42-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="s">kld_list=&quot;accf_data accf_http accf_dns&quot;</span>
</span><span id="__span-42-8"><a id="__codelineno-42-8" name="__codelineno-42-8"></a><a href="#__codelineno-42-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="s">fsck_y_enable=&quot;YES&quot;</span>
</span><span id="__span-42-9"><a id="__codelineno-42-9" name="__codelineno-42-9"></a><a href="#__codelineno-42-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="s">growfs_enable=&quot;YES&quot;</span>
</span><span id="__span-42-10"><a id="__codelineno-42-10" name="__codelineno-42-10"></a><a href="#__codelineno-42-10"><span class="linenos" data-linenos="10 "></span></a><span class="s">dmesg_enable=&quot;YES&quot;</span>
</span><span id="__span-42-11"><a id="__codelineno-42-11" name="__codelineno-42-11"></a><a href="#__codelineno-42-11"><span class="linenos" data-linenos="11 "></span></a><span class="s">zfs_enable=&quot;YES&quot;</span>
</span><span id="__span-42-12"><a id="__codelineno-42-12" name="__codelineno-42-12"></a><a href="#__codelineno-42-12"><span class="linenos" data-linenos="12 "></span></a><span class="s">zpool_reguid=&quot;zroot&quot;</span>
</span><span id="__span-42-13"><a id="__codelineno-42-13" name="__codelineno-42-13"></a><a href="#__codelineno-42-13"><span class="linenos" data-linenos="13 "></span></a><span class="s">zpool_upgrade=&quot;zroot&quot;</span>
</span><span id="__span-42-14"><a id="__codelineno-42-14" name="__codelineno-42-14"></a><a href="#__codelineno-42-14"><span class="linenos" data-linenos="14 "></span></a><span class="s">dumpdev=&quot;AUTO&quot;</span>
</span><span id="__span-42-15"><a id="__codelineno-42-15" name="__codelineno-42-15"></a><a href="#__codelineno-42-15"><span class="linenos" data-linenos="15 "></span></a><span class="s">cloudinit_enable=&quot;YES&quot;</span>
</span><span id="__span-42-16"><a id="__codelineno-42-16" name="__codelineno-42-16"></a><a href="#__codelineno-42-16"><span class="linenos" data-linenos="16 "></span></a><span class="s">qemu_guest_agent_enable=&quot;YES&quot;</span>
</span><span id="__span-42-17"><a id="__codelineno-42-17" name="__codelineno-42-17"></a><a href="#__codelineno-42-17"><span class="linenos" data-linenos="17 "></span></a>
</span><span id="__span-42-18"><a id="__codelineno-42-18" name="__codelineno-42-18"></a><a href="#__codelineno-42-18"><span class="linenos" data-linenos="18 "></span></a><span class="s">##############################################################</span>
</span><span id="__span-42-19"><a id="__codelineno-42-19" name="__codelineno-42-19"></a><a href="#__codelineno-42-19"><span class="linenos" data-linenos="19 "></span></a><span class="s">###  Network configuration sub-section  ######################</span>
</span><span id="__span-42-20"><a id="__codelineno-42-20" name="__codelineno-42-20"></a><a href="#__codelineno-42-20"><span class="linenos" data-linenos="20 "></span></a><span class="s">##############################################################</span>
</span><span id="__span-42-21"><a id="__codelineno-42-21" name="__codelineno-42-21"></a><a href="#__codelineno-42-21"><span class="linenos" data-linenos="21 "></span></a><span class="s">hostname=&quot;devnull.example.com&quot;</span>
</span><span id="__span-42-22"><a id="__codelineno-42-22" name="__codelineno-42-22"></a><a href="#__codelineno-42-22"><span class="linenos" data-linenos="22 "></span></a>
</span><span id="__span-42-23"><a id="__codelineno-42-23" name="__codelineno-42-23"></a><a href="#__codelineno-42-23"><span class="linenos" data-linenos="23 "></span></a><span class="s">##### IPv4</span>
</span><span id="__span-42-24"><a id="__codelineno-42-24" name="__codelineno-42-24"></a><a href="#__codelineno-42-24"><span class="linenos" data-linenos="24 "></span></a><span class="s">defaultrouter=&quot;__GATEWAY4__&quot;</span>
</span><span id="__span-42-25"><a id="__codelineno-42-25" name="__codelineno-42-25"></a><a href="#__codelineno-42-25"><span class="linenos" data-linenos="25 "></span></a><span class="s">ifconfig_DEFAULT=&quot;inet __IPADDR4__&quot;</span>
</span><span id="__span-42-26"><a id="__codelineno-42-26" name="__codelineno-42-26"></a><a href="#__codelineno-42-26"><span class="linenos" data-linenos="26 "></span></a>
</span><span id="__span-42-27"><a id="__codelineno-42-27" name="__codelineno-42-27"></a><a href="#__codelineno-42-27"><span class="linenos" data-linenos="27 "></span></a><span class="s">##### IPv6</span>
</span><span id="__span-42-28"><a id="__codelineno-42-28" name="__codelineno-42-28"></a><a href="#__codelineno-42-28"><span class="linenos" data-linenos="28 "></span></a><span class="s">ipv6_defaultrouter=&quot;__GATEWAY6__&quot;</span>
</span><span id="__span-42-29"><a id="__codelineno-42-29" name="__codelineno-42-29"></a><a href="#__codelineno-42-29"><span class="linenos" data-linenos="29 "></span></a><span class="s">ifconfig_DEFAULT_ipv6=&quot;inet6 __IPADDR6__ accept_rtadv&quot;</span>
</span><span id="__span-42-30"><a id="__codelineno-42-30" name="__codelineno-42-30"></a><a href="#__codelineno-42-30"><span class="linenos" data-linenos="30 "></span></a>
</span><span id="__span-42-31"><a id="__codelineno-42-31" name="__codelineno-42-31"></a><a href="#__codelineno-42-31"><span class="linenos" data-linenos="31 "></span></a><span class="s">##### Additional IP Addresses</span>
</span><span id="__span-42-32"><a id="__codelineno-42-32" name="__codelineno-42-32"></a><a href="#__codelineno-42-32"><span class="linenos" data-linenos="32 "></span></a><span class="s">### specify additional IPv4 and IPv6 addresses one per line</span>
</span><span id="__span-42-33"><a id="__codelineno-42-33" name="__codelineno-42-33"></a><a href="#__codelineno-42-33"><span class="linenos" data-linenos="33 "></span></a><span class="s">#ifconfig_DEFAULT_aliases=&quot;\</span>
</span><span id="__span-42-34"><a id="__codelineno-42-34" name="__codelineno-42-34"></a><a href="#__codelineno-42-34"><span class="linenos" data-linenos="34 "></span></a><span class="s">#        inet IPV4 netmask NETMASK \</span>
</span><span id="__span-42-35"><a id="__codelineno-42-35" name="__codelineno-42-35"></a><a href="#__codelineno-42-35"><span class="linenos" data-linenos="35 "></span></a><span class="s">#        inet IPV4 netmask NETMASK \</span>
</span><span id="__span-42-36"><a id="__codelineno-42-36" name="__codelineno-42-36"></a><a href="#__codelineno-42-36"><span class="linenos" data-linenos="36 "></span></a><span class="s">#        inet6 IPV6 prefixlen PREFLEN \</span>
</span><span id="__span-42-37"><a id="__codelineno-42-37" name="__codelineno-42-37"></a><a href="#__codelineno-42-37"><span class="linenos" data-linenos="37 "></span></a><span class="s">#        inet6 IPV6 prefixlen PREFLEN&quot;</span>
</span><span id="__span-42-38"><a id="__codelineno-42-38" name="__codelineno-42-38"></a><a href="#__codelineno-42-38"><span class="linenos" data-linenos="38 "></span></a>
</span><span id="__span-42-39"><a id="__codelineno-42-39" name="__codelineno-42-39"></a><a href="#__codelineno-42-39"><span class="linenos" data-linenos="39 "></span></a><span class="s">##############################################################</span>
</span><span id="__span-42-40"><a id="__codelineno-42-40" name="__codelineno-42-40"></a><a href="#__codelineno-42-40"><span class="linenos" data-linenos="40 "></span></a><span class="s">###  Paketfilter (PF) options  ###############################</span>
</span><span id="__span-42-41"><a id="__codelineno-42-41" name="__codelineno-42-41"></a><a href="#__codelineno-42-41"><span class="linenos" data-linenos="41 "></span></a><span class="s">##############################################################</span>
</span><span id="__span-42-42"><a id="__codelineno-42-42" name="__codelineno-42-42"></a><a href="#__codelineno-42-42"><span class="linenos" data-linenos="42 "></span></a><span class="s">pf_enable=&quot;YES&quot;</span>
</span><span id="__span-42-43"><a id="__codelineno-42-43" name="__codelineno-42-43"></a><a href="#__codelineno-42-43"><span class="linenos" data-linenos="43 "></span></a><span class="s">pf_rules=&quot;/etc/pf.conf&quot;</span>
</span><span id="__span-42-44"><a id="__codelineno-42-44" name="__codelineno-42-44"></a><a href="#__codelineno-42-44"><span class="linenos" data-linenos="44 "></span></a><span class="s">pflog_enable=&quot;YES&quot;</span>
</span><span id="__span-42-45"><a id="__codelineno-42-45" name="__codelineno-42-45"></a><a href="#__codelineno-42-45"><span class="linenos" data-linenos="45 "></span></a>
</span><span id="__span-42-46"><a id="__codelineno-42-46" name="__codelineno-42-46"></a><a href="#__codelineno-42-46"><span class="linenos" data-linenos="46 "></span></a><span class="s">##############################################################</span>
</span><span id="__span-42-47"><a id="__codelineno-42-47" name="__codelineno-42-47"></a><a href="#__codelineno-42-47"><span class="linenos" data-linenos="47 "></span></a><span class="s">###  System console options  #################################</span>
</span><span id="__span-42-48"><a id="__codelineno-42-48" name="__codelineno-42-48"></a><a href="#__codelineno-42-48"><span class="linenos" data-linenos="48 "></span></a><span class="s">##############################################################</span>
</span><span id="__span-42-49"><a id="__codelineno-42-49" name="__codelineno-42-49"></a><a href="#__codelineno-42-49"><span class="linenos" data-linenos="49 "></span></a><span class="s">keymap=&quot;de.acc.kbd&quot;</span>
</span><span id="__span-42-50"><a id="__codelineno-42-50" name="__codelineno-42-50"></a><a href="#__codelineno-42-50"><span class="linenos" data-linenos="50 "></span></a>
</span><span id="__span-42-51"><a id="__codelineno-42-51" name="__codelineno-42-51"></a><a href="#__codelineno-42-51"><span class="linenos" data-linenos="51 "></span></a><span class="s">##############################################################</span>
</span><span id="__span-42-52"><a id="__codelineno-42-52" name="__codelineno-42-52"></a><a href="#__codelineno-42-52"><span class="linenos" data-linenos="52 "></span></a><span class="s">###  Mail Transfer Agent (MTA) options  ######################</span>
</span><span id="__span-42-53"><a id="__codelineno-42-53" name="__codelineno-42-53"></a><a href="#__codelineno-42-53"><span class="linenos" data-linenos="53 "></span></a><span class="s">##############################################################</span>
</span><span id="__span-42-54"><a id="__codelineno-42-54" name="__codelineno-42-54"></a><a href="#__codelineno-42-54"><span class="linenos" data-linenos="54 "></span></a><span class="s">sendmail_enable=&quot;NONE&quot;</span>
</span><span id="__span-42-55"><a id="__codelineno-42-55" name="__codelineno-42-55"></a><a href="#__codelineno-42-55"><span class="linenos" data-linenos="55 "></span></a><span class="s">sendmail_cert_create=&quot;NO&quot;</span>
</span><span id="__span-42-56"><a id="__codelineno-42-56" name="__codelineno-42-56"></a><a href="#__codelineno-42-56"><span class="linenos" data-linenos="56 "></span></a><span class="s">sendmail_submit_enable=&quot;NO&quot;</span>
</span><span id="__span-42-57"><a id="__codelineno-42-57" name="__codelineno-42-57"></a><a href="#__codelineno-42-57"><span class="linenos" data-linenos="57 "></span></a><span class="s">sendmail_outbound_enable=&quot;NO&quot;</span>
</span><span id="__span-42-58"><a id="__codelineno-42-58" name="__codelineno-42-58"></a><a href="#__codelineno-42-58"><span class="linenos" data-linenos="58 "></span></a><span class="s">sendmail_msp_queue_enable=&quot;NO&quot;</span>
</span><span id="__span-42-59"><a id="__codelineno-42-59" name="__codelineno-42-59"></a><a href="#__codelineno-42-59"><span class="linenos" data-linenos="59 "></span></a><span class="s">sendmail_rebuild_aliases=&quot;NO&quot;</span>
</span><span id="__span-42-60"><a id="__codelineno-42-60" name="__codelineno-42-60"></a><a href="#__codelineno-42-60"><span class="linenos" data-linenos="60 "></span></a><span class="s">dma_flushq_enable=&quot;YES&quot;</span>
</span><span id="__span-42-61"><a id="__codelineno-42-61" name="__codelineno-42-61"></a><a href="#__codelineno-42-61"><span class="linenos" data-linenos="61 "></span></a>
</span><span id="__span-42-62"><a id="__codelineno-42-62" name="__codelineno-42-62"></a><a href="#__codelineno-42-62"><span class="linenos" data-linenos="62 "></span></a><span class="s">##############################################################</span>
</span><span id="__span-42-63"><a id="__codelineno-42-63" name="__codelineno-42-63"></a><a href="#__codelineno-42-63"><span class="linenos" data-linenos="63 "></span></a><span class="s">###  Miscellaneous administrative options  ###################</span>
</span><span id="__span-42-64"><a id="__codelineno-42-64" name="__codelineno-42-64"></a><a href="#__codelineno-42-64"><span class="linenos" data-linenos="64 "></span></a><span class="s">##############################################################</span>
</span><span id="__span-42-65"><a id="__codelineno-42-65" name="__codelineno-42-65"></a><a href="#__codelineno-42-65"><span class="linenos" data-linenos="65 "></span></a><span class="s">syslogd_flags=&quot;-ss&quot;</span>
</span><span id="__span-42-66"><a id="__codelineno-42-66" name="__codelineno-42-66"></a><a href="#__codelineno-42-66"><span class="linenos" data-linenos="66 "></span></a><span class="s">clear_tmp_enable=&quot;YES&quot;</span>
</span><span id="__span-42-67"><a id="__codelineno-42-67" name="__codelineno-42-67"></a><a href="#__codelineno-42-67"><span class="linenos" data-linenos="67 "></span></a><span class="s">cron_flags=&quot;$cron_flags -j 0 -J 0 -m root&quot;</span>
</span><span id="__span-42-68"><a id="__codelineno-42-68" name="__codelineno-42-68"></a><a href="#__codelineno-42-68"><span class="linenos" data-linenos="68 "></span></a><span class="s">update_motd=&quot;YES&quot;</span>
</span><span id="__span-42-69"><a id="__codelineno-42-69" name="__codelineno-42-69"></a><a href="#__codelineno-42-69"><span class="linenos" data-linenos="69 "></span></a><span class="s">nscd_enable=&quot;YES&quot;</span>
</span><span id="__span-42-70"><a id="__codelineno-42-70" name="__codelineno-42-70"></a><a href="#__codelineno-42-70"><span class="linenos" data-linenos="70 "></span></a><span class="s">ntpd_enable=&quot;YES&quot;</span>
</span><span id="__span-42-71"><a id="__codelineno-42-71" name="__codelineno-42-71"></a><a href="#__codelineno-42-71"><span class="linenos" data-linenos="71 "></span></a><span class="s">ntpd_sync_on_start=&quot;YES&quot;</span>
</span><span id="__span-42-72"><a id="__codelineno-42-72" name="__codelineno-42-72"></a><a href="#__codelineno-42-72"><span class="linenos" data-linenos="72 "></span></a><span class="s">resolv_enable=&quot;NO&quot;</span>
</span><span id="__span-42-73"><a id="__codelineno-42-73" name="__codelineno-42-73"></a><a href="#__codelineno-42-73"><span class="linenos" data-linenos="73 "></span></a>
</span><span id="__span-42-74"><a id="__codelineno-42-74" name="__codelineno-42-74"></a><a href="#__codelineno-42-74"><span class="linenos" data-linenos="74 "></span></a><span class="s">##############################################################</span>
</span><span id="__span-42-75"><a id="__codelineno-42-75" name="__codelineno-42-75"></a><a href="#__codelineno-42-75"><span class="linenos" data-linenos="75 "></span></a><span class="s">### Jail Configuration #######################################</span>
</span><span id="__span-42-76"><a id="__codelineno-42-76" name="__codelineno-42-76"></a><a href="#__codelineno-42-76"><span class="linenos" data-linenos="76 "></span></a><span class="s">##############################################################</span>
</span><span id="__span-42-77"><a id="__codelineno-42-77" name="__codelineno-42-77"></a><a href="#__codelineno-42-77"><span class="linenos" data-linenos="77 "></span></a>
</span><span id="__span-42-78"><a id="__codelineno-42-78" name="__codelineno-42-78"></a><a href="#__codelineno-42-78"><span class="linenos" data-linenos="78 "></span></a><span class="s">##############################################################</span>
</span><span id="__span-42-79"><a id="__codelineno-42-79" name="__codelineno-42-79"></a><a href="#__codelineno-42-79"><span class="linenos" data-linenos="79 "></span></a><span class="s">###  System services options  ################################</span>
</span><span id="__span-42-80"><a id="__codelineno-42-80" name="__codelineno-42-80"></a><a href="#__codelineno-42-80"><span class="linenos" data-linenos="80 "></span></a><span class="s">##############################################################</span>
</span><span id="__span-42-81"><a id="__codelineno-42-81" name="__codelineno-42-81"></a><a href="#__codelineno-42-81"><span class="linenos" data-linenos="81 "></span></a><span class="s">local_unbound_enable=&quot;YES&quot;</span>
</span><span id="__span-42-82"><a id="__codelineno-42-82" name="__codelineno-42-82"></a><a href="#__codelineno-42-82"><span class="linenos" data-linenos="82 "></span></a><span class="s">local_unbound_tls=&quot;NO&quot;</span>
</span><span id="__span-42-83"><a id="__codelineno-42-83" name="__codelineno-42-83"></a><a href="#__codelineno-42-83"><span class="linenos" data-linenos="83 "></span></a><span class="s">blacklistd_enable=&quot;NO&quot;</span>
</span><span id="__span-42-84"><a id="__codelineno-42-84" name="__codelineno-42-84"></a><a href="#__codelineno-42-84"><span class="linenos" data-linenos="84 "></span></a><span class="s">sshd_enable=&quot;YES&quot;</span>
</span><span id="__span-42-85"><a id="__codelineno-42-85" name="__codelineno-42-85"></a><a href="#__codelineno-42-85"><span class="linenos" data-linenos="85 "></span></a>
</span><span id="__span-42-86"><a id="__codelineno-42-86" name="__codelineno-42-86"></a><a href="#__codelineno-42-86"><span class="linenos" data-linenos="86 "></span></a><span class="s">EOF</span>
</span></code></pre></div>
<p>Es folgt ein wenig Voodoo, um die Netzwerkkonfiguration in der <code>/etc/rc.conf</code> zu vervollständigen.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1"></a><a href="#__codelineno-43-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="c1"># Default Interface</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2"></a><a href="#__codelineno-43-2"><span class="linenos" data-linenos=" 2 "></span></a>route<span class="w"> </span>-n<span class="w"> </span>get<span class="w"> </span>-inet<span class="w"> </span>default<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;/interface/ {print $2}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3"></a><a href="#__codelineno-43-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span>xargs<span class="w"> </span>-I<span class="w"> </span>%<span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s|DEFAULT|%|g&#39;</span><span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>/etc/rc.conf
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4"></a><a href="#__codelineno-43-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5"></a><a href="#__codelineno-43-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="c1"># IPv4</span>
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6"></a><a href="#__codelineno-43-6"><span class="linenos" data-linenos=" 6 "></span></a>route<span class="w"> </span>-n<span class="w"> </span>get<span class="w"> </span>-inet<span class="w"> </span>default<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;/gateway/ {print $2}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7"></a><a href="#__codelineno-43-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span>xargs<span class="w"> </span>-I<span class="w"> </span>%<span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s|__GATEWAY4__|%|g&#39;</span><span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>/etc/rc.conf
</span><span id="__span-43-8"><a id="__codelineno-43-8" name="__codelineno-43-8"></a><a href="#__codelineno-43-8"><span class="linenos" data-linenos=" 8 "></span></a>ifconfig<span class="w"> </span>-u<span class="w"> </span>-f<span class="w"> </span>cidr<span class="w"> </span><span class="sb">`</span>route<span class="w"> </span>-n<span class="w"> </span>get<span class="w"> </span>-inet<span class="w"> </span>default<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;/interface/ {print $2}&#39;</span><span class="sb">`</span><span class="w"> </span>inet<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-43-9"><a id="__codelineno-43-9" name="__codelineno-43-9"></a><a href="#__codelineno-43-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span>awk<span class="w"> </span><span class="s1">&#39;tolower($0) ~ /inet[\ \t]+((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/ {if(substr($2,1,3)!=127) print $2}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-43-10"><a id="__codelineno-43-10" name="__codelineno-43-10"></a><a href="#__codelineno-43-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-I<span class="w"> </span>%<span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s|__IPADDR4__|%|g&#39;</span><span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>/etc/rc.conf
</span><span id="__span-43-11"><a id="__codelineno-43-11" name="__codelineno-43-11"></a><a href="#__codelineno-43-11"><span class="linenos" data-linenos="11 "></span></a>
</span><span id="__span-43-12"><a id="__codelineno-43-12" name="__codelineno-43-12"></a><a href="#__codelineno-43-12"><span class="linenos" data-linenos="12 "></span></a><span class="c1"># IPv6</span>
</span><span id="__span-43-13"><a id="__codelineno-43-13" name="__codelineno-43-13"></a><a href="#__codelineno-43-13"><span class="linenos" data-linenos="13 "></span></a>route<span class="w"> </span>-n<span class="w"> </span>get<span class="w"> </span>-inet6<span class="w"> </span>default<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;/gateway/ {print $2}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-43-14"><a id="__codelineno-43-14" name="__codelineno-43-14"></a><a href="#__codelineno-43-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span>xargs<span class="w"> </span>-I<span class="w"> </span>%<span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s|__GATEWAY6__|%|g&#39;</span><span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>/etc/rc.conf
</span><span id="__span-43-15"><a id="__codelineno-43-15" name="__codelineno-43-15"></a><a href="#__codelineno-43-15"><span class="linenos" data-linenos="15 "></span></a>ifconfig<span class="w"> </span>-u<span class="w"> </span>-f<span class="w"> </span>cidr<span class="w"> </span><span class="sb">`</span>route<span class="w"> </span>-n<span class="w"> </span>get<span class="w"> </span>-inet6<span class="w"> </span>default<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;/interface/ {print $2}&#39;</span><span class="sb">`</span><span class="w"> </span>inet6<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-43-16"><a id="__codelineno-43-16" name="__codelineno-43-16"></a><a href="#__codelineno-43-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span>awk<span class="w"> </span><span class="s1">&#39;tolower($0) ~ /inet6[\ \t]+(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/ {if(substr($2,1,1)!=&quot;f&quot;) print $2}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-43-17"><a id="__codelineno-43-17" name="__codelineno-43-17"></a><a href="#__codelineno-43-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-I<span class="w"> </span>%<span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s|__IPADDR6__|%|g&#39;</span><span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>/etc/rc.conf
</span></code></pre></div>
<p>Wir richten die <code>/etc/hosts</code> ein.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1"></a><a href="#__codelineno-44-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="c1"># localhost</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2"></a><a href="#__codelineno-44-2"><span class="linenos" data-linenos=" 2 "></span></a>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s|my.domain/example.com/g&#39;</span><span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>/etc/hosts
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3"></a><a href="#__codelineno-44-3"><span class="linenos" data-linenos=" 3 "></span></a>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4"></a><a href="#__codelineno-44-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="c1"># IPv4</span>
</span><span id="__span-44-5"><a id="__codelineno-44-5" name="__codelineno-44-5"></a><a href="#__codelineno-44-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;__IPADDR4__   devnull.example.com   devnull&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/etc/hosts
</span><span id="__span-44-6"><a id="__codelineno-44-6" name="__codelineno-44-6"></a><a href="#__codelineno-44-6"><span class="linenos" data-linenos=" 6 "></span></a>ifconfig<span class="w"> </span>-u<span class="w"> </span>-f<span class="w"> </span>cidr<span class="w"> </span><span class="sb">`</span>route<span class="w"> </span>-n<span class="w"> </span>get<span class="w"> </span>-inet<span class="w"> </span>default<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;/interface/ {print $2}&#39;</span><span class="sb">`</span><span class="w"> </span>inet<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-44-7"><a id="__codelineno-44-7" name="__codelineno-44-7"></a><a href="#__codelineno-44-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span>awk<span class="w"> </span><span class="s1">&#39;tolower($0) ~ /inet[\ \t]+((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/ {if(substr($2,1,3)!=127) print $2}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-44-8"><a id="__codelineno-44-8" name="__codelineno-44-8"></a><a href="#__codelineno-44-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-I<span class="w"> </span>%<span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s|__IPADDR4__|%|g&#39;</span><span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>/etc/hosts
</span><span id="__span-44-9"><a id="__codelineno-44-9" name="__codelineno-44-9"></a><a href="#__codelineno-44-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-44-10"><a id="__codelineno-44-10" name="__codelineno-44-10"></a><a href="#__codelineno-44-10"><span class="linenos" data-linenos="10 "></span></a><span class="c1"># IPv6</span>
</span><span id="__span-44-11"><a id="__codelineno-44-11" name="__codelineno-44-11"></a><a href="#__codelineno-44-11"><span class="linenos" data-linenos="11 "></span></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;__IPADDR6__   devnull.example.com   devnull&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/etc/hosts
</span><span id="__span-44-12"><a id="__codelineno-44-12" name="__codelineno-44-12"></a><a href="#__codelineno-44-12"><span class="linenos" data-linenos="12 "></span></a>ifconfig<span class="w"> </span>-u<span class="w"> </span>-f<span class="w"> </span>cidr<span class="w"> </span><span class="sb">`</span>route<span class="w"> </span>-n<span class="w"> </span>get<span class="w"> </span>-inet6<span class="w"> </span>default<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;/interface/ {print $2}&#39;</span><span class="sb">`</span><span class="w"> </span>inet6<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-44-13"><a id="__codelineno-44-13" name="__codelineno-44-13"></a><a href="#__codelineno-44-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span>awk<span class="w"> </span><span class="s1">&#39;tolower($0) ~ /inet6[\ \t]+(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/ {if(substr($2,1,1)!=&quot;f&quot;) print $2}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-44-14"><a id="__codelineno-44-14" name="__codelineno-44-14"></a><a href="#__codelineno-44-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-I<span class="w"> </span>%<span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s|__IPADDR6__|%|g&#39;</span><span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>/etc/hosts
</span></code></pre></div>
<h3 id="systemgruppen-anlegen">Systemgruppen anlegen<a class="headerlink" href="#systemgruppen-anlegen" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Zur besseren Trennung beziehungsweise Gruppierung unterschiedlicher Nutzungszwecke legen wir ein paar Gruppen an (admin
für rein administrative Nutzer, users für normale Nutzer, sshusers für Nutzer mit <abbr title="Secure Shell">SSH</abbr>-Zugang und sftponly für reine
SFTP-Nutzer).</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1"></a><a href="#__codelineno-45-1"><span class="linenos" data-linenos="1 "></span></a>pw<span class="w"> </span>groupadd<span class="w"> </span>-n<span class="w"> </span>admin<span class="w"> </span>-g<span class="w"> </span><span class="m">1000</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2"></a><a href="#__codelineno-45-2"><span class="linenos" data-linenos="2 "></span></a>pw<span class="w"> </span>groupadd<span class="w"> </span>-n<span class="w"> </span>users<span class="w"> </span>-g<span class="w"> </span><span class="m">2000</span>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3"></a><a href="#__codelineno-45-3"><span class="linenos" data-linenos="3 "></span></a>pw<span class="w"> </span>groupadd<span class="w"> </span>-n<span class="w"> </span>sshusers<span class="w"> </span>-g<span class="w"> </span><span class="m">3000</span>
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4"></a><a href="#__codelineno-45-4"><span class="linenos" data-linenos="4 "></span></a>pw<span class="w"> </span>groupadd<span class="w"> </span>-n<span class="w"> </span>sftponly<span class="w"> </span>-g<span class="w"> </span><span class="m">4000</span>
</span></code></pre></div>
<h3 id="systembenutzer-anlegen">Systembenutzer anlegen<a class="headerlink" href="#systembenutzer-anlegen" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Um nicht ständig mit dem root-User arbeiten zu müssen, legen wir uns einen Administrations-User an, den wir
praktischerweise "admin" nennen. Diesem User verpassen wir die Standard-Systemgruppe "admin" und nehmen ihn zusätzlich
in die Systemgruppe "wheel" auf, damit dieser User später per <code>su</code> zum root-User wechseln kann. Das Home-Verzeichnis
des admin-Users lassen wir automatisch anlegen und setzen seine Standard-Shell auf <code>/bin/tcsh</code>. Ein sicheres Passwort
bekommt er selbstverständlich auch noch.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1"></a><a href="#__codelineno-46-1"><span class="linenos" data-linenos=" 1 "></span></a>pw<span class="w"> </span>useradd<span class="w"> </span>-n<span class="w"> </span>admin<span class="w"> </span>-u<span class="w"> </span><span class="m">1000</span><span class="w"> </span>-g<span class="w"> </span>admin<span class="w"> </span>-G<span class="w"> </span>wheel<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;Administrator&#39;</span><span class="w"> </span>-m<span class="w"> </span>-w<span class="w"> </span>no
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2"></a><a href="#__codelineno-46-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3"></a><a href="#__codelineno-46-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="c1"># Password erzeugen und in /root/_passwords speichern</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4"></a><a href="#__codelineno-46-4"><span class="linenos" data-linenos=" 4 "></span></a>chmod<span class="w"> </span><span class="m">0600</span><span class="w"> </span>/root/_passwords
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5"></a><a href="#__codelineno-46-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="nv">newpw</span><span class="o">=</span><span class="s2">&quot;`openssl rand -hex 64 | openssl passwd -5 -stdin | tr -cd &#39;[[:print:]]&#39; | cut -c 2-17`&quot;</span>
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6"></a><a href="#__codelineno-46-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Password for systemuser admin: </span><span class="nv">$newpw</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/root/_passwords
</span><span id="__span-46-7"><a id="__codelineno-46-7" name="__codelineno-46-7"></a><a href="#__codelineno-46-7"><span class="linenos" data-linenos=" 7 "></span></a>chmod<span class="w"> </span><span class="m">0400</span><span class="w"> </span>/root/_passwords
</span><span id="__span-46-8"><a id="__codelineno-46-8" name="__codelineno-46-8"></a><a href="#__codelineno-46-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Password: </span><span class="nv">$newpw</span><span class="s2">&quot;</span>
</span><span id="__span-46-9"><a id="__codelineno-46-9" name="__codelineno-46-9"></a><a href="#__codelineno-46-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="nb">unset</span><span class="w"> </span>newpw
</span><span id="__span-46-10"><a id="__codelineno-46-10" name="__codelineno-46-10"></a><a href="#__codelineno-46-10"><span class="linenos" data-linenos="10 "></span></a>
</span><span id="__span-46-11"><a id="__codelineno-46-11" name="__codelineno-46-11"></a><a href="#__codelineno-46-11"><span class="linenos" data-linenos="11 "></span></a>
</span><span id="__span-46-12"><a id="__codelineno-46-12" name="__codelineno-46-12"></a><a href="#__codelineno-46-12"><span class="linenos" data-linenos="12 "></span></a>passwd<span class="w"> </span>admin
</span></code></pre></div>
<p>Wir richten unserem <code>admin</code> noch die Shell und die zum zukünftigen Einloggen zwingend nötigten <abbr title="Secure Shell">SSH</abbr>-Keys ein.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1"></a><a href="#__codelineno-47-1"><span class="linenos" data-linenos=" 1 "></span></a>su<span class="w"> </span>-<span class="w"> </span>admin
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2"></a><a href="#__codelineno-47-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3"></a><a href="#__codelineno-47-3"><span class="linenos" data-linenos=" 3 "></span></a>mkdir<span class="w"> </span>-p<span class="w"> </span>.ssh
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4"></a><a href="#__codelineno-47-4"><span class="linenos" data-linenos=" 4 "></span></a>chmod<span class="w"> </span><span class="m">0700</span><span class="w"> </span>.ssh
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5"></a><a href="#__codelineno-47-5"><span class="linenos" data-linenos=" 5 "></span></a>
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6"></a><a href="#__codelineno-47-6"><span class="linenos" data-linenos=" 6 "></span></a>ssh-keygen<span class="w"> </span>-t<span class="w"> </span>ed25519<span class="w"> </span>-O<span class="w"> </span>clear<span class="w"> </span>-O<span class="w"> </span>permit-pty<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;.ssh/id_ed25519&quot;</span><span class="w"> </span>-N<span class="w"> </span><span class="s2">&quot;&quot;</span>
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7"></a><a href="#__codelineno-47-7"><span class="linenos" data-linenos=" 7 "></span></a>cat<span class="w"> </span>.ssh/id_ed25519.pub<span class="w"> </span>&gt;&gt;<span class="w"> </span>.ssh/authorized_keys
</span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8"></a><a href="#__codelineno-47-8"><span class="linenos" data-linenos=" 8 "></span></a>ssh-keygen<span class="w"> </span>-t<span class="w"> </span>ecdsa<span class="w"> </span>-b<span class="w"> </span><span class="m">384</span><span class="w"> </span>-O<span class="w"> </span>clear<span class="w"> </span>-O<span class="w"> </span>permit-pty<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;.ssh/id_ecdsa&quot;</span><span class="w"> </span>-N<span class="w"> </span><span class="s2">&quot;&quot;</span>
</span><span id="__span-47-9"><a id="__codelineno-47-9" name="__codelineno-47-9"></a><a href="#__codelineno-47-9"><span class="linenos" data-linenos=" 9 "></span></a>cat<span class="w"> </span>.ssh/id_ecdsa.pub<span class="w"> </span>&gt;&gt;<span class="w"> </span>.ssh/authorized_keys
</span><span id="__span-47-10"><a id="__codelineno-47-10" name="__codelineno-47-10"></a><a href="#__codelineno-47-10"><span class="linenos" data-linenos="10 "></span></a>ssh-keygen<span class="w"> </span>-t<span class="w"> </span>rsa<span class="w"> </span>-b<span class="w"> </span><span class="m">4096</span><span class="w"> </span>-O<span class="w"> </span>clear<span class="w"> </span>-O<span class="w"> </span>permit-pty<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;.ssh/id_rsa&quot;</span><span class="w"> </span>-N<span class="w"> </span><span class="s2">&quot;&quot;</span>
</span><span id="__span-47-11"><a id="__codelineno-47-11" name="__codelineno-47-11"></a><a href="#__codelineno-47-11"><span class="linenos" data-linenos="11 "></span></a>cat<span class="w"> </span>.ssh/id_rsa.pub<span class="w"> </span>&gt;&gt;<span class="w"> </span>.ssh/authorized_keys
</span><span id="__span-47-12"><a id="__codelineno-47-12" name="__codelineno-47-12"></a><a href="#__codelineno-47-12"><span class="linenos" data-linenos="12 "></span></a>
</span><span id="__span-47-13"><a id="__codelineno-47-13" name="__codelineno-47-13"></a><a href="#__codelineno-47-13"><span class="linenos" data-linenos="13 "></span></a><span class="nb">exit</span>
</span></code></pre></div>
<p>Einen normalen User mit <abbr title="Secure Shell">SSH</abbr>-Zugang legen wir ebenfalls an, ihn nennen wir "joeuser". Diesem User verpassen wir die
Standard-Systemgruppe "users" und nehmen ihn zusätzlich in die Systemgruppe "sshusers" auf, damit sich dieser User
später per <code>SSH</code> einloggen kann. Das Home-Verzeichnis des Users lassen wir automatisch anlegen und setzen seine
Standard-Shell auf <code>/bin/tcsh</code>. Ein sicheres Passwort bekommt er selbstverständlich auch noch.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1"></a><a href="#__codelineno-48-1"><span class="linenos" data-linenos=" 1 "></span></a>pw<span class="w"> </span>useradd<span class="w"> </span>-n<span class="w"> </span>joeuser<span class="w"> </span>-u<span class="w"> </span><span class="m">2000</span><span class="w"> </span>-g<span class="w"> </span>users<span class="w"> </span>-G<span class="w"> </span>sshusers<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;Joe User&#39;</span><span class="w"> </span>-m<span class="w"> </span>-w<span class="w"> </span>no
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2"></a><a href="#__codelineno-48-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3"></a><a href="#__codelineno-48-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="c1"># Password erzeugen und in /root/_passwords speichern</span>
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4"></a><a href="#__codelineno-48-4"><span class="linenos" data-linenos=" 4 "></span></a>chmod<span class="w"> </span><span class="m">0600</span><span class="w"> </span>/root/_passwords
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5"></a><a href="#__codelineno-48-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="nv">newpw</span><span class="o">=</span><span class="s2">&quot;`openssl rand -hex 64 | openssl passwd -5 -stdin | tr -cd &#39;[[:print:]]&#39; | cut -c 2-17`&quot;</span>
</span><span id="__span-48-6"><a id="__codelineno-48-6" name="__codelineno-48-6"></a><a href="#__codelineno-48-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Password for systemuser joeuser: </span><span class="nv">$newpw</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/root/_passwords
</span><span id="__span-48-7"><a id="__codelineno-48-7" name="__codelineno-48-7"></a><a href="#__codelineno-48-7"><span class="linenos" data-linenos=" 7 "></span></a>chmod<span class="w"> </span><span class="m">0400</span><span class="w"> </span>/root/_passwords
</span><span id="__span-48-8"><a id="__codelineno-48-8" name="__codelineno-48-8"></a><a href="#__codelineno-48-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Password: </span><span class="nv">$newpw</span><span class="s2">&quot;</span>
</span><span id="__span-48-9"><a id="__codelineno-48-9" name="__codelineno-48-9"></a><a href="#__codelineno-48-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="nb">unset</span><span class="w"> </span>newpw
</span><span id="__span-48-10"><a id="__codelineno-48-10" name="__codelineno-48-10"></a><a href="#__codelineno-48-10"><span class="linenos" data-linenos="10 "></span></a>
</span><span id="__span-48-11"><a id="__codelineno-48-11" name="__codelineno-48-11"></a><a href="#__codelineno-48-11"><span class="linenos" data-linenos="11 "></span></a>
</span><span id="__span-48-12"><a id="__codelineno-48-12" name="__codelineno-48-12"></a><a href="#__codelineno-48-12"><span class="linenos" data-linenos="12 "></span></a>passwd<span class="w"> </span>joeuser
</span></code></pre></div>
<p>Wir richten unserem <code>joeuser</code> noch die Shell und die zum zukünftigen Einloggen zwingend nötigten <abbr title="Secure Shell">SSH</abbr>-Keys ein.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1"></a><a href="#__codelineno-49-1"><span class="linenos" data-linenos=" 1 "></span></a>su<span class="w"> </span>-<span class="w"> </span>joeuser
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2"></a><a href="#__codelineno-49-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3"></a><a href="#__codelineno-49-3"><span class="linenos" data-linenos=" 3 "></span></a>mkdir<span class="w"> </span>-p<span class="w"> </span>.ssh
</span><span id="__span-49-4"><a id="__codelineno-49-4" name="__codelineno-49-4"></a><a href="#__codelineno-49-4"><span class="linenos" data-linenos=" 4 "></span></a>chmod<span class="w"> </span><span class="m">0700</span><span class="w"> </span>.ssh
</span><span id="__span-49-5"><a id="__codelineno-49-5" name="__codelineno-49-5"></a><a href="#__codelineno-49-5"><span class="linenos" data-linenos=" 5 "></span></a>
</span><span id="__span-49-6"><a id="__codelineno-49-6" name="__codelineno-49-6"></a><a href="#__codelineno-49-6"><span class="linenos" data-linenos=" 6 "></span></a>ssh-keygen<span class="w"> </span>-t<span class="w"> </span>ed25519<span class="w"> </span>-O<span class="w"> </span>clear<span class="w"> </span>-O<span class="w"> </span>permit-pty<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;.ssh/id_ed25519&quot;</span><span class="w"> </span>-N<span class="w"> </span><span class="s2">&quot;&quot;</span>
</span><span id="__span-49-7"><a id="__codelineno-49-7" name="__codelineno-49-7"></a><a href="#__codelineno-49-7"><span class="linenos" data-linenos=" 7 "></span></a>cat<span class="w"> </span>.ssh/id_ed25519.pub<span class="w"> </span>&gt;&gt;<span class="w"> </span>.ssh/authorized_keys
</span><span id="__span-49-8"><a id="__codelineno-49-8" name="__codelineno-49-8"></a><a href="#__codelineno-49-8"><span class="linenos" data-linenos=" 8 "></span></a>ssh-keygen<span class="w"> </span>-t<span class="w"> </span>ecdsa<span class="w"> </span>-b<span class="w"> </span><span class="m">384</span><span class="w"> </span>-O<span class="w"> </span>clear<span class="w"> </span>-O<span class="w"> </span>permit-pty<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;.ssh/id_ecdsa&quot;</span><span class="w"> </span>-N<span class="w"> </span><span class="s2">&quot;&quot;</span>
</span><span id="__span-49-9"><a id="__codelineno-49-9" name="__codelineno-49-9"></a><a href="#__codelineno-49-9"><span class="linenos" data-linenos=" 9 "></span></a>cat<span class="w"> </span>.ssh/id_ecdsa.pub<span class="w"> </span>&gt;&gt;<span class="w"> </span>.ssh/authorized_keys
</span><span id="__span-49-10"><a id="__codelineno-49-10" name="__codelineno-49-10"></a><a href="#__codelineno-49-10"><span class="linenos" data-linenos="10 "></span></a>ssh-keygen<span class="w"> </span>-t<span class="w"> </span>rsa<span class="w"> </span>-b<span class="w"> </span><span class="m">4096</span><span class="w"> </span>-O<span class="w"> </span>clear<span class="w"> </span>-O<span class="w"> </span>permit-pty<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;.ssh/id_rsa&quot;</span><span class="w"> </span>-N<span class="w"> </span><span class="s2">&quot;&quot;</span>
</span><span id="__span-49-11"><a id="__codelineno-49-11" name="__codelineno-49-11"></a><a href="#__codelineno-49-11"><span class="linenos" data-linenos="11 "></span></a>cat<span class="w"> </span>.ssh/id_rsa.pub<span class="w"> </span>&gt;&gt;<span class="w"> </span>.ssh/authorized_keys
</span><span id="__span-49-12"><a id="__codelineno-49-12" name="__codelineno-49-12"></a><a href="#__codelineno-49-12"><span class="linenos" data-linenos="12 "></span></a>
</span><span id="__span-49-13"><a id="__codelineno-49-13" name="__codelineno-49-13"></a><a href="#__codelineno-49-13"><span class="linenos" data-linenos="13 "></span></a><span class="nb">exit</span>
</span></code></pre></div>
<h2 id="buildsystem-konfigurieren">Buildsystem konfigurieren<a class="headerlink" href="#buildsystem-konfigurieren" title="Anchor link to this section for reference">⚓︎</a></h2>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1"></a><a href="#__codelineno-50-1"><span class="linenos" data-linenos=" 1 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /etc/make.conf</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2"></a><a href="#__codelineno-50-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="s">KERNCONF?=GENERIC MYKERNEL</span>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3"></a><a href="#__codelineno-50-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="s">PRINTERDEVICE=ascii</span>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4"></a><a href="#__codelineno-50-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="s">LICENSES_ACCEPTED+=EULA DCC</span>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5"></a><a href="#__codelineno-50-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="s">DISABLE_VULNERABILITIES=yes</span>
</span><span id="__span-50-6"><a id="__codelineno-50-6" name="__codelineno-50-6"></a><a href="#__codelineno-50-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="s">MAKE_JOBS_NUMBER=4</span>
</span><span id="__span-50-7"><a id="__codelineno-50-7" name="__codelineno-50-7"></a><a href="#__codelineno-50-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="s">MAKE_JOBS_NUMBER_LIMIT=6</span>
</span><span id="__span-50-8"><a id="__codelineno-50-8" name="__codelineno-50-8"></a><a href="#__codelineno-50-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="s">WITH_BIND_NOW=YES</span>
</span><span id="__span-50-9"><a id="__codelineno-50-9" name="__codelineno-50-9"></a><a href="#__codelineno-50-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="s">WITH_PIE=YES</span>
</span><span id="__span-50-10"><a id="__codelineno-50-10" name="__codelineno-50-10"></a><a href="#__codelineno-50-10"><span class="linenos" data-linenos="10 "></span></a><span class="s">.if ${.CURDIR:M/usr/ports/*}</span>
</span><span id="__span-50-11"><a id="__codelineno-50-11" name="__codelineno-50-11"></a><a href="#__codelineno-50-11"><span class="linenos" data-linenos="11 "></span></a><span class="s">OPTIONS_SET=BASH BDB BDB5 BROTLI CDB CRYPTO CURL FILTER GMP GOST GSSAPI_NONE HTTP2 HTTP3 ICONV ICU IDN IDN2 IMAP IPV6 LCMS2 LDNS LIBEDIT LMDB LZ4 MAN3 MANPAGES MYSQL MYSQLND NLS OPENMP OPENSSL PCRE2 PGSQL PNG PROXY READLINE SESSION SHARED SOCKS SSL STRIP THREADS TRIO WEBP XML ZSTD</span>
</span><span id="__span-50-12"><a id="__codelineno-50-12" name="__codelineno-50-12"></a><a href="#__codelineno-50-12"><span class="linenos" data-linenos="12 "></span></a><span class="s">OPTIONS_UNSET=BLACKLISTD DEBUG DOCS DOXYGEN DTRACE EXAMPLES GDBM GNUTLS GSSAPI GSSAPI_BASE GSSAPI_HEIMDAL GSSAPI_MIT INFO LDAP MEM_DEBUG ODBC OPTIMIZED_CFLAGS PAM SASL SNMP SQLITE STATIC TCL TEST TESTS TRACE X11</span>
</span><span id="__span-50-13"><a id="__codelineno-50-13" name="__codelineno-50-13"></a><a href="#__codelineno-50-13"><span class="linenos" data-linenos="13 "></span></a><span class="s">.endif</span>
</span><span id="__span-50-14"><a id="__codelineno-50-14" name="__codelineno-50-14"></a><a href="#__codelineno-50-14"><span class="linenos" data-linenos="14 "></span></a><span class="s">DEFAULT_VERSIONS+=ssl=openssl35</span>
</span><span id="__span-50-15"><a id="__codelineno-50-15" name="__codelineno-50-15"></a><a href="#__codelineno-50-15"><span class="linenos" data-linenos="15 "></span></a>
</span><span id="__span-50-16"><a id="__codelineno-50-16" name="__codelineno-50-16"></a><a href="#__codelineno-50-16"><span class="linenos" data-linenos="16 "></span></a><span class="s">EOF</span>
</span></code></pre></div>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1"></a><a href="#__codelineno-51-1"><span class="linenos" data-linenos=" 1 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /etc/src.conf</span>
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2"></a><a href="#__codelineno-51-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="s">MAKE_JOBS_NUMBER=4</span>
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3"></a><a href="#__codelineno-51-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="s">MAKE_JOBS_NUMBER_LIMIT=6</span>
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4"></a><a href="#__codelineno-51-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="s">WITHOUT_APM=YES</span>
</span><span id="__span-51-5"><a id="__codelineno-51-5" name="__codelineno-51-5"></a><a href="#__codelineno-51-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="s">WITHOUT_BHYVE=YES</span>
</span><span id="__span-51-6"><a id="__codelineno-51-6" name="__codelineno-51-6"></a><a href="#__codelineno-51-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="s">WITH_BIND_NOW=YES</span>
</span><span id="__span-51-7"><a id="__codelineno-51-7" name="__codelineno-51-7"></a><a href="#__codelineno-51-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="s">WITHOUT_BLUETOOTH=YES</span>
</span><span id="__span-51-8"><a id="__codelineno-51-8" name="__codelineno-51-8"></a><a href="#__codelineno-51-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="s">WITHOUT_BOOTPARAMD=YES</span>
</span><span id="__span-51-9"><a id="__codelineno-51-9" name="__codelineno-51-9"></a><a href="#__codelineno-51-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="s">WITHOUT_BOOTPD=YES</span>
</span><span id="__span-51-10"><a id="__codelineno-51-10" name="__codelineno-51-10"></a><a href="#__codelineno-51-10"><span class="linenos" data-linenos="10 "></span></a><span class="s">WITHOUT_BSNMP=YES</span>
</span><span id="__span-51-11"><a id="__codelineno-51-11" name="__codelineno-51-11"></a><a href="#__codelineno-51-11"><span class="linenos" data-linenos="11 "></span></a><span class="s">WITHOUT_CALENDAR=YES</span>
</span><span id="__span-51-12"><a id="__codelineno-51-12" name="__codelineno-51-12"></a><a href="#__codelineno-51-12"><span class="linenos" data-linenos="12 "></span></a><span class="s">WITHOUT_CCD=YES</span>
</span><span id="__span-51-13"><a id="__codelineno-51-13" name="__codelineno-51-13"></a><a href="#__codelineno-51-13"><span class="linenos" data-linenos="13 "></span></a><span class="s">WITH_CLANG_EXTRAS=YES</span>
</span><span id="__span-51-14"><a id="__codelineno-51-14" name="__codelineno-51-14"></a><a href="#__codelineno-51-14"><span class="linenos" data-linenos="14 "></span></a><span class="s">WITH_CLANG_FORMAT=YES</span>
</span><span id="__span-51-15"><a id="__codelineno-51-15" name="__codelineno-51-15"></a><a href="#__codelineno-51-15"><span class="linenos" data-linenos="15 "></span></a><span class="s">WITHOUT_CROSS_COMPILER=YES</span>
</span><span id="__span-51-16"><a id="__codelineno-51-16" name="__codelineno-51-16"></a><a href="#__codelineno-51-16"><span class="linenos" data-linenos="16 "></span></a><span class="s">WITHOUT_CUSE=YES</span>
</span><span id="__span-51-17"><a id="__codelineno-51-17" name="__codelineno-51-17"></a><a href="#__codelineno-51-17"><span class="linenos" data-linenos="17 "></span></a><span class="s">WITHOUT_DEBUG_FILES=YES</span>
</span><span id="__span-51-18"><a id="__codelineno-51-18" name="__codelineno-51-18"></a><a href="#__codelineno-51-18"><span class="linenos" data-linenos="18 "></span></a><span class="s">WITH_DETECT_TZ_CHANGES=YES</span>
</span><span id="__span-51-19"><a id="__codelineno-51-19" name="__codelineno-51-19"></a><a href="#__codelineno-51-19"><span class="linenos" data-linenos="19 "></span></a><span class="s">WITHOUT_DOCCOMPRESS=YES</span>
</span><span id="__span-51-20"><a id="__codelineno-51-20" name="__codelineno-51-20"></a><a href="#__codelineno-51-20"><span class="linenos" data-linenos="20 "></span></a><span class="s">WITHOUT_FINGER=YES</span>
</span><span id="__span-51-21"><a id="__codelineno-51-21" name="__codelineno-51-21"></a><a href="#__codelineno-51-21"><span class="linenos" data-linenos="21 "></span></a><span class="s">WITHOUT_FLOPPY=YES</span>
</span><span id="__span-51-22"><a id="__codelineno-51-22" name="__codelineno-51-22"></a><a href="#__codelineno-51-22"><span class="linenos" data-linenos="22 "></span></a><span class="s">WITHOUT_FTP=YES</span>
</span><span id="__span-51-23"><a id="__codelineno-51-23" name="__codelineno-51-23"></a><a href="#__codelineno-51-23"><span class="linenos" data-linenos="23 "></span></a><span class="s">WITHOUT_GAMES=YES</span>
</span><span id="__span-51-24"><a id="__codelineno-51-24" name="__codelineno-51-24"></a><a href="#__codelineno-51-24"><span class="linenos" data-linenos="24 "></span></a><span class="s">WITHOUT_GPIO=YES</span>
</span><span id="__span-51-25"><a id="__codelineno-51-25" name="__codelineno-51-25"></a><a href="#__codelineno-51-25"><span class="linenos" data-linenos="25 "></span></a><span class="s">WITHOUT_HTML=YES</span>
</span><span id="__span-51-26"><a id="__codelineno-51-26" name="__codelineno-51-26"></a><a href="#__codelineno-51-26"><span class="linenos" data-linenos="26 "></span></a><span class="s">WITHOUT_HYPERV=YES</span>
</span><span id="__span-51-27"><a id="__codelineno-51-27" name="__codelineno-51-27"></a><a href="#__codelineno-51-27"><span class="linenos" data-linenos="27 "></span></a><span class="s">WITHOUT_INETD=YES</span>
</span><span id="__span-51-28"><a id="__codelineno-51-28" name="__codelineno-51-28"></a><a href="#__codelineno-51-28"><span class="linenos" data-linenos="28 "></span></a><span class="s">WITHOUT_KERBEROS=YES</span>
</span><span id="__span-51-29"><a id="__codelineno-51-29" name="__codelineno-51-29"></a><a href="#__codelineno-51-29"><span class="linenos" data-linenos="29 "></span></a><span class="s">WITH_KERNEL_RETPOLINE=YES</span>
</span><span id="__span-51-30"><a id="__codelineno-51-30" name="__codelineno-51-30"></a><a href="#__codelineno-51-30"><span class="linenos" data-linenos="30 "></span></a><span class="s">WITH_LLVM_BINUTILS=YES</span>
</span><span id="__span-51-31"><a id="__codelineno-51-31" name="__codelineno-51-31"></a><a href="#__codelineno-51-31"><span class="linenos" data-linenos="31 "></span></a><span class="s">WITHOUT_LLVM_TARGET_ALL=YES</span>
</span><span id="__span-51-32"><a id="__codelineno-51-32" name="__codelineno-51-32"></a><a href="#__codelineno-51-32"><span class="linenos" data-linenos="32 "></span></a><span class="s">WITH_LLVM_TARGET_AARCH64=YES</span>
</span><span id="__span-51-33"><a id="__codelineno-51-33" name="__codelineno-51-33"></a><a href="#__codelineno-51-33"><span class="linenos" data-linenos="33 "></span></a><span class="s">WITH_LLVM_TARGET_X86=YES</span>
</span><span id="__span-51-34"><a id="__codelineno-51-34" name="__codelineno-51-34"></a><a href="#__codelineno-51-34"><span class="linenos" data-linenos="34 "></span></a><span class="s">WITHOUT_LPR=YES</span>
</span><span id="__span-51-35"><a id="__codelineno-51-35" name="__codelineno-51-35"></a><a href="#__codelineno-51-35"><span class="linenos" data-linenos="35 "></span></a><span class="s">WITHOUT_MANCOMPRESS=YES</span>
</span><span id="__span-51-36"><a id="__codelineno-51-36" name="__codelineno-51-36"></a><a href="#__codelineno-51-36"><span class="linenos" data-linenos="36 "></span></a><span class="s">WITHOUT_NIS=YES</span>
</span><span id="__span-51-37"><a id="__codelineno-51-37" name="__codelineno-51-37"></a><a href="#__codelineno-51-37"><span class="linenos" data-linenos="37 "></span></a><span class="s">WITH_PIE=YES</span>
</span><span id="__span-51-38"><a id="__codelineno-51-38" name="__codelineno-51-38"></a><a href="#__codelineno-51-38"><span class="linenos" data-linenos="38 "></span></a><span class="s">WITHOUT_PMC=YES</span>
</span><span id="__span-51-39"><a id="__codelineno-51-39" name="__codelineno-51-39"></a><a href="#__codelineno-51-39"><span class="linenos" data-linenos="39 "></span></a><span class="s">WITHOUT_PPP=YES</span>
</span><span id="__span-51-40"><a id="__codelineno-51-40" name="__codelineno-51-40"></a><a href="#__codelineno-51-40"><span class="linenos" data-linenos="40 "></span></a><span class="s">WITHOUT_RADIUS_SUPPORT=YES</span>
</span><span id="__span-51-41"><a id="__codelineno-51-41" name="__codelineno-51-41"></a><a href="#__codelineno-51-41"><span class="linenos" data-linenos="41 "></span></a><span class="s">WITHOUT_RBOOTD=YES</span>
</span><span id="__span-51-42"><a id="__codelineno-51-42" name="__codelineno-51-42"></a><a href="#__codelineno-51-42"><span class="linenos" data-linenos="42 "></span></a><span class="s">WITH_REPRODUCIBLE_BUILD=YES</span>
</span><span id="__span-51-43"><a id="__codelineno-51-43" name="__codelineno-51-43"></a><a href="#__codelineno-51-43"><span class="linenos" data-linenos="43 "></span></a><span class="s">WITH_RETPOLINE=YES</span>
</span><span id="__span-51-44"><a id="__codelineno-51-44" name="__codelineno-51-44"></a><a href="#__codelineno-51-44"><span class="linenos" data-linenos="44 "></span></a><span class="s">WITHOUT_SENDMAIL=YES</span>
</span><span id="__span-51-45"><a id="__codelineno-51-45" name="__codelineno-51-45"></a><a href="#__codelineno-51-45"><span class="linenos" data-linenos="45 "></span></a><span class="s">WITHOUT_SHAREDOCS=YES</span>
</span><span id="__span-51-46"><a id="__codelineno-51-46" name="__codelineno-51-46"></a><a href="#__codelineno-51-46"><span class="linenos" data-linenos="46 "></span></a><span class="s">WITH_SORT_THREAD=YES</span>
</span><span id="__span-51-47"><a id="__codelineno-51-47" name="__codelineno-51-47"></a><a href="#__codelineno-51-47"><span class="linenos" data-linenos="47 "></span></a><span class="s">WITHOUT_TALK=YES</span>
</span><span id="__span-51-48"><a id="__codelineno-51-48" name="__codelineno-51-48"></a><a href="#__codelineno-51-48"><span class="linenos" data-linenos="48 "></span></a><span class="s">WITHOUT_TESTS=YES</span>
</span><span id="__span-51-49"><a id="__codelineno-51-49" name="__codelineno-51-49"></a><a href="#__codelineno-51-49"><span class="linenos" data-linenos="49 "></span></a><span class="s">WITHOUT_TFTP=YES</span>
</span><span id="__span-51-50"><a id="__codelineno-51-50" name="__codelineno-51-50"></a><a href="#__codelineno-51-50"><span class="linenos" data-linenos="50 "></span></a><span class="s">WITHOUT_WIRELESS=YES</span>
</span><span id="__span-51-51"><a id="__codelineno-51-51" name="__codelineno-51-51"></a><a href="#__codelineno-51-51"><span class="linenos" data-linenos="51 "></span></a><span class="s">WITH_ZONEINFO_LEAPSECONDS_SUPPORT=YES</span>
</span><span id="__span-51-52"><a id="__codelineno-51-52" name="__codelineno-51-52"></a><a href="#__codelineno-51-52"><span class="linenos" data-linenos="52 "></span></a>
</span><span id="__span-51-53"><a id="__codelineno-51-53" name="__codelineno-51-53"></a><a href="#__codelineno-51-53"><span class="linenos" data-linenos="53 "></span></a><span class="s">EOF</span>
</span></code></pre></div>
<h2 id="kernel-konfigurieren">Kernel konfigurieren<a class="headerlink" href="#kernel-konfigurieren" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Kernel Parameter in <code>/boot/loader.conf</code> setzen.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1"></a><a href="#__codelineno-52-1"><span class="linenos" data-linenos=" 1 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /boot/loader.conf</span>
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2"></a><a href="#__codelineno-52-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="s"># Loader options</span>
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3"></a><a href="#__codelineno-52-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="s">boot_verbose=&quot;YES&quot;</span>
</span><span id="__span-52-4"><a id="__codelineno-52-4" name="__codelineno-52-4"></a><a href="#__codelineno-52-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="s">verbose_loading=&quot;YES&quot;</span>
</span><span id="__span-52-5"><a id="__codelineno-52-5" name="__codelineno-52-5"></a><a href="#__codelineno-52-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="s">loader_logo=&quot;orb&quot;</span>
</span><span id="__span-52-6"><a id="__codelineno-52-6" name="__codelineno-52-6"></a><a href="#__codelineno-52-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-52-7"><a id="__codelineno-52-7" name="__codelineno-52-7"></a><a href="#__codelineno-52-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="s"># Microcode updates</span>
</span><span id="__span-52-8"><a id="__codelineno-52-8" name="__codelineno-52-8"></a><a href="#__codelineno-52-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="s">#cpu_microcode_load=&quot;YES&quot;</span>
</span><span id="__span-52-9"><a id="__codelineno-52-9" name="__codelineno-52-9"></a><a href="#__codelineno-52-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="s">#cpu_microcode_name=&quot;/boot/firmware/intel-ucode.bin&quot;</span>
</span><span id="__span-52-10"><a id="__codelineno-52-10" name="__codelineno-52-10"></a><a href="#__codelineno-52-10"><span class="linenos" data-linenos="10 "></span></a><span class="s">#cpu_microcode_name=&quot;/usr/local/share/cpucontrol/microcode_amd.bin&quot;</span>
</span><span id="__span-52-11"><a id="__codelineno-52-11" name="__codelineno-52-11"></a><a href="#__codelineno-52-11"><span class="linenos" data-linenos="11 "></span></a>
</span><span id="__span-52-12"><a id="__codelineno-52-12" name="__codelineno-52-12"></a><a href="#__codelineno-52-12"><span class="linenos" data-linenos="12 "></span></a><span class="s"># Kernel selection</span>
</span><span id="__span-52-13"><a id="__codelineno-52-13" name="__codelineno-52-13"></a><a href="#__codelineno-52-13"><span class="linenos" data-linenos="13 "></span></a><span class="s">#kernel=&quot;GENERIC&quot;</span>
</span><span id="__span-52-14"><a id="__codelineno-52-14" name="__codelineno-52-14"></a><a href="#__codelineno-52-14"><span class="linenos" data-linenos="14 "></span></a><span class="s">#kernels=&quot;GENERIC MYKERNEL&quot;</span>
</span><span id="__span-52-15"><a id="__codelineno-52-15" name="__codelineno-52-15"></a><a href="#__codelineno-52-15"><span class="linenos" data-linenos="15 "></span></a>
</span><span id="__span-52-16"><a id="__codelineno-52-16" name="__codelineno-52-16"></a><a href="#__codelineno-52-16"><span class="linenos" data-linenos="16 "></span></a><span class="s"># Kernel modules</span>
</span><span id="__span-52-17"><a id="__codelineno-52-17" name="__codelineno-52-17"></a><a href="#__codelineno-52-17"><span class="linenos" data-linenos="17 "></span></a><span class="s">amdtemp_load=&quot;YES&quot;</span>
</span><span id="__span-52-18"><a id="__codelineno-52-18" name="__codelineno-52-18"></a><a href="#__codelineno-52-18"><span class="linenos" data-linenos="18 "></span></a><span class="s">coretemp_load=&quot;YES&quot;</span>
</span><span id="__span-52-19"><a id="__codelineno-52-19" name="__codelineno-52-19"></a><a href="#__codelineno-52-19"><span class="linenos" data-linenos="19 "></span></a><span class="s">geom_mirror_load=&quot;YES&quot;</span>
</span><span id="__span-52-20"><a id="__codelineno-52-20" name="__codelineno-52-20"></a><a href="#__codelineno-52-20"><span class="linenos" data-linenos="20 "></span></a><span class="s">accf_http_load=&quot;YES&quot;</span>
</span><span id="__span-52-21"><a id="__codelineno-52-21" name="__codelineno-52-21"></a><a href="#__codelineno-52-21"><span class="linenos" data-linenos="21 "></span></a><span class="s">accf_data_load=&quot;YES&quot;</span>
</span><span id="__span-52-22"><a id="__codelineno-52-22" name="__codelineno-52-22"></a><a href="#__codelineno-52-22"><span class="linenos" data-linenos="22 "></span></a><span class="s">accf_dns_load=&quot;YES&quot;</span>
</span><span id="__span-52-23"><a id="__codelineno-52-23" name="__codelineno-52-23"></a><a href="#__codelineno-52-23"><span class="linenos" data-linenos="23 "></span></a>
</span><span id="__span-52-24"><a id="__codelineno-52-24" name="__codelineno-52-24"></a><a href="#__codelineno-52-24"><span class="linenos" data-linenos="24 "></span></a><span class="s"># Kernel parameters</span>
</span><span id="__span-52-25"><a id="__codelineno-52-25" name="__codelineno-52-25"></a><a href="#__codelineno-52-25"><span class="linenos" data-linenos="25 "></span></a><span class="s">#debug.acpi.disabled=&quot;thermal&quot;</span>
</span><span id="__span-52-26"><a id="__codelineno-52-26" name="__codelineno-52-26"></a><a href="#__codelineno-52-26"><span class="linenos" data-linenos="26 "></span></a><span class="s">security.bsd.stack_guard_page=&quot;1&quot;</span>
</span><span id="__span-52-27"><a id="__codelineno-52-27" name="__codelineno-52-27"></a><a href="#__codelineno-52-27"><span class="linenos" data-linenos="27 "></span></a><span class="s">security.bsd.allow_destructive_dtrace=&quot;0&quot;</span>
</span><span id="__span-52-28"><a id="__codelineno-52-28" name="__codelineno-52-28"></a><a href="#__codelineno-52-28"><span class="linenos" data-linenos="28 "></span></a><span class="s">kern.geom.label.disk_ident.enable=&quot;0&quot;</span>
</span><span id="__span-52-29"><a id="__codelineno-52-29" name="__codelineno-52-29"></a><a href="#__codelineno-52-29"><span class="linenos" data-linenos="29 "></span></a><span class="s">kern.geom.label.gptid.enable=&quot;0&quot;</span>
</span><span id="__span-52-30"><a id="__codelineno-52-30" name="__codelineno-52-30"></a><a href="#__codelineno-52-30"><span class="linenos" data-linenos="30 "></span></a><span class="s">kern.geom.label.gpt.enable=&quot;1&quot;</span>
</span><span id="__span-52-31"><a id="__codelineno-52-31" name="__codelineno-52-31"></a><a href="#__codelineno-52-31"><span class="linenos" data-linenos="31 "></span></a><span class="s">kern.maxproc=&quot;65536&quot;</span>
</span><span id="__span-52-32"><a id="__codelineno-52-32" name="__codelineno-52-32"></a><a href="#__codelineno-52-32"><span class="linenos" data-linenos="32 "></span></a><span class="s">kern.maxusers=&quot;512&quot;</span>
</span><span id="__span-52-33"><a id="__codelineno-52-33" name="__codelineno-52-33"></a><a href="#__codelineno-52-33"><span class="linenos" data-linenos="33 "></span></a><span class="s">kern.ipc.semmni=&quot;256&quot;</span>
</span><span id="__span-52-34"><a id="__codelineno-52-34" name="__codelineno-52-34"></a><a href="#__codelineno-52-34"><span class="linenos" data-linenos="34 "></span></a><span class="s">kern.ipc.semmns=&quot;512&quot;</span>
</span><span id="__span-52-35"><a id="__codelineno-52-35" name="__codelineno-52-35"></a><a href="#__codelineno-52-35"><span class="linenos" data-linenos="35 "></span></a><span class="s">kern.ipc.semmnu=&quot;256&quot;</span>
</span><span id="__span-52-36"><a id="__codelineno-52-36" name="__codelineno-52-36"></a><a href="#__codelineno-52-36"><span class="linenos" data-linenos="36 "></span></a><span class="s">kern.ipc.shmmax=&quot;2147483648&quot;</span>
</span><span id="__span-52-37"><a id="__codelineno-52-37" name="__codelineno-52-37"></a><a href="#__codelineno-52-37"><span class="linenos" data-linenos="37 "></span></a><span class="s">kern.msgbufsize=&quot;2097152&quot;</span>
</span><span id="__span-52-38"><a id="__codelineno-52-38" name="__codelineno-52-38"></a><a href="#__codelineno-52-38"><span class="linenos" data-linenos="38 "></span></a><span class="s">kern.random.fortuna.minpoolsize=&quot;256&quot;</span>
</span><span id="__span-52-39"><a id="__codelineno-52-39" name="__codelineno-52-39"></a><a href="#__codelineno-52-39"><span class="linenos" data-linenos="39 "></span></a><span class="s">kern.sync_on_panic=&quot;0&quot;</span>
</span><span id="__span-52-40"><a id="__codelineno-52-40" name="__codelineno-52-40"></a><a href="#__codelineno-52-40"><span class="linenos" data-linenos="40 "></span></a><span class="s">machdep.hyperthreading_allowed=&quot;0&quot;</span>
</span><span id="__span-52-41"><a id="__codelineno-52-41" name="__codelineno-52-41"></a><a href="#__codelineno-52-41"><span class="linenos" data-linenos="41 "></span></a><span class="s">net.inet.tcp.hostcache.enable=&quot;0&quot;</span>
</span><span id="__span-52-42"><a id="__codelineno-52-42" name="__codelineno-52-42"></a><a href="#__codelineno-52-42"><span class="linenos" data-linenos="42 "></span></a><span class="s">net.inet.tcp.hostcache.cachelimit=&quot;0&quot;</span>
</span><span id="__span-52-43"><a id="__codelineno-52-43" name="__codelineno-52-43"></a><a href="#__codelineno-52-43"><span class="linenos" data-linenos="43 "></span></a><span class="s">net.inet.tcp.soreceive_stream=&quot;1&quot;</span>
</span><span id="__span-52-44"><a id="__codelineno-52-44" name="__codelineno-52-44"></a><a href="#__codelineno-52-44"><span class="linenos" data-linenos="44 "></span></a><span class="s">net.inet.tcp.syncache.hashsize=&quot;1024&quot;</span>
</span><span id="__span-52-45"><a id="__codelineno-52-45" name="__codelineno-52-45"></a><a href="#__codelineno-52-45"><span class="linenos" data-linenos="45 "></span></a><span class="s">net.inet.tcp.syncache.bucketlimit=&quot;100&quot;</span>
</span><span id="__span-52-46"><a id="__codelineno-52-46" name="__codelineno-52-46"></a><a href="#__codelineno-52-46"><span class="linenos" data-linenos="46 "></span></a><span class="s">net.inet.tcp.tcbhashsize=&quot;524288&quot;</span>
</span><span id="__span-52-47"><a id="__codelineno-52-47" name="__codelineno-52-47"></a><a href="#__codelineno-52-47"><span class="linenos" data-linenos="47 "></span></a><span class="s">net.isr.bindthreads=&quot;1&quot;</span>
</span><span id="__span-52-48"><a id="__codelineno-52-48" name="__codelineno-52-48"></a><a href="#__codelineno-52-48"><span class="linenos" data-linenos="48 "></span></a><span class="s">net.isr.maxthreads=&quot;-1&quot;</span>
</span><span id="__span-52-49"><a id="__codelineno-52-49" name="__codelineno-52-49"></a><a href="#__codelineno-52-49"><span class="linenos" data-linenos="49 "></span></a><span class="s">net.isr.defaultqlimit=&quot;2048&quot;</span>
</span><span id="__span-52-50"><a id="__codelineno-52-50" name="__codelineno-52-50"></a><a href="#__codelineno-52-50"><span class="linenos" data-linenos="50 "></span></a><span class="s">net.link.ifqmaxlen=&quot;2048&quot;</span>
</span><span id="__span-52-51"><a id="__codelineno-52-51" name="__codelineno-52-51"></a><a href="#__codelineno-52-51"><span class="linenos" data-linenos="51 "></span></a>
</span><span id="__span-52-52"><a id="__codelineno-52-52" name="__codelineno-52-52"></a><a href="#__codelineno-52-52"><span class="linenos" data-linenos="52 "></span></a><span class="s"># PF options</span>
</span><span id="__span-52-53"><a id="__codelineno-52-53" name="__codelineno-52-53"></a><a href="#__codelineno-52-53"><span class="linenos" data-linenos="53 "></span></a><span class="s">pf_load=&quot;YES&quot;</span>
</span><span id="__span-52-54"><a id="__codelineno-52-54" name="__codelineno-52-54"></a><a href="#__codelineno-52-54"><span class="linenos" data-linenos="54 "></span></a><span class="s">pflog_load=&quot;YES&quot;</span>
</span><span id="__span-52-55"><a id="__codelineno-52-55" name="__codelineno-52-55"></a><a href="#__codelineno-52-55"><span class="linenos" data-linenos="55 "></span></a><span class="s">net.pf.source_nodes_hashsize=&quot;1048576&quot;</span>
</span><span id="__span-52-56"><a id="__codelineno-52-56" name="__codelineno-52-56"></a><a href="#__codelineno-52-56"><span class="linenos" data-linenos="56 "></span></a>
</span><span id="__span-52-57"><a id="__codelineno-52-57" name="__codelineno-52-57"></a><a href="#__codelineno-52-57"><span class="linenos" data-linenos="57 "></span></a><span class="s"># ZFS options</span>
</span><span id="__span-52-58"><a id="__codelineno-52-58" name="__codelineno-52-58"></a><a href="#__codelineno-52-58"><span class="linenos" data-linenos="58 "></span></a><span class="s">zfs_load=&quot;YES&quot;</span>
</span><span id="__span-52-59"><a id="__codelineno-52-59" name="__codelineno-52-59"></a><a href="#__codelineno-52-59"><span class="linenos" data-linenos="59 "></span></a><span class="s">vfs.zfs.dirty_data_max_max=&quot;17179869184&quot;</span>
</span><span id="__span-52-60"><a id="__codelineno-52-60" name="__codelineno-52-60"></a><a href="#__codelineno-52-60"><span class="linenos" data-linenos="60 "></span></a><span class="s">vfs.zfs.dirty_data_max_percent=&quot;25&quot;</span>
</span><span id="__span-52-61"><a id="__codelineno-52-61" name="__codelineno-52-61"></a><a href="#__codelineno-52-61"><span class="linenos" data-linenos="61 "></span></a>
</span><span id="__span-52-62"><a id="__codelineno-52-62" name="__codelineno-52-62"></a><a href="#__codelineno-52-62"><span class="linenos" data-linenos="62 "></span></a><span class="s"># ROOTFS</span>
</span><span id="__span-52-63"><a id="__codelineno-52-63" name="__codelineno-52-63"></a><a href="#__codelineno-52-63"><span class="linenos" data-linenos="63 "></span></a><span class="s">#vfs.root.mountfrom=&quot;zfs:zroot&quot;</span>
</span><span id="__span-52-64"><a id="__codelineno-52-64" name="__codelineno-52-64"></a><a href="#__codelineno-52-64"><span class="linenos" data-linenos="64 "></span></a>
</span><span id="__span-52-65"><a id="__codelineno-52-65" name="__codelineno-52-65"></a><a href="#__codelineno-52-65"><span class="linenos" data-linenos="65 "></span></a><span class="s">EOF</span>
</span></code></pre></div>
<h2 id="packet-filter-pf-einrichten">Packet Filter (PF) einrichten<a class="headerlink" href="#packet-filter-pf-einrichten" title="Anchor link to this section for reference">⚓︎</a></h2>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1"></a><a href="#__codelineno-53-1"><span class="linenos" data-linenos="  1 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /etc/pf.conf</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2"></a><a href="#__codelineno-53-2"><span class="linenos" data-linenos="  2 "></span></a><span class="s">##### MACROS #####</span>
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3"></a><a href="#__codelineno-53-3"><span class="linenos" data-linenos="  3 "></span></a><span class="s">ext_if = &quot;{ DEFAULT }&quot;</span>
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4"></a><a href="#__codelineno-53-4"><span class="linenos" data-linenos="  4 "></span></a>
</span><span id="__span-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5"></a><a href="#__codelineno-53-5"><span class="linenos" data-linenos="  5 "></span></a><span class="s">##### TABLES #####</span>
</span><span id="__span-53-6"><a id="__codelineno-53-6" name="__codelineno-53-6"></a><a href="#__codelineno-53-6"><span class="linenos" data-linenos="  6 "></span></a><span class="s">table &lt;internal&gt; persist counters file &quot;/etc/pf.internal&quot;</span>
</span><span id="__span-53-7"><a id="__codelineno-53-7" name="__codelineno-53-7"></a><a href="#__codelineno-53-7"><span class="linenos" data-linenos="  7 "></span></a><span class="s">table &lt;badhosts_drop&gt; persist counters file &quot;/etc/pf.badhosts_drop&quot;</span>
</span><span id="__span-53-8"><a id="__codelineno-53-8" name="__codelineno-53-8"></a><a href="#__codelineno-53-8"><span class="linenos" data-linenos="  8 "></span></a><span class="s">table &lt;badhosts_torp&gt; persist counters file &quot;/etc/pf.badhosts_torp&quot;</span>
</span><span id="__span-53-9"><a id="__codelineno-53-9" name="__codelineno-53-9"></a><a href="#__codelineno-53-9"><span class="linenos" data-linenos="  9 "></span></a><span class="s">table &lt;badhosts_misc&gt; persist counters file &quot;/etc/pf.badhosts_misc&quot;</span>
</span><span id="__span-53-10"><a id="__codelineno-53-10" name="__codelineno-53-10"></a><a href="#__codelineno-53-10"><span class="linenos" data-linenos=" 10 "></span></a><span class="s">table &lt;badhosts_priv&gt; persist counters file &quot;/etc/pf.badhosts_priv&quot;</span>
</span><span id="__span-53-11"><a id="__codelineno-53-11" name="__codelineno-53-11"></a><a href="#__codelineno-53-11"><span class="linenos" data-linenos=" 11 "></span></a><span class="s">table &lt;badhosts_sshd&gt; persist counters file &quot;/etc/pf.badhosts_sshd&quot;</span>
</span><span id="__span-53-12"><a id="__codelineno-53-12" name="__codelineno-53-12"></a><a href="#__codelineno-53-12"><span class="linenos" data-linenos=" 12 "></span></a><span class="s">table &lt;badhosts_mail&gt; persist counters file &quot;/etc/pf.badhosts_mail&quot;</span>
</span><span id="__span-53-13"><a id="__codelineno-53-13" name="__codelineno-53-13"></a><a href="#__codelineno-53-13"><span class="linenos" data-linenos=" 13 "></span></a><span class="s">table &lt;badhosts_http&gt; persist counters file &quot;/etc/pf.badhosts_http&quot;</span>
</span><span id="__span-53-14"><a id="__codelineno-53-14" name="__codelineno-53-14"></a><a href="#__codelineno-53-14"><span class="linenos" data-linenos=" 14 "></span></a>
</span><span id="__span-53-15"><a id="__codelineno-53-15" name="__codelineno-53-15"></a><a href="#__codelineno-53-15"><span class="linenos" data-linenos=" 15 "></span></a><span class="s">##### OPTIONS #####</span>
</span><span id="__span-53-16"><a id="__codelineno-53-16" name="__codelineno-53-16"></a><a href="#__codelineno-53-16"><span class="linenos" data-linenos=" 16 "></span></a><span class="s">set skip on lo0</span>
</span><span id="__span-53-17"><a id="__codelineno-53-17" name="__codelineno-53-17"></a><a href="#__codelineno-53-17"><span class="linenos" data-linenos=" 17 "></span></a><span class="s">set debug urgent</span>
</span><span id="__span-53-18"><a id="__codelineno-53-18" name="__codelineno-53-18"></a><a href="#__codelineno-53-18"><span class="linenos" data-linenos=" 18 "></span></a><span class="s">set loginterface DEFAULT</span>
</span><span id="__span-53-19"><a id="__codelineno-53-19" name="__codelineno-53-19"></a><a href="#__codelineno-53-19"><span class="linenos" data-linenos=" 19 "></span></a><span class="s">set block-policy return</span>
</span><span id="__span-53-20"><a id="__codelineno-53-20" name="__codelineno-53-20"></a><a href="#__codelineno-53-20"><span class="linenos" data-linenos=" 20 "></span></a><span class="s">set optimization aggressive</span>
</span><span id="__span-53-21"><a id="__codelineno-53-21" name="__codelineno-53-21"></a><a href="#__codelineno-53-21"><span class="linenos" data-linenos=" 21 "></span></a><span class="s">set ruleset-optimization none</span>
</span><span id="__span-53-22"><a id="__codelineno-53-22" name="__codelineno-53-22"></a><a href="#__codelineno-53-22"><span class="linenos" data-linenos=" 22 "></span></a><span class="s">set timeout { frag 5, interval 2, tcp.established 3600, adaptive.start 60000, adaptive.end 120000 }</span>
</span><span id="__span-53-23"><a id="__codelineno-53-23" name="__codelineno-53-23"></a><a href="#__codelineno-53-23"><span class="linenos" data-linenos=" 23 "></span></a><span class="s">set timeout { tcp.first 5, tcp.opening 5, tcp.closing 5, tcp.finwait 5, tcp.closed 5, tcp.tsdiff 5 }</span>
</span><span id="__span-53-24"><a id="__codelineno-53-24" name="__codelineno-53-24"></a><a href="#__codelineno-53-24"><span class="linenos" data-linenos=" 24 "></span></a><span class="s">set timeout { udp.first 5, udp.single 5, udp.multiple 5 }</span>
</span><span id="__span-53-25"><a id="__codelineno-53-25" name="__codelineno-53-25"></a><a href="#__codelineno-53-25"><span class="linenos" data-linenos=" 25 "></span></a><span class="s">set timeout { icmp.first 5, icmp.error 5 }</span>
</span><span id="__span-53-26"><a id="__codelineno-53-26" name="__codelineno-53-26"></a><a href="#__codelineno-53-26"><span class="linenos" data-linenos=" 26 "></span></a><span class="s">set timeout { other.first 5, other.single 5, other.multiple 5 }</span>
</span><span id="__span-53-27"><a id="__codelineno-53-27" name="__codelineno-53-27"></a><a href="#__codelineno-53-27"><span class="linenos" data-linenos=" 27 "></span></a><span class="s">set limit { states 1000000, src-nodes 1000000, frags 500000, table-entries 20000000 }</span>
</span><span id="__span-53-28"><a id="__codelineno-53-28" name="__codelineno-53-28"></a><a href="#__codelineno-53-28"><span class="linenos" data-linenos=" 28 "></span></a><span class="s">set state-policy if-bound</span>
</span><span id="__span-53-29"><a id="__codelineno-53-29" name="__codelineno-53-29"></a><a href="#__codelineno-53-29"><span class="linenos" data-linenos=" 29 "></span></a><span class="s">set hostid 100</span>
</span><span id="__span-53-30"><a id="__codelineno-53-30" name="__codelineno-53-30"></a><a href="#__codelineno-53-30"><span class="linenos" data-linenos=" 30 "></span></a>
</span><span id="__span-53-31"><a id="__codelineno-53-31" name="__codelineno-53-31"></a><a href="#__codelineno-53-31"><span class="linenos" data-linenos=" 31 "></span></a><span class="s">##### NORMALIZATION #####</span>
</span><span id="__span-53-32"><a id="__codelineno-53-32" name="__codelineno-53-32"></a><a href="#__codelineno-53-32"><span class="linenos" data-linenos=" 32 "></span></a><span class="s">scrub on $ext_if all random-id fragment reassemble no-df max-mss 1440</span>
</span><span id="__span-53-33"><a id="__codelineno-53-33" name="__codelineno-53-33"></a><a href="#__codelineno-53-33"><span class="linenos" data-linenos=" 33 "></span></a><span class="s">antispoof for $ext_if</span>
</span><span id="__span-53-34"><a id="__codelineno-53-34" name="__codelineno-53-34"></a><a href="#__codelineno-53-34"><span class="linenos" data-linenos=" 34 "></span></a>
</span><span id="__span-53-35"><a id="__codelineno-53-35" name="__codelineno-53-35"></a><a href="#__codelineno-53-35"><span class="linenos" data-linenos=" 35 "></span></a><span class="s">##### QUEUEING #####</span>
</span><span id="__span-53-36"><a id="__codelineno-53-36" name="__codelineno-53-36"></a><a href="#__codelineno-53-36"><span class="linenos" data-linenos=" 36 "></span></a>
</span><span id="__span-53-37"><a id="__codelineno-53-37" name="__codelineno-53-37"></a><a href="#__codelineno-53-37"><span class="linenos" data-linenos=" 37 "></span></a><span class="s">##### TRANSLATION #####</span>
</span><span id="__span-53-38"><a id="__codelineno-53-38" name="__codelineno-53-38"></a><a href="#__codelineno-53-38"><span class="linenos" data-linenos=" 38 "></span></a>
</span><span id="__span-53-39"><a id="__codelineno-53-39" name="__codelineno-53-39"></a><a href="#__codelineno-53-39"><span class="linenos" data-linenos=" 39 "></span></a><span class="s">##### FILTERING #####</span>
</span><span id="__span-53-40"><a id="__codelineno-53-40" name="__codelineno-53-40"></a><a href="#__codelineno-53-40"><span class="linenos" data-linenos=" 40 "></span></a><span class="s">pass   in log quick on $ext_if                       from &lt;internal&gt; to &lt;internal&gt;</span>
</span><span id="__span-53-41"><a id="__codelineno-53-41" name="__codelineno-53-41"></a><a href="#__codelineno-53-41"><span class="linenos" data-linenos=" 41 "></span></a>
</span><span id="__span-53-42"><a id="__codelineno-53-42" name="__codelineno-53-42"></a><a href="#__codelineno-53-42"><span class="linenos" data-linenos=" 42 "></span></a><span class="s">block  in log quick on $ext_if                       from &lt;badhosts_drop&gt; to any</span>
</span><span id="__span-53-43"><a id="__codelineno-53-43" name="__codelineno-53-43"></a><a href="#__codelineno-53-43"><span class="linenos" data-linenos=" 43 "></span></a><span class="s">block  in log quick on $ext_if                       from &lt;badhosts_torp&gt; to any</span>
</span><span id="__span-53-44"><a id="__codelineno-53-44" name="__codelineno-53-44"></a><a href="#__codelineno-53-44"><span class="linenos" data-linenos=" 44 "></span></a><span class="s">block  in log quick on $ext_if                       from &lt;badhosts_misc&gt; to any</span>
</span><span id="__span-53-45"><a id="__codelineno-53-45" name="__codelineno-53-45"></a><a href="#__codelineno-53-45"><span class="linenos" data-linenos=" 45 "></span></a><span class="s">block  in log quick on $ext_if                       from &lt;badhosts_priv&gt; to any</span>
</span><span id="__span-53-46"><a id="__codelineno-53-46" name="__codelineno-53-46"></a><a href="#__codelineno-53-46"><span class="linenos" data-linenos=" 46 "></span></a><span class="s">block  in log quick on $ext_if                       from &lt;badhosts_sshd&gt; to any</span>
</span><span id="__span-53-47"><a id="__codelineno-53-47" name="__codelineno-53-47"></a><a href="#__codelineno-53-47"><span class="linenos" data-linenos=" 47 "></span></a><span class="s">block  in log quick on $ext_if                       from &lt;badhosts_mail&gt; to any</span>
</span><span id="__span-53-48"><a id="__codelineno-53-48" name="__codelineno-53-48"></a><a href="#__codelineno-53-48"><span class="linenos" data-linenos=" 48 "></span></a><span class="s">block  in log quick on $ext_if                       from &lt;badhosts_http&gt; to any</span>
</span><span id="__span-53-49"><a id="__codelineno-53-49" name="__codelineno-53-49"></a><a href="#__codelineno-53-49"><span class="linenos" data-linenos=" 49 "></span></a>
</span><span id="__span-53-50"><a id="__codelineno-53-50" name="__codelineno-53-50"></a><a href="#__codelineno-53-50"><span class="linenos" data-linenos=" 50 "></span></a><span class="s">block  in log       on $ext_if                       from any to any</span>
</span><span id="__span-53-51"><a id="__codelineno-53-51" name="__codelineno-53-51"></a><a href="#__codelineno-53-51"><span class="linenos" data-linenos=" 51 "></span></a>
</span><span id="__span-53-52"><a id="__codelineno-53-52" name="__codelineno-53-52"></a><a href="#__codelineno-53-52"><span class="linenos" data-linenos=" 52 "></span></a><span class="s">pass   in     quick on $ext_if inet  proto icmp      from any to any                     keep state</span>
</span><span id="__span-53-53"><a id="__codelineno-53-53" name="__codelineno-53-53"></a><a href="#__codelineno-53-53"><span class="linenos" data-linenos=" 53 "></span></a><span class="s">pass   in     quick on $ext_if inet  proto udp       from any to any port 67             keep state</span>
</span><span id="__span-53-54"><a id="__codelineno-53-54" name="__codelineno-53-54"></a><a href="#__codelineno-53-54"><span class="linenos" data-linenos=" 54 "></span></a><span class="s">pass   in     quick on $ext_if inet  proto udp       from any to any port 68             keep state</span>
</span><span id="__span-53-55"><a id="__codelineno-53-55" name="__codelineno-53-55"></a><a href="#__codelineno-53-55"><span class="linenos" data-linenos=" 55 "></span></a><span class="s">pass   in     quick on $ext_if inet  proto udp       from any to any port 53             keep state</span>
</span><span id="__span-53-56"><a id="__codelineno-53-56" name="__codelineno-53-56"></a><a href="#__codelineno-53-56"><span class="linenos" data-linenos=" 56 "></span></a><span class="s">pass   in     quick on $ext_if inet  proto udp       from any to any port 123            keep state</span>
</span><span id="__span-53-57"><a id="__codelineno-53-57" name="__codelineno-53-57"></a><a href="#__codelineno-53-57"><span class="linenos" data-linenos=" 57 "></span></a><span class="s">pass   in     quick on $ext_if inet  proto tcp       from any to any port 53             modulate state</span>
</span><span id="__span-53-58"><a id="__codelineno-53-58" name="__codelineno-53-58"></a><a href="#__codelineno-53-58"><span class="linenos" data-linenos=" 58 "></span></a><span class="s">pass   in     quick on $ext_if inet  proto tcp       from any to any port 853            modulate state</span>
</span><span id="__span-53-59"><a id="__codelineno-53-59" name="__codelineno-53-59"></a><a href="#__codelineno-53-59"><span class="linenos" data-linenos=" 59 "></span></a><span class="s">pass   in     quick on $ext_if inet  proto tcp       from any to any port 80             modulate state (max  500, source-track rule, max-src-conn 500, max-src-nodes 500, max-src-conn-rate 250/30, overload &lt;badhosts_http&gt; flush global)</span>
</span><span id="__span-53-60"><a id="__codelineno-53-60" name="__codelineno-53-60"></a><a href="#__codelineno-53-60"><span class="linenos" data-linenos=" 60 "></span></a><span class="s">pass   in     quick on $ext_if inet  proto tcp       from any to any port 443            modulate state (max  500, source-track rule, max-src-conn 500, max-src-nodes 500, max-src-conn-rate 250/30, overload &lt;badhosts_http&gt; flush global)</span>
</span><span id="__span-53-61"><a id="__codelineno-53-61" name="__codelineno-53-61"></a><a href="#__codelineno-53-61"><span class="linenos" data-linenos=" 61 "></span></a><span class="s">pass   in     quick on $ext_if inet  proto tcp       from any to any port 8080           modulate state (max  500, source-track rule, max-src-conn 500, max-src-nodes 500, max-src-conn-rate 250/30, overload &lt;badhosts_http&gt; flush global)</span>
</span><span id="__span-53-62"><a id="__codelineno-53-62" name="__codelineno-53-62"></a><a href="#__codelineno-53-62"><span class="linenos" data-linenos=" 62 "></span></a><span class="s">pass   in     quick on $ext_if inet  proto tcp       from any to any port 8443           modulate state (max  500, source-track rule, max-src-conn 500, max-src-nodes 500, max-src-conn-rate 250/30, overload &lt;badhosts_http&gt; flush global)</span>
</span><span id="__span-53-63"><a id="__codelineno-53-63" name="__codelineno-53-63"></a><a href="#__codelineno-53-63"><span class="linenos" data-linenos=" 63 "></span></a><span class="s">pass   in     quick on $ext_if inet  proto tcp       from any to any port 25             modulate state (max  200, source-track rule, max-src-conn 200, max-src-nodes 200, max-src-conn-rate 100/30, overload &lt;badhosts_mail&gt; flush global)</span>
</span><span id="__span-53-64"><a id="__codelineno-53-64" name="__codelineno-53-64"></a><a href="#__codelineno-53-64"><span class="linenos" data-linenos=" 64 "></span></a><span class="s">pass   in     quick on $ext_if inet  proto tcp       from any to any port 465            modulate state (max  100, source-track rule, max-src-conn 100, max-src-nodes 100, max-src-conn-rate  50/30, overload &lt;badhosts_mail&gt; flush global)</span>
</span><span id="__span-53-65"><a id="__codelineno-53-65" name="__codelineno-53-65"></a><a href="#__codelineno-53-65"><span class="linenos" data-linenos=" 65 "></span></a><span class="s">pass   in     quick on $ext_if inet  proto tcp       from any to any port 587            modulate state (max  100, source-track rule, max-src-conn 100, max-src-nodes 100, max-src-conn-rate  50/30, overload &lt;badhosts_mail&gt; flush global)</span>
</span><span id="__span-53-66"><a id="__codelineno-53-66" name="__codelineno-53-66"></a><a href="#__codelineno-53-66"><span class="linenos" data-linenos=" 66 "></span></a><span class="s">pass   in     quick on $ext_if inet  proto tcp       from any to any port 993            modulate state (max  100, source-track rule, max-src-conn 100, max-src-nodes 100, max-src-conn-rate  50/30, overload &lt;badhosts_mail&gt; flush global)</span>
</span><span id="__span-53-67"><a id="__codelineno-53-67" name="__codelineno-53-67"></a><a href="#__codelineno-53-67"><span class="linenos" data-linenos=" 67 "></span></a><span class="s">pass   in     quick on $ext_if inet  proto tcp       from any to any port 22             modulate state (max   25, source-track rule, max-src-conn  25, max-src-nodes  25, max-src-conn-rate  5/300, overload &lt;badhosts_sshd&gt; flush global)</span>
</span><span id="__span-53-68"><a id="__codelineno-53-68" name="__codelineno-53-68"></a><a href="#__codelineno-53-68"><span class="linenos" data-linenos=" 68 "></span></a><span class="s">pass   in     quick on $ext_if inet  proto tcp       from any to any port 2222           modulate state (max   25, source-track rule, max-src-conn  25, max-src-nodes  25, max-src-conn-rate  5/300, overload &lt;badhosts_sshd&gt; flush global)</span>
</span><span id="__span-53-69"><a id="__codelineno-53-69" name="__codelineno-53-69"></a><a href="#__codelineno-53-69"><span class="linenos" data-linenos=" 69 "></span></a>
</span><span id="__span-53-70"><a id="__codelineno-53-70" name="__codelineno-53-70"></a><a href="#__codelineno-53-70"><span class="linenos" data-linenos=" 70 "></span></a><span class="s">pass   in     quick on $ext_if inet6 proto icmp6     from any to any                     keep state</span>
</span><span id="__span-53-71"><a id="__codelineno-53-71" name="__codelineno-53-71"></a><a href="#__codelineno-53-71"><span class="linenos" data-linenos=" 71 "></span></a><span class="s">pass   in     quick on $ext_if inet6 proto udp       from any to any port 546            keep state</span>
</span><span id="__span-53-72"><a id="__codelineno-53-72" name="__codelineno-53-72"></a><a href="#__codelineno-53-72"><span class="linenos" data-linenos=" 72 "></span></a><span class="s">pass   in     quick on $ext_if inet6 proto udp       from any to any port 547            keep state</span>
</span><span id="__span-53-73"><a id="__codelineno-53-73" name="__codelineno-53-73"></a><a href="#__codelineno-53-73"><span class="linenos" data-linenos=" 73 "></span></a><span class="s">pass   in     quick on $ext_if inet6 proto udp       from any to any port 53             keep state</span>
</span><span id="__span-53-74"><a id="__codelineno-53-74" name="__codelineno-53-74"></a><a href="#__codelineno-53-74"><span class="linenos" data-linenos=" 74 "></span></a><span class="s">pass   in     quick on $ext_if inet6 proto udp       from any to any port 123            keep state</span>
</span><span id="__span-53-75"><a id="__codelineno-53-75" name="__codelineno-53-75"></a><a href="#__codelineno-53-75"><span class="linenos" data-linenos=" 75 "></span></a><span class="s">pass   in     quick on $ext_if inet6 proto tcp       from any to any port 53             modulate state</span>
</span><span id="__span-53-76"><a id="__codelineno-53-76" name="__codelineno-53-76"></a><a href="#__codelineno-53-76"><span class="linenos" data-linenos=" 76 "></span></a><span class="s">pass   in     quick on $ext_if inet6 proto tcp       from any to any port 853            modulate state</span>
</span><span id="__span-53-77"><a id="__codelineno-53-77" name="__codelineno-53-77"></a><a href="#__codelineno-53-77"><span class="linenos" data-linenos=" 77 "></span></a><span class="s">pass   in     quick on $ext_if inet6 proto tcp       from any to any port 80             modulate state (max  500, source-track rule, max-src-conn 500, max-src-nodes 500, max-src-conn-rate 250/30, overload &lt;badhosts_http&gt; flush global)</span>
</span><span id="__span-53-78"><a id="__codelineno-53-78" name="__codelineno-53-78"></a><a href="#__codelineno-53-78"><span class="linenos" data-linenos=" 78 "></span></a><span class="s">pass   in     quick on $ext_if inet6 proto tcp       from any to any port 443            modulate state (max  500, source-track rule, max-src-conn 500, max-src-nodes 500, max-src-conn-rate 250/30, overload &lt;badhosts_http&gt; flush global)</span>
</span><span id="__span-53-79"><a id="__codelineno-53-79" name="__codelineno-53-79"></a><a href="#__codelineno-53-79"><span class="linenos" data-linenos=" 79 "></span></a><span class="s">pass   in     quick on $ext_if inet6 proto tcp       from any to any port 8080           modulate state (max  500, source-track rule, max-src-conn 500, max-src-nodes 500, max-src-conn-rate 250/30, overload &lt;badhosts_http&gt; flush global)</span>
</span><span id="__span-53-80"><a id="__codelineno-53-80" name="__codelineno-53-80"></a><a href="#__codelineno-53-80"><span class="linenos" data-linenos=" 80 "></span></a><span class="s">pass   in     quick on $ext_if inet6 proto tcp       from any to any port 8443           modulate state (max  500, source-track rule, max-src-conn 500, max-src-nodes 500, max-src-conn-rate 250/30, overload &lt;badhosts_http&gt; flush global)</span>
</span><span id="__span-53-81"><a id="__codelineno-53-81" name="__codelineno-53-81"></a><a href="#__codelineno-53-81"><span class="linenos" data-linenos=" 81 "></span></a><span class="s">pass   in     quick on $ext_if inet6 proto tcp       from any to any port 25             modulate state (max  200, source-track rule, max-src-conn 200, max-src-nodes 200, max-src-conn-rate 100/30, overload &lt;badhosts_mail&gt; flush global)</span>
</span><span id="__span-53-82"><a id="__codelineno-53-82" name="__codelineno-53-82"></a><a href="#__codelineno-53-82"><span class="linenos" data-linenos=" 82 "></span></a><span class="s">pass   in     quick on $ext_if inet6 proto tcp       from any to any port 465            modulate state (max  100, source-track rule, max-src-conn 100, max-src-nodes 100, max-src-conn-rate  50/30, overload &lt;badhosts_mail&gt; flush global)</span>
</span><span id="__span-53-83"><a id="__codelineno-53-83" name="__codelineno-53-83"></a><a href="#__codelineno-53-83"><span class="linenos" data-linenos=" 83 "></span></a><span class="s">pass   in     quick on $ext_if inet6 proto tcp       from any to any port 587            modulate state (max  100, source-track rule, max-src-conn 100, max-src-nodes 100, max-src-conn-rate  50/30, overload &lt;badhosts_mail&gt; flush global)</span>
</span><span id="__span-53-84"><a id="__codelineno-53-84" name="__codelineno-53-84"></a><a href="#__codelineno-53-84"><span class="linenos" data-linenos=" 84 "></span></a><span class="s">pass   in     quick on $ext_if inet6 proto tcp       from any to any port 993            modulate state (max  100, source-track rule, max-src-conn 100, max-src-nodes 100, max-src-conn-rate  50/30, overload &lt;badhosts_mail&gt; flush global)</span>
</span><span id="__span-53-85"><a id="__codelineno-53-85" name="__codelineno-53-85"></a><a href="#__codelineno-53-85"><span class="linenos" data-linenos=" 85 "></span></a><span class="s">pass   in     quick on $ext_if inet6 proto tcp       from any to any port 22             modulate state (max   25, source-track rule, max-src-conn  25, max-src-nodes  25, max-src-conn-rate  5/300, overload &lt;badhosts_sshd&gt; flush global)</span>
</span><span id="__span-53-86"><a id="__codelineno-53-86" name="__codelineno-53-86"></a><a href="#__codelineno-53-86"><span class="linenos" data-linenos=" 86 "></span></a><span class="s">pass   in     quick on $ext_if inet6 proto tcp       from any to any port 2222           modulate state (max   25, source-track rule, max-src-conn  25, max-src-nodes  25, max-src-conn-rate  5/300, overload &lt;badhosts_sshd&gt; flush global)</span>
</span><span id="__span-53-87"><a id="__codelineno-53-87" name="__codelineno-53-87"></a><a href="#__codelineno-53-87"><span class="linenos" data-linenos=" 87 "></span></a>
</span><span id="__span-53-88"><a id="__codelineno-53-88" name="__codelineno-53-88"></a><a href="#__codelineno-53-88"><span class="linenos" data-linenos=" 88 "></span></a><span class="s">block out log       on $ext_if                       from any to any</span>
</span><span id="__span-53-89"><a id="__codelineno-53-89" name="__codelineno-53-89"></a><a href="#__codelineno-53-89"><span class="linenos" data-linenos=" 89 "></span></a>
</span><span id="__span-53-90"><a id="__codelineno-53-90" name="__codelineno-53-90"></a><a href="#__codelineno-53-90"><span class="linenos" data-linenos=" 90 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto icmp      from any to any                     keep state</span>
</span><span id="__span-53-91"><a id="__codelineno-53-91" name="__codelineno-53-91"></a><a href="#__codelineno-53-91"><span class="linenos" data-linenos=" 91 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto udp       from any to any port 67             keep state</span>
</span><span id="__span-53-92"><a id="__codelineno-53-92" name="__codelineno-53-92"></a><a href="#__codelineno-53-92"><span class="linenos" data-linenos=" 92 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto udp       from any to any port 68             keep state</span>
</span><span id="__span-53-93"><a id="__codelineno-53-93" name="__codelineno-53-93"></a><a href="#__codelineno-53-93"><span class="linenos" data-linenos=" 93 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto udp       from any to any port 53             keep state</span>
</span><span id="__span-53-94"><a id="__codelineno-53-94" name="__codelineno-53-94"></a><a href="#__codelineno-53-94"><span class="linenos" data-linenos=" 94 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto udp       from any to any port 123            keep state</span>
</span><span id="__span-53-95"><a id="__codelineno-53-95" name="__codelineno-53-95"></a><a href="#__codelineno-53-95"><span class="linenos" data-linenos=" 95 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto udp       from any to any port 33433 &gt;&lt; 33626 keep state</span>
</span><span id="__span-53-96"><a id="__codelineno-53-96" name="__codelineno-53-96"></a><a href="#__codelineno-53-96"><span class="linenos" data-linenos=" 96 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto tcp       from any to any port 53             modulate state</span>
</span><span id="__span-53-97"><a id="__codelineno-53-97" name="__codelineno-53-97"></a><a href="#__codelineno-53-97"><span class="linenos" data-linenos=" 97 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto tcp       from any to any port 853            modulate state</span>
</span><span id="__span-53-98"><a id="__codelineno-53-98" name="__codelineno-53-98"></a><a href="#__codelineno-53-98"><span class="linenos" data-linenos=" 98 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto tcp       from any to any port 80             modulate state</span>
</span><span id="__span-53-99"><a id="__codelineno-53-99" name="__codelineno-53-99"></a><a href="#__codelineno-53-99"><span class="linenos" data-linenos=" 99 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto tcp       from any to any port 443            modulate state</span>
</span><span id="__span-53-100"><a id="__codelineno-53-100" name="__codelineno-53-100"></a><a href="#__codelineno-53-100"><span class="linenos" data-linenos="100 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto tcp       from any to any port 8080           modulate state</span>
</span><span id="__span-53-101"><a id="__codelineno-53-101" name="__codelineno-53-101"></a><a href="#__codelineno-53-101"><span class="linenos" data-linenos="101 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto tcp       from any to any port 8443           modulate state</span>
</span><span id="__span-53-102"><a id="__codelineno-53-102" name="__codelineno-53-102"></a><a href="#__codelineno-53-102"><span class="linenos" data-linenos="102 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto tcp       from any to any port 25             modulate state</span>
</span><span id="__span-53-103"><a id="__codelineno-53-103" name="__codelineno-53-103"></a><a href="#__codelineno-53-103"><span class="linenos" data-linenos="103 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto tcp       from any to any port 465            modulate state</span>
</span><span id="__span-53-104"><a id="__codelineno-53-104" name="__codelineno-53-104"></a><a href="#__codelineno-53-104"><span class="linenos" data-linenos="104 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto tcp       from any to any port 587            modulate state</span>
</span><span id="__span-53-105"><a id="__codelineno-53-105" name="__codelineno-53-105"></a><a href="#__codelineno-53-105"><span class="linenos" data-linenos="105 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto tcp       from any to any port 993            modulate state</span>
</span><span id="__span-53-106"><a id="__codelineno-53-106" name="__codelineno-53-106"></a><a href="#__codelineno-53-106"><span class="linenos" data-linenos="106 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto tcp       from any to any port 22             modulate state</span>
</span><span id="__span-53-107"><a id="__codelineno-53-107" name="__codelineno-53-107"></a><a href="#__codelineno-53-107"><span class="linenos" data-linenos="107 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto tcp       from any to any port 2222           modulate state</span>
</span><span id="__span-53-108"><a id="__codelineno-53-108" name="__codelineno-53-108"></a><a href="#__codelineno-53-108"><span class="linenos" data-linenos="108 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto tcp       from any to any port 43             modulate state</span>
</span><span id="__span-53-109"><a id="__codelineno-53-109" name="__codelineno-53-109"></a><a href="#__codelineno-53-109"><span class="linenos" data-linenos="109 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto tcp       from any to any port 20             modulate state</span>
</span><span id="__span-53-110"><a id="__codelineno-53-110" name="__codelineno-53-110"></a><a href="#__codelineno-53-110"><span class="linenos" data-linenos="110 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto tcp       from any to any port 21             modulate state</span>
</span><span id="__span-53-111"><a id="__codelineno-53-111" name="__codelineno-53-111"></a><a href="#__codelineno-53-111"><span class="linenos" data-linenos="111 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto tcp       from any to any port 989            modulate state</span>
</span><span id="__span-53-112"><a id="__codelineno-53-112" name="__codelineno-53-112"></a><a href="#__codelineno-53-112"><span class="linenos" data-linenos="112 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto tcp       from any to any port 990            modulate state</span>
</span><span id="__span-53-113"><a id="__codelineno-53-113" name="__codelineno-53-113"></a><a href="#__codelineno-53-113"><span class="linenos" data-linenos="113 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto tcp       from any to any port 3690           modulate state</span>
</span><span id="__span-53-114"><a id="__codelineno-53-114" name="__codelineno-53-114"></a><a href="#__codelineno-53-114"><span class="linenos" data-linenos="114 "></span></a><span class="s">pass  out     quick on $ext_if inet  proto tcp       from any to any port 9418           modulate state</span>
</span><span id="__span-53-115"><a id="__codelineno-53-115" name="__codelineno-53-115"></a><a href="#__codelineno-53-115"><span class="linenos" data-linenos="115 "></span></a>
</span><span id="__span-53-116"><a id="__codelineno-53-116" name="__codelineno-53-116"></a><a href="#__codelineno-53-116"><span class="linenos" data-linenos="116 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto icmp6     from any to any                     keep state</span>
</span><span id="__span-53-117"><a id="__codelineno-53-117" name="__codelineno-53-117"></a><a href="#__codelineno-53-117"><span class="linenos" data-linenos="117 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto udp       from any to any port 546            keep state</span>
</span><span id="__span-53-118"><a id="__codelineno-53-118" name="__codelineno-53-118"></a><a href="#__codelineno-53-118"><span class="linenos" data-linenos="118 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto udp       from any to any port 547            keep state</span>
</span><span id="__span-53-119"><a id="__codelineno-53-119" name="__codelineno-53-119"></a><a href="#__codelineno-53-119"><span class="linenos" data-linenos="119 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto udp       from any to any port 53             keep state</span>
</span><span id="__span-53-120"><a id="__codelineno-53-120" name="__codelineno-53-120"></a><a href="#__codelineno-53-120"><span class="linenos" data-linenos="120 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto udp       from any to any port 123            keep state</span>
</span><span id="__span-53-121"><a id="__codelineno-53-121" name="__codelineno-53-121"></a><a href="#__codelineno-53-121"><span class="linenos" data-linenos="121 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto udp       from any to any port 33433 &gt;&lt; 33626 keep state</span>
</span><span id="__span-53-122"><a id="__codelineno-53-122" name="__codelineno-53-122"></a><a href="#__codelineno-53-122"><span class="linenos" data-linenos="122 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto tcp       from any to any port 53             modulate state</span>
</span><span id="__span-53-123"><a id="__codelineno-53-123" name="__codelineno-53-123"></a><a href="#__codelineno-53-123"><span class="linenos" data-linenos="123 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto tcp       from any to any port 853            modulate state</span>
</span><span id="__span-53-124"><a id="__codelineno-53-124" name="__codelineno-53-124"></a><a href="#__codelineno-53-124"><span class="linenos" data-linenos="124 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto tcp       from any to any port 80             modulate state</span>
</span><span id="__span-53-125"><a id="__codelineno-53-125" name="__codelineno-53-125"></a><a href="#__codelineno-53-125"><span class="linenos" data-linenos="125 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto tcp       from any to any port 443            modulate state</span>
</span><span id="__span-53-126"><a id="__codelineno-53-126" name="__codelineno-53-126"></a><a href="#__codelineno-53-126"><span class="linenos" data-linenos="126 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto tcp       from any to any port 8080           modulate state</span>
</span><span id="__span-53-127"><a id="__codelineno-53-127" name="__codelineno-53-127"></a><a href="#__codelineno-53-127"><span class="linenos" data-linenos="127 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto tcp       from any to any port 8443           modulate state</span>
</span><span id="__span-53-128"><a id="__codelineno-53-128" name="__codelineno-53-128"></a><a href="#__codelineno-53-128"><span class="linenos" data-linenos="128 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto tcp       from any to any port 25             modulate state</span>
</span><span id="__span-53-129"><a id="__codelineno-53-129" name="__codelineno-53-129"></a><a href="#__codelineno-53-129"><span class="linenos" data-linenos="129 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto tcp       from any to any port 465            modulate state</span>
</span><span id="__span-53-130"><a id="__codelineno-53-130" name="__codelineno-53-130"></a><a href="#__codelineno-53-130"><span class="linenos" data-linenos="130 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto tcp       from any to any port 587            modulate state</span>
</span><span id="__span-53-131"><a id="__codelineno-53-131" name="__codelineno-53-131"></a><a href="#__codelineno-53-131"><span class="linenos" data-linenos="131 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto tcp       from any to any port 993            modulate state</span>
</span><span id="__span-53-132"><a id="__codelineno-53-132" name="__codelineno-53-132"></a><a href="#__codelineno-53-132"><span class="linenos" data-linenos="132 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto tcp       from any to any port 22             modulate state</span>
</span><span id="__span-53-133"><a id="__codelineno-53-133" name="__codelineno-53-133"></a><a href="#__codelineno-53-133"><span class="linenos" data-linenos="133 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto tcp       from any to any port 2222           modulate state</span>
</span><span id="__span-53-134"><a id="__codelineno-53-134" name="__codelineno-53-134"></a><a href="#__codelineno-53-134"><span class="linenos" data-linenos="134 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto tcp       from any to any port 43             modulate state</span>
</span><span id="__span-53-135"><a id="__codelineno-53-135" name="__codelineno-53-135"></a><a href="#__codelineno-53-135"><span class="linenos" data-linenos="135 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto tcp       from any to any port 20             modulate state</span>
</span><span id="__span-53-136"><a id="__codelineno-53-136" name="__codelineno-53-136"></a><a href="#__codelineno-53-136"><span class="linenos" data-linenos="136 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto tcp       from any to any port 21             modulate state</span>
</span><span id="__span-53-137"><a id="__codelineno-53-137" name="__codelineno-53-137"></a><a href="#__codelineno-53-137"><span class="linenos" data-linenos="137 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto tcp       from any to any port 989            modulate state</span>
</span><span id="__span-53-138"><a id="__codelineno-53-138" name="__codelineno-53-138"></a><a href="#__codelineno-53-138"><span class="linenos" data-linenos="138 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto tcp       from any to any port 990            modulate state</span>
</span><span id="__span-53-139"><a id="__codelineno-53-139" name="__codelineno-53-139"></a><a href="#__codelineno-53-139"><span class="linenos" data-linenos="139 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto tcp       from any to any port 3690           modulate state</span>
</span><span id="__span-53-140"><a id="__codelineno-53-140" name="__codelineno-53-140"></a><a href="#__codelineno-53-140"><span class="linenos" data-linenos="140 "></span></a><span class="s">pass  out     quick on $ext_if inet6 proto tcp       from any to any port 9418           modulate state</span>
</span><span id="__span-53-141"><a id="__codelineno-53-141" name="__codelineno-53-141"></a><a href="#__codelineno-53-141"><span class="linenos" data-linenos="141 "></span></a>
</span><span id="__span-53-142"><a id="__codelineno-53-142" name="__codelineno-53-142"></a><a href="#__codelineno-53-142"><span class="linenos" data-linenos="142 "></span></a><span class="s">EOF</span>
</span><span id="__span-53-143"><a id="__codelineno-53-143" name="__codelineno-53-143"></a><a href="#__codelineno-53-143"><span class="linenos" data-linenos="143 "></span></a>
</span><span id="__span-53-144"><a id="__codelineno-53-144" name="__codelineno-53-144"></a><a href="#__codelineno-53-144"><span class="linenos" data-linenos="144 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /etc/pf.internal</span>
</span><span id="__span-53-145"><a id="__codelineno-53-145" name="__codelineno-53-145"></a><a href="#__codelineno-53-145"><span class="linenos" data-linenos="145 "></span></a><span class="s">fe80::/10</span>
</span><span id="__span-53-146"><a id="__codelineno-53-146" name="__codelineno-53-146"></a><a href="#__codelineno-53-146"><span class="linenos" data-linenos="146 "></span></a><span class="s">10.0.0.0/8</span>
</span><span id="__span-53-147"><a id="__codelineno-53-147" name="__codelineno-53-147"></a><a href="#__codelineno-53-147"><span class="linenos" data-linenos="147 "></span></a><span class="s">#__IPADDR4__</span>
</span><span id="__span-53-148"><a id="__codelineno-53-148" name="__codelineno-53-148"></a><a href="#__codelineno-53-148"><span class="linenos" data-linenos="148 "></span></a><span class="s">#__IPADDR6__</span>
</span><span id="__span-53-149"><a id="__codelineno-53-149" name="__codelineno-53-149"></a><a href="#__codelineno-53-149"><span class="linenos" data-linenos="149 "></span></a>
</span><span id="__span-53-150"><a id="__codelineno-53-150" name="__codelineno-53-150"></a><a href="#__codelineno-53-150"><span class="linenos" data-linenos="150 "></span></a><span class="s">EOF</span>
</span><span id="__span-53-151"><a id="__codelineno-53-151" name="__codelineno-53-151"></a><a href="#__codelineno-53-151"><span class="linenos" data-linenos="151 "></span></a>
</span><span id="__span-53-152"><a id="__codelineno-53-152" name="__codelineno-53-152"></a><a href="#__codelineno-53-152"><span class="linenos" data-linenos="152 "></span></a><span class="c1"># Default Interface</span>
</span><span id="__span-53-153"><a id="__codelineno-53-153" name="__codelineno-53-153"></a><a href="#__codelineno-53-153"><span class="linenos" data-linenos="153 "></span></a>route<span class="w"> </span>-n<span class="w"> </span>get<span class="w"> </span>-inet<span class="w"> </span>default<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;/interface/ {print $2}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-53-154"><a id="__codelineno-53-154" name="__codelineno-53-154"></a><a href="#__codelineno-53-154"><span class="linenos" data-linenos="154 "></span></a><span class="w">    </span>xargs<span class="w"> </span>-I<span class="w"> </span>%<span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s|DEFAULT|%|g&#39;</span><span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>/etc/pf.conf
</span><span id="__span-53-155"><a id="__codelineno-53-155" name="__codelineno-53-155"></a><a href="#__codelineno-53-155"><span class="linenos" data-linenos="155 "></span></a>
</span><span id="__span-53-156"><a id="__codelineno-53-156" name="__codelineno-53-156"></a><a href="#__codelineno-53-156"><span class="linenos" data-linenos="156 "></span></a><span class="c1"># IPv4</span>
</span><span id="__span-53-157"><a id="__codelineno-53-157" name="__codelineno-53-157"></a><a href="#__codelineno-53-157"><span class="linenos" data-linenos="157 "></span></a>ifconfig<span class="w"> </span>-u<span class="w"> </span>-f<span class="w"> </span>cidr<span class="w"> </span><span class="sb">`</span>route<span class="w"> </span>-n<span class="w"> </span>get<span class="w"> </span>-inet<span class="w"> </span>default<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;/interface/ {print $2}&#39;</span><span class="sb">`</span><span class="w"> </span>inet<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-53-158"><a id="__codelineno-53-158" name="__codelineno-53-158"></a><a href="#__codelineno-53-158"><span class="linenos" data-linenos="158 "></span></a><span class="w">    </span>awk<span class="w"> </span><span class="s1">&#39;tolower($0) ~ /inet[\ \t]+((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/ {if(substr($2,1,3)!=127) print $2}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-53-159"><a id="__codelineno-53-159" name="__codelineno-53-159"></a><a href="#__codelineno-53-159"><span class="linenos" data-linenos="159 "></span></a><span class="w">    </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-I<span class="w"> </span>%<span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s|__IPADDR4__|%|g&#39;</span><span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>/etc/pf.internal
</span><span id="__span-53-160"><a id="__codelineno-53-160" name="__codelineno-53-160"></a><a href="#__codelineno-53-160"><span class="linenos" data-linenos="160 "></span></a>
</span><span id="__span-53-161"><a id="__codelineno-53-161" name="__codelineno-53-161"></a><a href="#__codelineno-53-161"><span class="linenos" data-linenos="161 "></span></a><span class="c1"># IPv6</span>
</span><span id="__span-53-162"><a id="__codelineno-53-162" name="__codelineno-53-162"></a><a href="#__codelineno-53-162"><span class="linenos" data-linenos="162 "></span></a>ifconfig<span class="w"> </span>-u<span class="w"> </span>-f<span class="w"> </span>cidr<span class="w"> </span><span class="sb">`</span>route<span class="w"> </span>-n<span class="w"> </span>get<span class="w"> </span>-inet6<span class="w"> </span>default<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;/interface/ {print $2}&#39;</span><span class="sb">`</span><span class="w"> </span>inet6<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-53-163"><a id="__codelineno-53-163" name="__codelineno-53-163"></a><a href="#__codelineno-53-163"><span class="linenos" data-linenos="163 "></span></a><span class="w">    </span>awk<span class="w"> </span><span class="s1">&#39;tolower($0) ~ /inet6[\ \t]+(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/ {if(substr($2,1,1)!=&quot;f&quot;) print $2}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-53-164"><a id="__codelineno-53-164" name="__codelineno-53-164"></a><a href="#__codelineno-53-164"><span class="linenos" data-linenos="164 "></span></a><span class="w">    </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-I<span class="w"> </span>%<span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s|__IPADDR6__|%|g&#39;</span><span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>/etc/pf.internal
</span></code></pre></div>
<h2 id="abschluss-der-installation">Abschluss der Installation<a class="headerlink" href="#abschluss-der-installation" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Um uns künftig mit unserem Arbeitsuser einloggen zu können, müssen wir uns dessen <abbr title="Secure Shell">SSH</abbr>-Key (id_ed25519) auf unser
lokales System kopieren und ihn dann mit Hilfe der <a href="https://the.earth.li/~sgtatham/putty/latest/htmldoc/Chapter8.html" rel="noopener" target="_blank">PuTTYgen Dokumentation</a>
in einen für PuTTY lesbaren Private Key umwandeln (id_ed25519.ppk).</p>
<div class="language-powershell highlight"><span class="filename">PowerShell</span><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1"></a><a href="#__codelineno-54-1"><span class="linenos" data-linenos="1 "></span></a><span class="n">pscp</span> <span class="n">-P</span> <span class="n">2222</span> <span class="n">-r</span> <span class="n">root</span><span class="nv">@127</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">1</span><span class="p">:/</span><span class="n">mnt</span><span class="p">/</span><span class="n">home</span><span class="p">/</span><span class="n">admin</span><span class="p">/.</span><span class="n">ssh</span> <span class="s2">&quot;${Env:USERPROFILE}\VirtualBox VMs\FreeBSD\ssh&quot;</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2"></a><a href="#__codelineno-54-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3"></a><a href="#__codelineno-54-3"><span class="linenos" data-linenos="3 "></span></a><span class="n">puttygen</span> <span class="s2">&quot;${Env:USERPROFILE}\VirtualBox VMs\FreeBSD\ssh\id_ed25519&quot;</span>
</span></code></pre></div>
<p>Nun ist es endlich soweit: Wir verlassen das Chroot, unmounten die Partitionen und rebooten zum ersten Mal in unser
neues FreeBSD Basis-System.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1"></a><a href="#__codelineno-55-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="nb">exit</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2"></a><a href="#__codelineno-55-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3"></a><a href="#__codelineno-55-3"><span class="linenos" data-linenos=" 3 "></span></a>rm<span class="w"> </span>/mnt/root/.sh_history
</span><span id="__span-55-4"><a id="__codelineno-55-4" name="__codelineno-55-4"></a><a href="#__codelineno-55-4"><span class="linenos" data-linenos=" 4 "></span></a>rm<span class="w"> </span>/mnt/home/*/.sh_history
</span><span id="__span-55-5"><a id="__codelineno-55-5" name="__codelineno-55-5"></a><a href="#__codelineno-55-5"><span class="linenos" data-linenos=" 5 "></span></a>chmod<span class="w"> </span><span class="m">0700</span><span class="w"> </span>/mnt/root
</span><span id="__span-55-6"><a id="__codelineno-55-6" name="__codelineno-55-6"></a><a href="#__codelineno-55-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-55-7"><a id="__codelineno-55-7" name="__codelineno-55-7"></a><a href="#__codelineno-55-7"><span class="linenos" data-linenos=" 7 "></span></a>umount<span class="w"> </span>/mnt/dev
</span><span id="__span-55-8"><a id="__codelineno-55-8" name="__codelineno-55-8"></a><a href="#__codelineno-55-8"><span class="linenos" data-linenos=" 8 "></span></a>umount<span class="w"> </span>/mnt
</span><span id="__span-55-9"><a id="__codelineno-55-9" name="__codelineno-55-9"></a><a href="#__codelineno-55-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-55-10"><a id="__codelineno-55-10" name="__codelineno-55-10"></a><a href="#__codelineno-55-10"><span class="linenos" data-linenos="10 "></span></a>shutdown<span class="w"> </span>-r<span class="w"> </span>now
</span></code></pre></div>
<h3 id="einloggen-und-zu-root-werden">Einloggen und zu <code>root</code> werden<a class="headerlink" href="#einloggen-und-zu-root-werden" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Einloggen ab hier nur noch mit Public-Key</p>
<div class="language-powershell highlight"><span class="filename">PowerShell</span><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1"></a><a href="#__codelineno-56-1"><span class="linenos" data-linenos="1 "></span></a><span class="n">putty</span> <span class="n">-ssh</span> <span class="n">-P</span> <span class="n">2222</span> <span class="n">-i</span> <span class="s2">&quot;${Env:USERPROFILE}\VirtualBox VMs\FreeBSD\ssh\id_ed25519.ppk&quot;</span> <span class="n">admin</span><span class="nv">@127</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">1</span>
</span></code></pre></div>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1"></a><a href="#__codelineno-57-1"><span class="linenos" data-linenos="1 "></span></a>su<span class="w"> </span>-<span class="w"> </span>root
</span></code></pre></div>
<h2 id="system-aktualisieren">System aktualisieren<a class="headerlink" href="#system-aktualisieren" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Nach dem Reboot aktualisieren und entschlacken wir das System.</p>
<h3 id="ports-mgmtpkg-installieren">ports-mgmt/pkg installieren<a class="headerlink" href="#ports-mgmtpkg-installieren" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Wir installieren als Erstes <code>pkg</code>.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1"></a><a href="#__codelineno-58-1"><span class="linenos" data-linenos="1 "></span></a>pkg<span class="w"> </span>bootstrap<span class="w"> </span>-y
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2"></a><a href="#__codelineno-58-2"><span class="linenos" data-linenos="2 "></span></a>pkg<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>ports-mgmt/pkg
</span></code></pre></div>
<h3 id="git-installieren">Git installieren<a class="headerlink" href="#git-installieren" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Wir installieren als Nächstes <code>git</code> und seine Abhängigkeiten.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1"></a><a href="#__codelineno-59-1"><span class="linenos" data-linenos="1 "></span></a>pkg<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>devel/git@default
</span></code></pre></div>
<h3 id="source-tree-auschecken">Source Tree auschecken<a class="headerlink" href="#source-tree-auschecken" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Am Besten funktioniert bei FreeBSD immer noch die Aktualisierung über die System-Sourcen. Auf diesem Wege kann man ein
System über viele Release-Generationen hinweg aktuell halten, ohne eine Neuinstallation durchzuführen. Das Verfahren
ist zwar etwas zeitaufwändig, aber erprobt und führt bei richtiger Anwendung zu einem sauberen, aktuellen System.</p>
<p>Zunächst wird hierzu das aktuelle Quellenverzeichnis von FreeBSD benötigt, weshalb wir es mittels
<a href="https://www.freebsd.org/cgi/man.cgi?query=git&amp;sektion=1&amp;format=html" rel="noopener" target="_blank">git</a> auschecken.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1"></a><a href="#__codelineno-60-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="c1"># Neues Quellenverzeichnis anlegen (clone)</span>
</span><span id="__span-60-2"><a id="__codelineno-60-2" name="__codelineno-60-2"></a><a href="#__codelineno-60-2"><span class="linenos" data-linenos=" 2 "></span></a>rm<span class="w"> </span>-r<span class="w"> </span>/usr/src
</span><span id="__span-60-3"><a id="__codelineno-60-3" name="__codelineno-60-3"></a><a href="#__codelineno-60-3"><span class="linenos" data-linenos=" 3 "></span></a>git<span class="w"> </span>clone<span class="w"> </span>-o<span class="w"> </span>freebsd<span class="w"> </span>-b<span class="w"> </span>releng/<span class="sb">`</span>/bin/freebsd-version<span class="w"> </span>-u<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d-<span class="w"> </span>-f1<span class="sb">`</span><span class="w"> </span>https://git.FreeBSD.org/src.git<span class="w"> </span>/usr/src
</span><span id="__span-60-4"><a id="__codelineno-60-4" name="__codelineno-60-4"></a><a href="#__codelineno-60-4"><span class="linenos" data-linenos=" 4 "></span></a>git<span class="w"> </span>-C<span class="w"> </span>/usr/src<span class="w"> </span>pull<span class="w"> </span>--rebase
</span><span id="__span-60-5"><a id="__codelineno-60-5" name="__codelineno-60-5"></a><a href="#__codelineno-60-5"><span class="linenos" data-linenos=" 5 "></span></a>etcupdate<span class="w"> </span>extract
</span><span id="__span-60-6"><a id="__codelineno-60-6" name="__codelineno-60-6"></a><a href="#__codelineno-60-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-60-7"><a id="__codelineno-60-7" name="__codelineno-60-7"></a><a href="#__codelineno-60-7"><span class="linenos" data-linenos=" 7 "></span></a>
</span><span id="__span-60-8"><a id="__codelineno-60-8" name="__codelineno-60-8"></a><a href="#__codelineno-60-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="c1"># Vorhandenes Quellenverzeichnis aktualisieren (pull)</span>
</span><span id="__span-60-9"><a id="__codelineno-60-9" name="__codelineno-60-9"></a><a href="#__codelineno-60-9"><span class="linenos" data-linenos=" 9 "></span></a>git<span class="w"> </span>-C<span class="w"> </span>/usr/src<span class="w"> </span>pull<span class="w"> </span>--rebase
</span><span id="__span-60-10"><a id="__codelineno-60-10" name="__codelineno-60-10"></a><a href="#__codelineno-60-10"><span class="linenos" data-linenos="10 "></span></a>
</span><span id="__span-60-11"><a id="__codelineno-60-11" name="__codelineno-60-11"></a><a href="#__codelineno-60-11"><span class="linenos" data-linenos="11 "></span></a>
</span><span id="__span-60-12"><a id="__codelineno-60-12" name="__codelineno-60-12"></a><a href="#__codelineno-60-12"><span class="linenos" data-linenos="12 "></span></a><span class="c1"># Vorhandenes Quellenverzeichnis zu FreeBSD 14-STABLE wechseln (checkout)</span>
</span><span id="__span-60-13"><a id="__codelineno-60-13" name="__codelineno-60-13"></a><a href="#__codelineno-60-13"><span class="linenos" data-linenos="13 "></span></a>git<span class="w"> </span>-C<span class="w"> </span>/usr/src<span class="w"> </span>checkout<span class="w"> </span>stable/14
</span><span id="__span-60-14"><a id="__codelineno-60-14" name="__codelineno-60-14"></a><a href="#__codelineno-60-14"><span class="linenos" data-linenos="14 "></span></a>etcupdate<span class="w"> </span>extract
</span></code></pre></div>
<h3 id="portstree-auschecken">Portstree auschecken<a class="headerlink" href="#portstree-auschecken" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Um unser Basissystem später um sinnvolle Programme erweitern zu können, fehlt uns noch der sogenannte Portstree. Diesen
checken wir nun ebenfalls mittels <code>git</code> aus (kann durchaus eine Stunde oder länger dauern).</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1"></a><a href="#__codelineno-61-1"><span class="linenos" data-linenos="1 "></span></a>rm<span class="w"> </span>-r<span class="w"> </span>/usr/ports
</span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2"></a><a href="#__codelineno-61-2"><span class="linenos" data-linenos="2 "></span></a>git<span class="w"> </span>clone<span class="w"> </span>--depth<span class="w"> </span><span class="m">1</span><span class="w"> </span>https://git.FreeBSD.org/ports.git<span class="w"> </span>/usr/ports
</span><span id="__span-61-3"><a id="__codelineno-61-3" name="__codelineno-61-3"></a><a href="#__codelineno-61-3"><span class="linenos" data-linenos="3 "></span></a>git<span class="w"> </span>-C<span class="w"> </span>/usr/ports<span class="w"> </span>pull<span class="w"> </span>--rebase
</span><span id="__span-61-4"><a id="__codelineno-61-4" name="__codelineno-61-4"></a><a href="#__codelineno-61-4"><span class="linenos" data-linenos="4 "></span></a>make<span class="w"> </span>-C<span class="w"> </span>/usr/ports<span class="w"> </span>fetchindex
</span></code></pre></div>
<p>Damit ist der Portstree einsatzbereit. Um den Tree künftig zu aktualisieren genügt der folgende Befehl.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1"></a><a href="#__codelineno-62-1"><span class="linenos" data-linenos="1 "></span></a>git<span class="w"> </span>-C<span class="w"> </span>/usr/ports<span class="w"> </span>pull<span class="w"> </span>--rebase
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2"></a><a href="#__codelineno-62-2"><span class="linenos" data-linenos="2 "></span></a>make<span class="w"> </span>-C<span class="w"> </span>/usr/ports<span class="w"> </span>fetchindex
</span></code></pre></div>
<p>Wichtige Informationen zu neuen Paketversionen finden sich in <code>/usr/ports/UPDATING</code> und sollten dringend beachtet
werden.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1"></a><a href="#__codelineno-63-1"><span class="linenos" data-linenos="1 "></span></a>less<span class="w"> </span>/usr/ports/UPDATING
</span></code></pre></div>
<h3 id="git-deinstallieren">Git deinstallieren<a class="headerlink" href="#git-deinstallieren" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Wir deinstallieren <code>git</code> und seine Abhängigkeiten nun vorerst wieder.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1"></a><a href="#__codelineno-64-1"><span class="linenos" data-linenos="1 "></span></a>pkg<span class="w"> </span>delete<span class="w"> </span>-y<span class="w"> </span>-a
</span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2"></a><a href="#__codelineno-64-2"><span class="linenos" data-linenos="2 "></span></a>pkg<span class="w"> </span>clean<span class="w"> </span>-y<span class="w"> </span>-a
</span><span id="__span-64-3"><a id="__codelineno-64-3" name="__codelineno-64-3"></a><a href="#__codelineno-64-3"><span class="linenos" data-linenos="3 "></span></a>pkg<span class="w"> </span>delete<span class="w"> </span>-y<span class="w"> </span>-f<span class="w"> </span><span class="se">\*</span>
</span></code></pre></div>
<h3 id="konfiguration-anpassen">Konfiguration anpassen<a class="headerlink" href="#konfiguration-anpassen" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>In den Abschnitten <a href="#buildsystem-konfigurieren">Buildsystem konfigurieren</a> und <a href="#kernel-konfigurieren">Kernel konfigurieren</a>
haben wir uns bereits eine geeignete <code>make.conf</code> und gegebenenfalls auch eine individuelle Kernel-Konfiguration
erstellt. Dennoch sei an dieser Stelle nochmals auf das FreeBSD Handbuch verwiesen. Insbesondere
<a href="https://docs.freebsd.org/en/books/handbook/kernelconfig/" rel="noopener" target="_blank">Chapter 8. Configuring the FreeBSD Kernel</a>
und <a href="https://docs.freebsd.org/en/books/handbook/cutting-edge/#makeworld" rel="noopener" target="_blank">24.6. Updating FreeBSD from Source</a>
seien Jedem FreeBSD Administratoren ans Herz gelegt.</p>
<p>Ausserdem empfiehlt es sich vor einem Update des Basissystems die Datei <code>/usr/src/UPDATING</code> zu lesen. Alle Angaben und
Hinweise in dieser Datei sind aktueller und zutreffender als das Handbuch und sollten unbedingt befolgt werden.</p>
<h3 id="vorbereitende-arbeiten">Vorbereitende Arbeiten<a class="headerlink" href="#vorbereitende-arbeiten" title="Anchor link to this section for reference">⚓︎</a></h3>
<details class="hint" open="open">
<summary>Hint</summary>
<p>Für die spätere Installation des neu kompilierten Basissystems darf <code>/tmp</code> nicht mit der Option <code>noexec</code> gemounted</p>
</details>
<p>sein. Da zwischendrin noch mal ein Reboot erfolgt, können wir bei Bedarf bereits jetzt die entsprechende Zeile in der
<code>fstab</code> anpassen, sofern vorhanden.</p>
<p>Zunächst müssen eventuell vorhandene Object-Dateien im Verzeichnis <code>/usr/obj</code> gelöscht werden, damit <code>make</code> später
wirklich das gesamte System neu erstellt.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1"></a><a href="#__codelineno-65-1"><span class="linenos" data-linenos="1 "></span></a><span class="nb">cd</span><span class="w"> </span>/usr/src
</span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2"></a><a href="#__codelineno-65-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-65-3"><a id="__codelineno-65-3" name="__codelineno-65-3"></a><a href="#__codelineno-65-3"><span class="linenos" data-linenos="3 "></span></a>make<span class="w"> </span>cleanuniverse
</span><span id="__span-65-4"><a id="__codelineno-65-4" name="__codelineno-65-4"></a><a href="#__codelineno-65-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-65-5"><a id="__codelineno-65-5" name="__codelineno-65-5"></a><a href="#__codelineno-65-5"><span class="linenos" data-linenos="5 "></span></a>git<span class="w"> </span>-C<span class="w"> </span>/usr/src<span class="w"> </span>pull<span class="w"> </span>--rebase
</span></code></pre></div>
<h3 id="basissystem-rekompilieren">Basissystem rekompilieren<a class="headerlink" href="#basissystem-rekompilieren" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Das Kompilieren des Basissystems kann durchaus eine Stunde oder länger dauern.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1"></a><a href="#__codelineno-66-1"><span class="linenos" data-linenos="1 "></span></a>make<span class="w"> </span>-j4<span class="w"> </span>buildworld
</span></code></pre></div>
<h3 id="kernel-rekompilieren-und-installieren">Kernel rekompilieren und installieren<a class="headerlink" href="#kernel-rekompilieren-und-installieren" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Wenn die eigene Kernel-Konfiguration wie bei uns bereits in der <code>/etc/make.conf</code> eingetragen ist, wird sie automatisch
verwendet, andernfalls wird die Konfiguration des generischen FreeBSD-Kernels verwendet. Das Kompilieren des Kernels
kann durchaus eine Stunde oder länger dauern.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1"></a><a href="#__codelineno-67-1"><span class="linenos" data-linenos=" 1 "></span></a>mkdir<span class="w"> </span>-p<span class="w"> </span>/root/kernels
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2"></a><a href="#__codelineno-67-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-67-3"><a id="__codelineno-67-3" name="__codelineno-67-3"></a><a href="#__codelineno-67-3"><span class="linenos" data-linenos=" 3 "></span></a>cat<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39; &gt; /root/kernels/MYKERNEL</span>
</span><span id="__span-67-4"><a id="__codelineno-67-4" name="__codelineno-67-4"></a><a href="#__codelineno-67-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="s">include         GENERIC</span>
</span><span id="__span-67-5"><a id="__codelineno-67-5" name="__codelineno-67-5"></a><a href="#__codelineno-67-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="s">ident           MYKERNEL</span>
</span><span id="__span-67-6"><a id="__codelineno-67-6" name="__codelineno-67-6"></a><a href="#__codelineno-67-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="s">EOF</span>
</span><span id="__span-67-7"><a id="__codelineno-67-7" name="__codelineno-67-7"></a><a href="#__codelineno-67-7"><span class="linenos" data-linenos=" 7 "></span></a>
</span><span id="__span-67-8"><a id="__codelineno-67-8" name="__codelineno-67-8"></a><a href="#__codelineno-67-8"><span class="linenos" data-linenos=" 8 "></span></a>ln<span class="w"> </span>-s<span class="w"> </span>/root/kernels/MYKERNEL<span class="w"> </span>/usr/src/sys/amd64/conf/
</span><span id="__span-67-9"><a id="__codelineno-67-9" name="__codelineno-67-9"></a><a href="#__codelineno-67-9"><span class="linenos" data-linenos=" 9 "></span></a>ln<span class="w"> </span>-s<span class="w"> </span>/root/kernels/MYKERNEL<span class="w"> </span>/usr/src/sys/arm64/conf/
</span><span id="__span-67-10"><a id="__codelineno-67-10" name="__codelineno-67-10"></a><a href="#__codelineno-67-10"><span class="linenos" data-linenos="10 "></span></a>
</span><span id="__span-67-11"><a id="__codelineno-67-11" name="__codelineno-67-11"></a><a href="#__codelineno-67-11"><span class="linenos" data-linenos="11 "></span></a>make<span class="w"> </span>-j4<span class="w"> </span><span class="nv">KERNCONF</span><span class="o">=</span>GENERIC<span class="w"> </span><span class="nv">INSTALLKERNEL</span><span class="o">=</span>GENERIC<span class="w"> </span><span class="nv">INSTKERNNAME</span><span class="o">=</span>GENERIC<span class="w"> </span>kernel
</span><span id="__span-67-12"><a id="__codelineno-67-12" name="__codelineno-67-12"></a><a href="#__codelineno-67-12"><span class="linenos" data-linenos="12 "></span></a>
</span><span id="__span-67-13"><a id="__codelineno-67-13" name="__codelineno-67-13"></a><a href="#__codelineno-67-13"><span class="linenos" data-linenos="13 "></span></a>make<span class="w"> </span>-j4<span class="w"> </span><span class="nv">KERNCONF</span><span class="o">=</span>MYKERNEL<span class="w"> </span><span class="nv">INSTALLKERNEL</span><span class="o">=</span>MYKERNEL<span class="w"> </span><span class="nv">INSTKERNNAME</span><span class="o">=</span>MYKERNEL<span class="w"> </span>kernel
</span><span id="__span-67-14"><a id="__codelineno-67-14" name="__codelineno-67-14"></a><a href="#__codelineno-67-14"><span class="linenos" data-linenos="14 "></span></a>
</span><span id="__span-67-15"><a id="__codelineno-67-15" name="__codelineno-67-15"></a><a href="#__codelineno-67-15"><span class="linenos" data-linenos="15 "></span></a>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s/^#*\(kernels=\).*$/\1&quot;MYKERNEL GENERIC&quot;/&#39;</span><span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>/boot/loader.conf
</span><span id="__span-67-16"><a id="__codelineno-67-16" name="__codelineno-67-16"></a><a href="#__codelineno-67-16"><span class="linenos" data-linenos="16 "></span></a>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s/^#*\(kernel=\).*$/\1&quot;MYKERNEL&quot;/&#39;</span><span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>/boot/loader.conf
</span><span id="__span-67-17"><a id="__codelineno-67-17" name="__codelineno-67-17"></a><a href="#__codelineno-67-17"><span class="linenos" data-linenos="17 "></span></a>
</span><span id="__span-67-18"><a id="__codelineno-67-18" name="__codelineno-67-18"></a><a href="#__codelineno-67-18"><span class="linenos" data-linenos="18 "></span></a>rm<span class="w"> </span>-r<span class="w"> </span>/boot/kernel<span class="w"> </span>/boot/kernel.old
</span></code></pre></div>
<p>Normalerweise wäre nun ein Reboot in den Single User Mode an der Reihe. Da sich ein Remote-System in diesem Modus ohne
KVM-Lösung aber nicht bedienen lässt, begnügen wir uns damit, das System regulär neu zu starten.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1"></a><a href="#__codelineno-68-1"><span class="linenos" data-linenos="1 "></span></a>shutdown<span class="w"> </span>-r<span class="w"> </span>now
</span></code></pre></div>
<p>Wenn wir unser System zu einem späteren Zeitpunkt nochmals aktualisieren, sollten wir zuden zuvor alle Dienste ausser
OpenSSH, sowie sämtliche Jails in der Datei <code>/etc/rc.conf</code> deaktivieren.</p>
<p>Einloggen und zu <code>root</code> werden</p>
<div class="language-powershell highlight"><span class="filename">PowerShell</span><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1"></a><a href="#__codelineno-69-1"><span class="linenos" data-linenos="1 "></span></a><span class="n">putty</span> <span class="n">-ssh</span> <span class="n">-P</span> <span class="n">2222</span> <span class="n">-i</span> <span class="s2">&quot;${Env:USERPROFILE}\VirtualBox VMs\FreeBSD\ssh\id_ed25519.ppk&quot;</span> <span class="n">admin</span><span class="nv">@127</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">1</span>
</span></code></pre></div>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-70-1"><a id="__codelineno-70-1" name="__codelineno-70-1"></a><a href="#__codelineno-70-1"><span class="linenos" data-linenos="1 "></span></a>su<span class="w"> </span>-<span class="w"> </span>root
</span></code></pre></div>
<h3 id="basissystem-installieren">Basissystem installieren<a class="headerlink" href="#basissystem-installieren" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Wir installieren das neue Basissystem.</p>
<p>Ausserdem sollte <a href="https://www.freebsd.org/cgi/man.cgi?query=etcupdate&amp;sektion=8&amp;format=html" rel="noopener" target="_blank">etcupdate</a>
im Pre-Build-Mode angeworfen werden, damit es während der Aktualisierung nicht zu Fehlern kommt,
weil z. B. bestimmte User oder Gruppen noch nicht vorhanden sind.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-71-1"><a id="__codelineno-71-1" name="__codelineno-71-1"></a><a href="#__codelineno-71-1"><span class="linenos" data-linenos="1 "></span></a><span class="nb">cd</span><span class="w"> </span>/usr/src
</span><span id="__span-71-2"><a id="__codelineno-71-2" name="__codelineno-71-2"></a><a href="#__codelineno-71-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-71-3"><a id="__codelineno-71-3" name="__codelineno-71-3"></a><a href="#__codelineno-71-3"><span class="linenos" data-linenos="3 "></span></a>etcupdate<span class="w"> </span>-p
</span><span id="__span-71-4"><a id="__codelineno-71-4" name="__codelineno-71-4"></a><a href="#__codelineno-71-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-71-5"><a id="__codelineno-71-5" name="__codelineno-71-5"></a><a href="#__codelineno-71-5"><span class="linenos" data-linenos="5 "></span></a>make<span class="w"> </span>installworld
</span></code></pre></div>
<p>Als letzten Schritt müssen nun noch die Neuerungen in den Konfigurationsdateien gemerged werden. Dabei unterstützt uns
das Tool <code>etcupdate</code>. Wir müssen selbstverständlich darauf achten, dass wir hierbei nicht versehentlich unsere zuvor
gemachten Anpassungen an den diversen Konfigurationsdateien wieder rückgängig machen.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-72-1"><a id="__codelineno-72-1" name="__codelineno-72-1"></a><a href="#__codelineno-72-1"><span class="linenos" data-linenos="1 "></span></a>etcupdate<span class="w"> </span>-B
</span></code></pre></div>
<p>Wir entsorgen nun noch eventuell vorhandene veraltete und überflüssige Dateien.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-73-1"><a id="__codelineno-73-1" name="__codelineno-73-1"></a><a href="#__codelineno-73-1"><span class="linenos" data-linenos="1 "></span></a>make<span class="w"> </span><span class="nv">BATCH_DELETE_OLD_FILES</span><span class="o">=</span>yes<span class="w"> </span>delete-old-files
</span><span id="__span-73-2"><a id="__codelineno-73-2" name="__codelineno-73-2"></a><a href="#__codelineno-73-2"><span class="linenos" data-linenos="2 "></span></a>make<span class="w"> </span><span class="nv">BATCH_DELETE_OLD_FILES</span><span class="o">=</span>yes<span class="w"> </span>delete-old-libs
</span><span id="__span-73-3"><a id="__codelineno-73-3" name="__codelineno-73-3"></a><a href="#__codelineno-73-3"><span class="linenos" data-linenos="3 "></span></a>make<span class="w"> </span><span class="nv">BATCH_DELETE_OLD_FILES</span><span class="o">=</span>yes<span class="w"> </span>delete-old-dirs
</span><span id="__span-73-4"><a id="__codelineno-73-4" name="__codelineno-73-4"></a><a href="#__codelineno-73-4"><span class="linenos" data-linenos="4 "></span></a>make<span class="w"> </span><span class="nv">BATCH_DELETE_OLD_FILES</span><span class="o">=</span>yes<span class="w"> </span>delete-old
</span></code></pre></div>
<p>Anschliessend müssen wir noch die für die Installation gegebenenfalls vorgenommenen Änderungen in der <code>fstab</code> sowie
<code>rc.conf</code> rückgängig machen und das System nochmals durchstarten.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-74-1"><a id="__codelineno-74-1" name="__codelineno-74-1"></a><a href="#__codelineno-74-1"><span class="linenos" data-linenos="1 "></span></a>shutdown<span class="w"> </span>-r<span class="w"> </span>now
</span></code></pre></div>
<p>Viel Spass mit dem neuen FreeBSD BaseSystem.</p>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Letztes Update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="12. September 2025 23:41:23 CEST">12. September 2025 23:41:23</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Erstellt">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="31. August 2025 12:38:15 CEST">31. August 2025 12:38:15</span>
  </span>

    
    
    
      
  <span class="md-source-file__fact">
    
      
  <span class="md-icon" title="Mitwirkende">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg>
  </span>
  <span>GitHub</span>

    
    <nav>
      
        <a href="https://github.com/JoeUser78" class="md-author" title="@JoeUser78">
          
          <img src="../../../../assets/external/avatars.githubusercontent.com/u/1191804.fe356448.png" alt="JoeUser78">
        </a>
      
      
      
    </nav>
  </span>

    
  </aside>





                </main>
                
              </article>
            </div>
      
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16 13v8H8v-8H2L12 3l10 10zm-9-2h3v8h4v-8h3l-5-5z"/></svg>
  Zurück zum Seitenanfang
</button>
        
      </main>
      
            <footer role="contentinfo">
              <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Fußzeile" >
        
          
          <a href="../intro/" class="md-footer__link md-footer__link--prev" aria-label="Zurück: Remote Installation">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 22 3 12 13 2v6h8v8h-8zM6 12l5 5v-3h8v-4h-8V7z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Zurück
              </span>
              <div class="md-ellipsis">
                Remote Installation
              </div>
            </div>
          </a>
        
        
          
          <a href="../baseports/" class="md-footer__link md-footer__link--next" aria-label="Weiter: BasePorts">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Weiter
              </span>
              <div class="md-ellipsis">
                BasePorts
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 16H3V8h8V2l10 10-10 10zm2-9v3H5v4h8v3l5-5z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  <div class="md-copyright__highlight">
    
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">
    Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0)
    </a>
    
    <br />
    
    <strong>
    Copyright © 2002-2025 RootService Team
    </strong>
    
    <br />
    <a href="#__consent">Cookie Settings</a>
  </div>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/JoeUser78" target="_blank" rel="noopener" title="GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://linkedin.com/in/MarkusKohlmeyer78" target="_blank" rel="noopener" title="LinkedIn" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:info@rootservice.org" target="_blank" rel="noopener" title="E-Mail" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M536.4-26.3c9.8-3.5 20.6-1 28 6.3s9.8 18.2 6.3 28l-178 496.9c-5 13.9-18.1 23.1-32.8 23.1-14.2 0-27-8.6-32.3-21.7l-64.2-158c-4.5-11-2.5-23.6 5.2-32.6l94.5-112.4c5.1-6.1 4.7-15-.9-20.6s-14.6-6-20.6-.9l-112.4 94.3c-9.1 7.6-21.6 9.6-32.6 5.2L38.1 216.8c-13.1-5.3-21.7-18.1-21.7-32.3 0-14.7 9.2-27.8 23.1-32.8z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
            </footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            



<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
    
      
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="github" checked>
      <span class="task-list-indicator"></span>
      GitHub
    </label>
  </li>

      
    
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
    
    
      <label class="md-button" for="__settings">Einstellungen</label>
    
  
    
    
      <button type="reset" class="md-button md-button--primary">Ablehnen</button>
    
    
  
    
      <button class="md-button md-button--primary">Akzeptieren</button>
    
    
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    
      
      <script id="__config" type="application/json">{"base": "../../../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tabs.link", "content.tooltips", "header.autohide", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "In Zwischenablage kopiert", "clipboard.copy": "In Zwischenablage kopieren", "search.result.more.one": "1 weiteres Suchergebnis auf dieser Seite", "search.result.more.other": "# weitere Suchergebnisse auf dieser Seite", "search.result.none": "Keine Suchergebnisse", "search.result.one": "1 Suchergebnis", "search.result.other": "# Suchergebnisse", "search.result.placeholder": "Suchbegriff eingeben", "search.result.term.missing": "Es fehlt", "select.version": "Version ausw\u00e4hlen"}, "version": null}</script>
      
    
        <script>
          ((__md_scope = new URL('.', location)),
            (__md_hash = (e) => [...e].reduce((e, _) => (e << 5) - e + _.charCodeAt(0), 0)),
            (__md_get = (e, _ = localStorage, t = __md_scope) => JSON.parse(_.getItem(t.pathname + '.' + e))),
            (__md_set = (e, _, t = localStorage, a = __md_scope) => {
              try {
                t.setItem(a.pathname + '.' + e, JSON.stringify(_));
              } catch (e) {}
            }));
        </script>
        <script defer="defer" src="../../../../assets/javascripts/bundle.92b07e13.min.js"></script>
        
        
        <script defer="defer" src="../../../../assets/javascripts/extra.js"></script>
        
        
      
  </body>
</html>