
<!doctype html>
<html lang="de" class="no-js">
  <head>
    
        <meta charset="utf-8" />
      
        
        
      
      
      
        <meta name="description" content="In diesem HowTo wird step-by-step die Remote Installation von Gentoo Linux 64Bit auf einem dedizierten Server beschrieben." />
      
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes" />
      
        <meta name="CCBot" content="nofollow" />
        <meta name="robots" content="noai, noimageai, notrain, noarchive, noimageindex, max-snippet:-1, max-image-preview:-1, max-video-preview:-1, index, follow" />
      
        <meta name="tdm-reservation" content="1" />
        <meta name="format-detection" content="telephone=no" />
      
        <meta name="author" content="Markus Kohlmeyer" />
      
      
        <meta name="publisher" content="RootService Team" />
      
      
        <meta name="date" content="2014-09-01T12:00:00+02:00" />
      
        <link rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
      
        <link rel="canonical" href="https://www.rootservice.org/howtos/gentoo/remote_install/">
      
      
        <link rel="prev" href="../../freebsd/hosting_system/mailserver/clamav/" />
      
      
        <link rel="next" href="../hosting_system/" />
      
      
        <link rel="me" href="https://github.com/JoeUser78">
      
        <link rel="copyright" href="/about/copyright/" />
        <link rel="icon" href="/assets/favicons/favicon.svg" type="image/svg+xml" />
        <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png" />
        <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png" />
        <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png" />
        <link rel="icon" type="image/vnd.microsoft.icon" href="/assets/favicons/favicon.ico" />
        <link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg" color="#ff00a8" />
        <link rel="manifest" href="/assets/favicons/manifest.json" type="application/manifest+json" />
        <meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff" />
        <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#0b0013" />
      
        <meta property="article:content_tier" content="free" />
        <meta property="article:opinion" content="false" />
      
    
      
        <title>Remote Installation - RootService</title>
      
      
    
        <link rel="preload" as="style" href="../../../assets/stylesheets/main.7e37652d.min.css" onload="this.onload=null;this.rel='stylesheet'" />
        <noscript><link rel="stylesheet" href="../../../assets/stylesheets/main.7e37652d.min.css" /></noscript>
      
        
        <link rel="preload" as="style" href="../../../assets/stylesheets/palette.06af60db.min.css" onload="this.onload=null;this.rel='stylesheet'" />
        <noscript><link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css" /></noscript>
      
      


  
  
    
      
      
      
    
  
  
  <style>:root{.md-tag{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22m21.41%2011.58-9-9A2%202%200%200%200%2011%202H4a2%202%200%200%200-2%202v7a2%202%200%200%200%20.59%201.42l9%209A2%202%200%200%200%2013%2022a2%202%200%200%200%201.41-.59l7-7A2%202%200%200%200%2022%2013a2%202%200%200%200-.59-1.42M13%2020l-9-9V4h7l9%209M6.5%205A1.5%201.5%200%201%201%205%206.5%201.5%201.5%200%200%201%206.5%205%22/%3E%3C/svg%3E');}}</style>

      
        <link rel="preload" as="style" href="../../../assets/stylesheets/extra.css" onload="this.onload=null;this.rel='stylesheet'" />
        <noscript><link rel="stylesheet" href="../../../assets/stylesheets/extra.css" /></noscript>
      
      
    
      
      
    
      
        
        
        <link rel="preload" as="style" type="text/css" href="../../../assets/external/fonts.googleapis.com/css2.8b05092a.css" onload="this.onload=null;this.rel='stylesheet'" crossorigin="anonymous">
        <noscript>
        <link rel="stylesheet" type="text/css" href="../../../assets/external/fonts.googleapis.com/css2.8b05092a.css" crossorigin="anonymous">
        </noscript>
        <style>
          :root {
            --md-text-font: 'Roboto Flex';
            --md-code-font: 'Roboto Mono';
          }
        </style>
      
      
    
      <link rel="stylesheet" href="../../../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
        

      
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Remote Installation - RootService" >
      
        <meta  property="og:description"  content="In diesem HowTo wird step-by-step die Remote Installation von Gentoo Linux 64Bit auf einem dedizierten Server beschrieben." >
      
        <meta  property="og:image"  content="https://www.rootservice.org/assets/images/social/howtos/gentoo/remote_install.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://www.rootservice.org/howtos/gentoo/remote_install/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Remote Installation - RootService" >
      
        <meta  name="twitter:description"  content="In diesem HowTo wird step-by-step die Remote Installation von Gentoo Linux 64Bit auf einem dedizierten Server beschrieben." >
      
        <meta  name="twitter:image"  content="https://www.rootservice.org/assets/images/social/howtos/gentoo/remote_install.png" >
      
    
    
      
        <script type="application/ld+json">
          {
            "@context": "https://schema.org",
            "@type": "TechArticle",
            "@id": "https://www.rootservice.org/howtos/gentoo/remote_install/",
            "url": "https://www.rootservice.org/howtos/gentoo/remote_install/",
            "name": "RootService",
            
            "headline": "Remote Installation",
            
            "inLanguage": "de",
            "author": {
              "@type": "Person",
            
              "name": "Markus Kohlmeyer",
              "url": "https://github.com/JoeUser78"
            
            },
            
            "publisher": {
              "@type": "Organization",
              "name": "RootService Team",
              "url": "https://github.com/RootService",
              "logo": {
                "@type": "ImageObject",
                "url": "https://www.rootservice.org/material/book-open-page-variant"
              }
            },
            
            
            "datePublished": "2003-03-02T12:00:00+02:00",
            
            
            "dateModified": "2014-09-01T12:00:00+02:00",
            
            
            "license": "https://creativecommons.org/licenses/by-nc-sa/4.0/",
            
            "image": "https://www.rootservice.org/material/book-open-page-variant"
          }
        </script>
      
      
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep_purple" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#einleitung" class="md-skip">
          Zum Inhalt
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      



<header class="md-header md-header--shadow md-header--lifted" data-md-component="header" role="banner">
  <nav class="md-header__inner md-grid" role="navigation" aria-label="Kopfzeile">
    <a href="https://www.rootservice.org/" title="RootService" class="md-header__button md-logo" aria-label="RootService" data-md-component="logo">
    
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer" role="button" aria-label="Menü" aria-controls="__drawer">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
          RootService
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
          
          Remote Installation
          
          </span>
        </div>
      </div>
    </div>
    
    <div class="md-header__option">
      <a href="https://www.paypal.me/JoeUser" target="_blank" rel="noopener" title="Donate via Paypal" class="md-header__button md-icon" aria-label="Donate via Paypal" data-md-component="paypal">
      
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.055,7.713c-0.677-0.842-1.673-1.41-2.764-1.615C16.773,3.971,14.877,3,13.045,3H7.057C6.425,3,5.878,3.409,5.689,4.009 c-0.015,0.04-0.026,0.082-0.036,0.125L3.034,16.262c-0.009,0.041-0.015,0.083-0.019,0.125C3.006,16.449,3,16.513,3,16.56 C3,17.354,3.648,18,4.444,18h2.316l-0.267,1.262c-0.008,0.04-0.014,0.081-0.018,0.121c-0.009,0.063-0.016,0.126-0.016,0.173 C6.461,20.353,7.109,21,7.905,21h3.259c0.056,0,0.111-0.005,0.166-0.015c0.549-0.063,1.011-0.437,1.191-0.963 c0.021-0.05,0.038-0.103,0.05-0.156L13.475,16h1.398c3.365,0,5.38-1.445,5.989-4.295C21.278,9.752,20.653,8.456,20.055,7.713z M5.137,16L7.512,5h5.533c0.293,0,1.5,0.061,2.078,1.013h-4.706c-0.626,0-1.17,0.401-1.363,0.99c-0.019,0.049-0.033,0.1-0.043,0.151 l-1.034,5.093L7.183,16H5.137z M18.906,11.287C18.5,13.188,17.293,14,14.873,14h-1.857c-0.823,0-1.338,0.652-1.405,1.198L10.721,19 H8.594l1.271-6h1.444c4.259,0,5.665-2.394,6.094-4.402c0.027-0.128,0.045-0.256,0.057-0.382c0.378,0.151,0.749,0.393,1.038,0.751 C18.971,9.557,19.108,10.337,18.906,11.287z"/></svg>
      </a>
    </div>
    
    
    
    <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="deep_purple" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep_purple" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep_purple" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
     
    
    <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
    
    <label class="md-header__button md-icon" for="__search" role="button" aria-label="Suche öffnen" aria-controls="__search">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M416 208c0 45.9-14.9 88.3-40 122.7l126.6 126.7c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.1-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208M208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288"/></svg>
    </label>
    <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Suche" placeholder="Suche" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M416 208c0 45.9-14.9 88.3-40 122.7l126.6 126.7c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.1-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208M208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 22 3 12 13 2v6h8v8h-8zM6 12l5 5v-3h8v-4h-8V7z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Suche">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Teilen" aria-label="Teilen" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91-1.31-2.92-2.92-2.92M18 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1M6 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m12 7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Zurücksetzen" aria-label="Zurücksetzen" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-18C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m2.59 6L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Suche wird initialisiert
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
     
    <div class="md-header__source">
    <a href="https://github.com/RootService/MKDocs" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg>
  </div>
  <div class="md-source__repository">
    RootService/MKDocs
  </div>
</a>
    </div>
    
  </nav>
  
  
  
<nav class="md-tabs" aria-label="Hauptnavigation" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../general/getting_started/" class="md-tabs__link">
          
  
  
    
  
  HowTos

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../projects/rootforum_community/" class="md-tabs__link">
          
  
  
    
  
  Projekte

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../about/imprint/" class="md-tabs__link">
          
  
  
    
  
  About

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
  
  
</header>
      
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://www.rootservice.org/" title="RootService" class="md-nav__button md-logo" aria-label="RootService" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg>

    </a>
    RootService
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/RootService/MKDocs" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg>
  </div>
  <div class="md-source__repository">
    RootService/MKDocs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    HowTos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            HowTos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Allgemein
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Allgemein
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../general/getting_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pro und Contra dedizierter Server
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Sicherheit
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Sicherheit
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../security/server_hacked/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vorgehensweise bei gehacktem Server
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    FreeBSD
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            FreeBSD
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../freebsd/mfsbsd_image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mfsBSD Image
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../freebsd/remote_install/intro/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Remote Installation
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../freebsd/hosting_system/intro/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Hosting System
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" checked>
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Gentoo
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Gentoo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Remote Installation
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Remote Installation
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#einleitung" class="md-nav__link">
    <span class="md-ellipsis">
      Einleitung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#das-referenzsystem" class="md-nav__link">
    <span class="md-ellipsis">
      Das Referenzsystem
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#die-virtuelle-maschine" class="md-nav__link">
    <span class="md-ellipsis">
      Die Virtuelle Maschine
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rescuesystem-booten" class="md-nav__link">
    <span class="md-ellipsis">
      RescueSystem booten
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partitionieren-der-festplatte" class="md-nav__link">
    <span class="md-ellipsis">
      Partitionieren der Festplatte
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#formatieren-der-partitionen" class="md-nav__link">
    <span class="md-ellipsis">
      Formatieren der Partitionen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mounten-der-partitionen" class="md-nav__link">
    <span class="md-ellipsis">
      Mounten der Partitionen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entpacken-des-stage-tarballs" class="md-nav__link">
    <span class="md-ellipsis">
      Entpacken des Stage-Tarballs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vorbereiten-der-chroot-umgebung" class="md-nav__link">
    <span class="md-ellipsis">
      Vorbereiten der Chroot-Umgebung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#betreten-der-chroot-umgebung" class="md-nav__link">
    <span class="md-ellipsis">
      Betreten der Chroot-Umgebung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup-der-chroot-umgebung" class="md-nav__link">
    <span class="md-ellipsis">
      Setup der Chroot-Umgebung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#portage-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      Portage konfigurieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#locales-setzen" class="md-nav__link">
    <span class="md-ellipsis">
      Locales setzen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basissystem-kompilieren" class="md-nav__link">
    <span class="md-ellipsis">
      Basissystem kompilieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basissystem-rekompilieren" class="md-nav__link">
    <span class="md-ellipsis">
      Basissystem rekompilieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fstab-erstellen" class="md-nav__link">
    <span class="md-ellipsis">
      fstab erstellen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openssl-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      OpenSSL konfigurieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openssh-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      OpenSSH konfigurieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#systemprogramme-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      Systemprogramme installieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#netzwerk-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      Netzwerk konfigurieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kernelsourcen-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      Kernelsourcen installieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kernelsourcen-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      Kernelsourcen konfigurieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kernelsourcen-kompilieren" class="md-nav__link">
    <span class="md-ellipsis">
      Kernelsourcen kompilieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bootloader-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      Bootloader installieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bootloader-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      Bootloader konfigurieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#systemtools-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      Systemtools installieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#systemtools-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      Systemtools konfigurieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sysctlconf-einrichten" class="md-nav__link">
    <span class="md-ellipsis">
      sysctl.conf einrichten
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#root-passwort-setzen" class="md-nav__link">
    <span class="md-ellipsis">
      Root-Passwort setzen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arbeitsuser-anlegen" class="md-nav__link">
    <span class="md-ellipsis">
      Arbeitsuser anlegen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssh-keys-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      SSH-Keys installieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reboot-ins-neue-system" class="md-nav__link">
    <span class="md-ellipsis">
      Reboot ins neue System
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wie-geht-es-weiter" class="md-nav__link">
    <span class="md-ellipsis">
      Wie geht es weiter?
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hosting_system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hosting System
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../projects/rootforum_community/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Projekte
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../about/imprint/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#einleitung" class="md-nav__link">
    <span class="md-ellipsis">
      Einleitung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#das-referenzsystem" class="md-nav__link">
    <span class="md-ellipsis">
      Das Referenzsystem
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#die-virtuelle-maschine" class="md-nav__link">
    <span class="md-ellipsis">
      Die Virtuelle Maschine
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rescuesystem-booten" class="md-nav__link">
    <span class="md-ellipsis">
      RescueSystem booten
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partitionieren-der-festplatte" class="md-nav__link">
    <span class="md-ellipsis">
      Partitionieren der Festplatte
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#formatieren-der-partitionen" class="md-nav__link">
    <span class="md-ellipsis">
      Formatieren der Partitionen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mounten-der-partitionen" class="md-nav__link">
    <span class="md-ellipsis">
      Mounten der Partitionen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entpacken-des-stage-tarballs" class="md-nav__link">
    <span class="md-ellipsis">
      Entpacken des Stage-Tarballs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vorbereiten-der-chroot-umgebung" class="md-nav__link">
    <span class="md-ellipsis">
      Vorbereiten der Chroot-Umgebung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#betreten-der-chroot-umgebung" class="md-nav__link">
    <span class="md-ellipsis">
      Betreten der Chroot-Umgebung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup-der-chroot-umgebung" class="md-nav__link">
    <span class="md-ellipsis">
      Setup der Chroot-Umgebung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#portage-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      Portage konfigurieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#locales-setzen" class="md-nav__link">
    <span class="md-ellipsis">
      Locales setzen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basissystem-kompilieren" class="md-nav__link">
    <span class="md-ellipsis">
      Basissystem kompilieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basissystem-rekompilieren" class="md-nav__link">
    <span class="md-ellipsis">
      Basissystem rekompilieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fstab-erstellen" class="md-nav__link">
    <span class="md-ellipsis">
      fstab erstellen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openssl-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      OpenSSL konfigurieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openssh-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      OpenSSH konfigurieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#systemprogramme-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      Systemprogramme installieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#netzwerk-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      Netzwerk konfigurieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kernelsourcen-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      Kernelsourcen installieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kernelsourcen-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      Kernelsourcen konfigurieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kernelsourcen-kompilieren" class="md-nav__link">
    <span class="md-ellipsis">
      Kernelsourcen kompilieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bootloader-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      Bootloader installieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bootloader-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      Bootloader konfigurieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#systemtools-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      Systemtools installieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#systemtools-konfigurieren" class="md-nav__link">
    <span class="md-ellipsis">
      Systemtools konfigurieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sysctlconf-einrichten" class="md-nav__link">
    <span class="md-ellipsis">
      sysctl.conf einrichten
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#root-passwort-setzen" class="md-nav__link">
    <span class="md-ellipsis">
      Root-Passwort setzen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arbeitsuser-anlegen" class="md-nav__link">
    <span class="md-ellipsis">
      Arbeitsuser anlegen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssh-keys-installieren" class="md-nav__link">
    <span class="md-ellipsis">
      SSH-Keys installieren
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reboot-ins-neue-system" class="md-nav__link">
    <span class="md-ellipsis">
      Reboot ins neue System
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wie-geht-es-weiter" class="md-nav__link">
    <span class="md-ellipsis">
      Wie geht es weiter?
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
      
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                <a class="skip-link" href="#main-content">Zum Inhalt springen</a>
                <main id="main-content" role="main" tabindex="-1">
                  


  
    <a href="https://github.com/RootService/MKDocs/edit/main/docs/howtos/gentoo/remote_install.md" title="Seite editieren" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8 12h8v2H8zm2 8H6V4h7v5h5v3.1l2-2V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4zm-2-2h4.1l.9-.9V16H8zm12.2-5c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/RootService/MKDocs/raw/main/docs/howtos/gentoo/remote_install.md" title="Quellcode der Seite anzeigen" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zm0 2h7v5h5v11H6zm2 8v2h8v-2zm0 4v2h5v-2z"/></svg>
    </a>
  


  <h1>Remote Installation</h1>

<h2 id="einleitung">Einleitung<a class="headerlink" href="#einleitung" title="Anchor link to this section for reference">⚓︎</a></h2>
<details class="warning" open="open">
<summary>Warning</summary>
<p>Dieses HowTo wird seit <strong>2014-09-01</strong> nicht mehr aktiv gepflegt und entspricht daher nicht mehr dem aktuellen Stand.</p>
<p>Die Verwendung dieses HowTo geschieht somit auf eigene Gefahr!</p>
</details>
<p>In diesem HowTo beschreibe ich step-by-step die Remote Installation von <a href="https://wiki.gentoo.org/wiki/Project:Hardened" rel="noopener" target="_blank">Gentoo Linux
Hardened</a> 64Bit auf einem dedizierten
Server. Um eine weitere Republikation der offiziellen <a href="https://www.gentoo.org/support/documentation/" rel="noopener" target="_blank">Gentoo Linux
Dokumentation</a> zu vermeiden, werde ich
in diesem HowTo nicht alle Punkte bis ins Detail erläutern.</p>
<p>Folgende Punkte sind in diesem HowTo zu beachten.</p>
<ul>
<li>Alle Dienste werden mit einem möglichst minimalen und bewährten Funktionsumfang installiert.</li>
<li>Alle Dienste werden mit einer möglichst sicheren und dennoch flexiblen Konfiguration versehen.</li>
<li>Alle Konfigurationen sind selbstständig auf notwendige individuelle Anpassungen zu kontrollieren.</li>
<li>Alle Passworte werden als <code>__PASSWORD__</code> dargestellt und sind selbstständig durch sichere Passworte zu ersetzen.</li>
<li>Die Domain des Servers lautet <code>example.com</code> und ist selbstständig durch die eigene Domain zu ersetzen.</li>
<li>Der Hostname des Servers lautet <code>devnull</code> und ist selbstständig durch den eigenen Hostnamen zu ersetzen
  (FQDN=devnull.example.com).</li>
<li>Es wird der FQDN <code>devnull.example.com</code> verwendet und ist selbstständig im <abbr title="Domain Name System">DNS</abbr> zu registrieren.</li>
</ul>
<h2 id="das-referenzsystem">Das Referenzsystem<a class="headerlink" href="#das-referenzsystem" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Als Referenzsystem für dieses HowTo habe ich mich für eine virtuelle Maschine auf Basis von <a href="https://www.virtualbox.org/" rel="noopener" target="_blank">Oracle VM
VirtualBox</a> unter <a href="https://www.microsoft.com/en-us/windows/windows-11" rel="noopener" target="_blank">Microsoft Windows 7 Professional (64
Bit)</a> entschieden. So lässt sich
ohne grösseren Aufwand ein handelsüblicher dedizierter Server simulieren und anschliessend kann diese virtuelle
Maschine als kostengünstiges lokales Testsystem weiter genutzt werden.</p>
<p>Trotzdem habe ich dieses HowTo so ausgelegt, dass es sich nahezu unverändert auf dedizierte Server übertragen lässt und
dieses auch auf mehreren dedizierten Servern getestet.</p>
<p>Leider bringt Microsoft Windows keinen eigenen <abbr title="Secure Shell">SSH</abbr>-Client mit, so dass ich auf das sehr empfehlenswerte <a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/" rel="noopener" target="_blank">PuTTY (64
Bit)</a> zurückgreife. Zur
Simulation des bei nahezu allen Anbietern dedizierter Server vorhandene Rettungssystem, nachfolgend RescueSystem
genannt, wird in diesem HowTo die auf <a href="https://www.gentoo.org/" rel="noopener" target="_blank">Gentoo Linux</a>
basierende <a href="https://www.system-rescue.org/" rel="noopener" target="_blank">SystemRescueCD</a> eingesetzt.</p>
<p>VirtualBox und PuTTY werden mit den jeweiligen Standardoptionen installiert.</p>
<div class="language-powershell highlight"><span class="filename">PowerShell</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1"></a><a href="#__codelineno-0-1"><span class="linenos" data-linenos="1 "></span></a><span class="n">winget</span> <span class="n">install</span> <span class="n">PuTTY</span><span class="p">.</span><span class="n">PuTTY</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2"></a><a href="#__codelineno-0-2"><span class="linenos" data-linenos="2 "></span></a><span class="n">winget</span> <span class="n">install</span> <span class="n">Oracle</span><span class="p">.</span><span class="n">VirtualBox</span>
</span></code></pre></div>
<h2 id="die-virtuelle-maschine">Die Virtuelle Maschine<a class="headerlink" href="#die-virtuelle-maschine" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Als Erstes öffnen wir eine neue PowerShell und legen manuell eine neue virtuelle Maschine an. Diese virtuelle Maschine
bekommt den Namen <code>Gentoo</code> und wird mit 2048MB RAM, 32MB VideoRAM, zwei 32GB SATA-Festplatte, einem DVD-Player, sowie
einer Intel-Netzwerkkarte ausgestattet. Zudem setzen wir die RTC (Real-Time Clock) der virtuellen Maschine auf UTC
(Coordinated Universal Time), aktivieren den HPET (High Precision Event Timer) und legen die Bootreihenfolge fest.</p>
<div class="language-powershell highlight"><span class="filename">PowerShell</span><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1"></a><a href="#__codelineno-1-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="p">&amp;</span> <span class="s2">&quot;${Env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe&quot;</span> <span class="n">createvm</span> <span class="p">-</span><span class="n">-name</span> <span class="s2">&quot;Gentoo&quot;</span> <span class="p">-</span><span class="n">-ostype</span> <span class="n">Gentoo_64</span> <span class="p">-</span><span class="n">-register</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2"></a><a href="#__codelineno-1-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3"></a><a href="#__codelineno-1-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="nb">cd </span><span class="s2">&quot;${Env:USERPROFILE}\VirtualBox VMs\Gentoo&quot;</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4"></a><a href="#__codelineno-1-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5"></a><a href="#__codelineno-1-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="p">&amp;</span> <span class="s2">&quot;${Env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe&quot;</span> <span class="n">createhd</span> <span class="p">-</span><span class="n">-filename</span> <span class="s2">&quot;Gentoo1.vdi&quot;</span> <span class="p">-</span><span class="n">-size</span> <span class="n">32768</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6"></a><a href="#__codelineno-1-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="p">&amp;</span> <span class="s2">&quot;${Env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe&quot;</span> <span class="n">createhd</span> <span class="p">-</span><span class="n">-filename</span> <span class="s2">&quot;Gentoo2.vdi&quot;</span> <span class="p">-</span><span class="n">-size</span> <span class="n">32768</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7"></a><a href="#__codelineno-1-7"><span class="linenos" data-linenos=" 7 "></span></a>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8"></a><a href="#__codelineno-1-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="p">&amp;</span> <span class="s2">&quot;${Env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe&quot;</span> <span class="n">modifyvm</span> <span class="s2">&quot;Gentoo&quot;</span> <span class="p">-</span><span class="n">-firmware</span> <span class="n">bios</span> <span class="p">-</span><span class="n">-cpus</span> <span class="n">2</span> <span class="p">-</span><span class="n">-cpuexecutioncap</span> <span class="n">100</span> <span class="p">-</span><span class="n">-cpuhotplug</span> <span class="n">off</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9"></a><a href="#__codelineno-1-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="p">&amp;</span> <span class="s2">&quot;${Env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe&quot;</span> <span class="n">modifyvm</span> <span class="s2">&quot;Gentoo&quot;</span> <span class="p">-</span><span class="n">-chipset</span> <span class="n">ICH9</span> <span class="p">-</span><span class="n">-graphicscontroller</span> <span class="n">vmsvga</span> <span class="p">-</span><span class="n">-audio</span> <span class="n">none</span> <span class="p">-</span><span class="n">-usb</span> <span class="n">off</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10"></a><a href="#__codelineno-1-10"><span class="linenos" data-linenos="10 "></span></a><span class="p">&amp;</span> <span class="s2">&quot;${Env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe&quot;</span> <span class="n">modifyvm</span> <span class="s2">&quot;Gentoo&quot;</span> <span class="p">-</span><span class="n">-hwvirtex</span> <span class="n">on</span> <span class="p">-</span><span class="n">-ioapic</span> <span class="n">on</span> <span class="p">-</span><span class="n">-hpet</span> <span class="n">on</span> <span class="p">-</span><span class="n">-rtcuseutc</span> <span class="n">on</span> <span class="p">-</span><span class="n">-memory</span> <span class="n">4096</span> <span class="p">-</span><span class="n">-vram</span> <span class="n">64</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11"></a><a href="#__codelineno-1-11"><span class="linenos" data-linenos="11 "></span></a><span class="p">&amp;</span> <span class="s2">&quot;${Env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe&quot;</span> <span class="n">modifyvm</span> <span class="s2">&quot;Gentoo&quot;</span> <span class="p">-</span><span class="n">-nic1</span> <span class="n">nat</span> <span class="p">-</span><span class="n">-nictype1</span> <span class="n">82540EM</span> <span class="p">-</span><span class="n">-natnet1</span> <span class="s2">&quot;192.168/16&quot;</span> <span class="p">-</span><span class="n">-cableconnected1</span> <span class="n">on</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12"></a><a href="#__codelineno-1-12"><span class="linenos" data-linenos="12 "></span></a><span class="p">&amp;</span> <span class="s2">&quot;${Env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe&quot;</span> <span class="n">modifyvm</span> <span class="s2">&quot;Gentoo&quot;</span> <span class="p">-</span><span class="n">-boot1</span> <span class="n">dvd</span> <span class="p">-</span><span class="n">-boot2</span> <span class="n">disk</span> <span class="p">-</span><span class="n">-boot3</span> <span class="n">none</span> <span class="p">-</span><span class="n">-boot4</span> <span class="n">none</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13"></a><a href="#__codelineno-1-13"><span class="linenos" data-linenos="13 "></span></a>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14"></a><a href="#__codelineno-1-14"><span class="linenos" data-linenos="14 "></span></a><span class="p">&amp;</span> <span class="s2">&quot;${Env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe&quot;</span> <span class="n">storagectl</span> <span class="s2">&quot;Gentoo&quot;</span> <span class="p">-</span><span class="n">-name</span> <span class="s2">&quot;IDE Controller&quot;</span> <span class="p">-</span><span class="n">-add</span> <span class="n">ide</span> <span class="p">-</span><span class="n">-controller</span> <span class="n">ICH6</span> <span class="p">-</span><span class="n">-portcount</span> <span class="n">2</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15"></a><a href="#__codelineno-1-15"><span class="linenos" data-linenos="15 "></span></a><span class="p">&amp;</span> <span class="s2">&quot;${Env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe&quot;</span> <span class="n">storagectl</span> <span class="s2">&quot;Gentoo&quot;</span> <span class="p">-</span><span class="n">-name</span> <span class="s2">&quot;AHCI Controller&quot;</span> <span class="p">-</span><span class="n">-add</span> <span class="n">sata</span> <span class="p">-</span><span class="n">-controller</span> <span class="n">IntelAHCI</span> <span class="p">-</span><span class="n">-portcount</span> <span class="n">4</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16"></a><a href="#__codelineno-1-16"><span class="linenos" data-linenos="16 "></span></a>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17"></a><a href="#__codelineno-1-17"><span class="linenos" data-linenos="17 "></span></a><span class="p">&amp;</span> <span class="s2">&quot;${Env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe&quot;</span> <span class="n">storageattach</span> <span class="s2">&quot;Gentoo&quot;</span> <span class="p">-</span><span class="n">-storagectl</span> <span class="s2">&quot;AHCI Controller&quot;</span> <span class="p">-</span><span class="n">-port</span> <span class="n">0</span> <span class="p">-</span><span class="n">-device</span> <span class="n">0</span> <span class="p">-</span><span class="n">-type</span> <span class="n">hdd</span> <span class="p">-</span><span class="n">-medium</span> <span class="s2">&quot;Gentoo1.vdi&quot;</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18"></a><a href="#__codelineno-1-18"><span class="linenos" data-linenos="18 "></span></a><span class="p">&amp;</span> <span class="s2">&quot;${Env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe&quot;</span> <span class="n">storageattach</span> <span class="s2">&quot;Gentoo&quot;</span> <span class="p">-</span><span class="n">-storagectl</span> <span class="s2">&quot;AHCI Controller&quot;</span> <span class="p">-</span><span class="n">-port</span> <span class="n">1</span> <span class="p">-</span><span class="n">-device</span> <span class="n">0</span> <span class="p">-</span><span class="n">-type</span> <span class="n">hdd</span> <span class="p">-</span><span class="n">-medium</span> <span class="s2">&quot;Gentoo2.vdi&quot;</span>
</span></code></pre></div>
<p>Die virtuelle Maschine, genauer die virtuelle Netzwerkkarte, kann dank NAT zwar problemlos mit der Aussenwelt, aber
leider nicht direkt mit dem Hostsystem kommunizieren. Aus diesem Grund richten wir nun für den <abbr title="Secure Shell">SSH</abbr>-Zugang noch ein
Portforwarding ein, welches den Port 2222 des Hostsystems auf den Port 22 der virtuellen Maschine weiterleitet.</p>
<div class="language-powershell highlight"><span class="filename">PowerShell</span><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a><a href="#__codelineno-2-1"><span class="linenos" data-linenos="1 "></span></a><span class="p">&amp;</span> <span class="s2">&quot;${Env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe&quot;</span> <span class="n">modifyvm</span> <span class="s2">&quot;Gentoo&quot;</span> <span class="p">-</span><span class="n">-natpf1</span> <span class="n">SSH</span><span class="p">,</span><span class="n">tcp</span><span class="p">,,</span><span class="n">2222</span><span class="p">,,</span><span class="n">22</span>
</span></code></pre></div>
<p>Nachdem die virtuelle Maschine nun konfiguriert ist, wird es Zeit diese zu booten.</p>
<h2 id="rescuesystem-booten">RescueSystem booten<a class="headerlink" href="#rescuesystem-booten" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Um unser Gentoo Linux Hardened installieren zu können, müssen wir unsere virtuelle Maschine mit einem RescueSystem
booten. Hierfür eignet sich die auf <a href="https://www.gentoo.org/" rel="noopener" target="_blank">Gentoo Linux</a>
basierende <a href="https://www.system-rescue.org/" rel="noopener" target="_blank">SystemRescueCD</a> am Besten, welche wir
mittels des mit Windows mitgelieferten FTP-Client herunterladen und unserer virtuellen Maschine als Bootmedium zuweisen.</p>
<div class="language-powershell highlight"><span class="filename">PowerShell</span><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1"></a><a href="#__codelineno-3-1"><span class="linenos" data-linenos="1 "></span></a><span class="nb">cd </span><span class="s2">&quot;${Env:USERPROFILE}\VirtualBox VMs\Gentoo&quot;</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2"></a><a href="#__codelineno-3-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3"></a><a href="#__codelineno-3-3"><span class="linenos" data-linenos="3 "></span></a><span class="n">ftp</span> <span class="n">-A</span> <span class="n">ftp</span><span class="p">.</span><span class="n">halifax</span><span class="p">.</span><span class="n">rwth-aachen</span><span class="p">.</span><span class="n">de</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4"></a><a href="#__codelineno-3-4"><span class="linenos" data-linenos="4 "></span></a><span class="nb">cd </span><span class="n">osdn</span><span class="p">/</span><span class="n">storage</span><span class="p">/</span><span class="n">g</span><span class="p">/</span><span class="n">s</span><span class="p">/</span><span class="n">sy</span><span class="p">/</span><span class="n">systemrescuecd</span><span class="p">/</span><span class="n">releases</span><span class="p">/</span><span class="n">7</span><span class="p">.</span><span class="n">01</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5"></a><a href="#__codelineno-3-5"><span class="linenos" data-linenos="5 "></span></a><span class="n">binary</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6"></a><a href="#__codelineno-3-6"><span class="linenos" data-linenos="6 "></span></a><span class="n">get</span> <span class="n">systemrescue</span><span class="p">-</span><span class="n">7</span><span class="p">.</span><span class="n">01-amd64</span><span class="p">.</span><span class="n">iso</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7"></a><a href="#__codelineno-3-7"><span class="linenos" data-linenos="7 "></span></a><span class="n">quit</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8"></a><a href="#__codelineno-3-8"><span class="linenos" data-linenos="8 "></span></a>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9"></a><a href="#__codelineno-3-9"><span class="linenos" data-linenos="9 "></span></a><span class="p">&amp;</span> <span class="s2">&quot;${Env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe&quot;</span> <span class="n">storageattach</span> <span class="s2">&quot;Gentoo&quot;</span> <span class="p">-</span><span class="n">-storagectl</span> <span class="s2">&quot;IDE Controller&quot;</span> <span class="p">-</span><span class="n">-port</span> <span class="n">0</span> <span class="p">-</span><span class="n">-device</span> <span class="n">0</span> <span class="p">-</span><span class="n">-type</span> <span class="n">dvddrive</span> <span class="p">-</span><span class="n">-medium</span> <span class="s2">&quot;systemrescue-7.01-amd64.iso&quot;</span>
</span></code></pre></div>
<p>Wir können das RescueSystem jetzt booten.</p>
<div class="language-powershell highlight"><span class="filename">PowerShell</span><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a><a href="#__codelineno-4-1"><span class="linenos" data-linenos="1 "></span></a><span class="p">&amp;</span> <span class="s2">&quot;${Env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe&quot;</span> <span class="n">startvm</span> <span class="s2">&quot;Gentoo&quot;</span>
</span></code></pre></div>
<p>Im Bootmenü wählen wir die erste Option "boot with default options" aus.</p>
<p>Wer mit dem amerikanischen Tastaturlayout nicht zurechtkommt, sollte während des Bootens die Frage nach der Keymap mit
<code>de</code> beantworten.</p>
<p>Ist der Bootvorgang abgeschlossen, wird als Erstes das root-Passwort für das RescueSystem gesetzt.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1"></a><a href="#__codelineno-5-1"><span class="linenos" data-linenos="1 "></span></a>passwd<span class="w"> </span>root
</span></code></pre></div>
<p>Jetzt sollten wir uns mittels PuTTY als <code>root</code> in das RescueSystem einloggen und mit der Installation unseres Gentoo
Linux Hardened fortfahren können.</p>
<div class="language-powershell highlight"><span class="filename">PowerShell</span><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1"></a><a href="#__codelineno-6-1"><span class="linenos" data-linenos="1 "></span></a><span class="n">putty</span> <span class="n">-ssh</span> <span class="n">-P</span> <span class="n">2222</span> <span class="n">root</span><span class="nv">@127</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">1</span>
</span></code></pre></div>
<h2 id="partitionieren-der-festplatte">Partitionieren der Festplatte<a class="headerlink" href="#partitionieren-der-festplatte" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Bevor wir anfangen, bereinigen wir die Festplatten von jeglichen Datenrückständen, indem wir sie mit Nullen
überschreiben. Je nach Festplattengrösse kann dies einige Stunden bis Tage in Anspruch nehmen. Aus diesem Grund
verlegen wir diese Jobs mittels <code>nohup</code> in den Hintergrund, so dass wir uns zwischenzeitlich ausloggen können ohne dass
dabei die Jobs automatisch von der Shell abgebrochen werden. Ob die Jobs fertig sind, lässt dann mittels <code>ps -auxfwww</code>
und <code>top -atCP</code> ermitteln.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1"></a><a href="#__codelineno-7-1"><span class="linenos" data-linenos="1 "></span></a>nohup<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/dev/zero<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/dev/sda<span class="w"> </span><span class="nv">bs</span><span class="o">=</span><span class="m">512</span><span class="w">  </span><span class="p">&amp;</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2"></a><a href="#__codelineno-7-2"><span class="linenos" data-linenos="2 "></span></a>nohup<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/dev/zero<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/dev/sdb<span class="w"> </span><span class="nv">bs</span><span class="o">=</span><span class="m">512</span><span class="w">  </span><span class="p">&amp;</span>
</span></code></pre></div>
<p>Da jeder Administrator andere Präferenzen an sein Partitionslayout stellt und wir andernfalls mit diesem HowTo nicht
weiterkommen, verwenden wir im Folgenden ein Standard-Partitionslayout. Fortgeschrittenere Linux-Administratoren können
dieses Partitionslayout selbstverständlich an ihre eigenen Bedürfnisse anpassen.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Partition</th>
<th style="text-align: left;">Mountpunkt</th>
<th style="text-align: center;">Filesystem</th>
<th style="text-align: right;">Grösse</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">/dev/sda1 /dev/sdb1</td>
<td style="text-align: left;">none</td>
<td style="text-align: center;">[bootloader]</td>
<td style="text-align: right;">2 MB</td>
</tr>
<tr>
<td style="text-align: left;">/dev/sda2 /dev/sdb2</td>
<td style="text-align: left;">/boot</td>
<td style="text-align: center;">EXT2</td>
<td style="text-align: right;">512 MB</td>
</tr>
<tr>
<td style="text-align: left;">/dev/sda3 /dev/sdb3</td>
<td style="text-align: left;">/</td>
<td style="text-align: center;">EXT3</td>
<td style="text-align: right;">16 GB</td>
</tr>
<tr>
<td style="text-align: left;">/dev/sda4 /dev/sdb4</td>
<td style="text-align: left;">/data</td>
<td style="text-align: center;">EXT3</td>
<td style="text-align: right;">8 GB</td>
</tr>
<tr>
<td style="text-align: left;">/dev/sda5 /dev/sdb5</td>
<td style="text-align: left;">none</td>
<td style="text-align: center;">[swap]</td>
<td style="text-align: right;">4 GB</td>
</tr>
</tbody>
</table>
<p>Die Partitionen legen wir nun mittels parted an.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1"></a><a href="#__codelineno-8-1"><span class="linenos" data-linenos=" 1 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>-a<span class="w"> </span>optimal<span class="w"> </span>/dev/sda
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2"></a><a href="#__codelineno-8-2"><span class="linenos" data-linenos=" 2 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>-a<span class="w"> </span>optimal<span class="w"> </span>/dev/sdb
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3"></a><a href="#__codelineno-8-3"><span class="linenos" data-linenos=" 3 "></span></a>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4"></a><a href="#__codelineno-8-4"><span class="linenos" data-linenos=" 4 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sda<span class="w"> </span>mklabel<span class="w"> </span>gpt
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5"></a><a href="#__codelineno-8-5"><span class="linenos" data-linenos=" 5 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sdb<span class="w"> </span>mklabel<span class="w"> </span>gpt
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6"></a><a href="#__codelineno-8-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7"></a><a href="#__codelineno-8-7"><span class="linenos" data-linenos=" 7 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sda<span class="w"> </span>mkpart<span class="w"> </span>primary<span class="w"> </span>4096s<span class="w"> </span>8191s
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8"></a><a href="#__codelineno-8-8"><span class="linenos" data-linenos=" 8 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sdb<span class="w"> </span>mkpart<span class="w"> </span>primary<span class="w"> </span>4096s<span class="w"> </span>8191s
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9"></a><a href="#__codelineno-8-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10"></a><a href="#__codelineno-8-10"><span class="linenos" data-linenos="10 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sda<span class="w"> </span>mkpart<span class="w"> </span>primary<span class="w"> </span>8192s<span class="w"> </span>1056767s
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11"></a><a href="#__codelineno-8-11"><span class="linenos" data-linenos="11 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sdb<span class="w"> </span>mkpart<span class="w"> </span>primary<span class="w"> </span>8192s<span class="w"> </span>1056767s
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12"></a><a href="#__codelineno-8-12"><span class="linenos" data-linenos="12 "></span></a>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13"></a><a href="#__codelineno-8-13"><span class="linenos" data-linenos="13 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sda<span class="w"> </span>mkpart<span class="w"> </span>primary<span class="w"> </span>1056768s<span class="w"> </span>34611199s
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14"></a><a href="#__codelineno-8-14"><span class="linenos" data-linenos="14 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sdb<span class="w"> </span>mkpart<span class="w"> </span>primary<span class="w"> </span>1056768s<span class="w"> </span>34611199s
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15"></a><a href="#__codelineno-8-15"><span class="linenos" data-linenos="15 "></span></a>
</span><span id="__span-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16"></a><a href="#__codelineno-8-16"><span class="linenos" data-linenos="16 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sda<span class="w"> </span>mkpart<span class="w"> </span>primary<span class="w"> </span>34611200s<span class="w"> </span>51388415s
</span><span id="__span-8-17"><a id="__codelineno-8-17" name="__codelineno-8-17"></a><a href="#__codelineno-8-17"><span class="linenos" data-linenos="17 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sdb<span class="w"> </span>mkpart<span class="w"> </span>primary<span class="w"> </span>34611200s<span class="w"> </span>51388415s
</span><span id="__span-8-18"><a id="__codelineno-8-18" name="__codelineno-8-18"></a><a href="#__codelineno-8-18"><span class="linenos" data-linenos="18 "></span></a>
</span><span id="__span-8-19"><a id="__codelineno-8-19" name="__codelineno-8-19"></a><a href="#__codelineno-8-19"><span class="linenos" data-linenos="19 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sda<span class="w"> </span>mkpart<span class="w"> </span>primary<span class="w"> </span>51388416s<span class="w"> </span>59777023s
</span><span id="__span-8-20"><a id="__codelineno-8-20" name="__codelineno-8-20"></a><a href="#__codelineno-8-20"><span class="linenos" data-linenos="20 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sdb<span class="w"> </span>mkpart<span class="w"> </span>primary<span class="w"> </span>51388416s<span class="w"> </span>59777923s
</span><span id="__span-8-21"><a id="__codelineno-8-21" name="__codelineno-8-21"></a><a href="#__codelineno-8-21"><span class="linenos" data-linenos="21 "></span></a>
</span><span id="__span-8-22"><a id="__codelineno-8-22" name="__codelineno-8-22"></a><a href="#__codelineno-8-22"><span class="linenos" data-linenos="22 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sda<span class="w"> </span>name<span class="w"> </span><span class="m">1</span><span class="w"> </span>grub
</span><span id="__span-8-23"><a id="__codelineno-8-23" name="__codelineno-8-23"></a><a href="#__codelineno-8-23"><span class="linenos" data-linenos="23 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sdb<span class="w"> </span>name<span class="w"> </span><span class="m">1</span><span class="w"> </span>grub
</span><span id="__span-8-24"><a id="__codelineno-8-24" name="__codelineno-8-24"></a><a href="#__codelineno-8-24"><span class="linenos" data-linenos="24 "></span></a>
</span><span id="__span-8-25"><a id="__codelineno-8-25" name="__codelineno-8-25"></a><a href="#__codelineno-8-25"><span class="linenos" data-linenos="25 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sda<span class="w"> </span>name<span class="w"> </span><span class="m">2</span><span class="w"> </span>boot
</span><span id="__span-8-26"><a id="__codelineno-8-26" name="__codelineno-8-26"></a><a href="#__codelineno-8-26"><span class="linenos" data-linenos="26 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sdb<span class="w"> </span>name<span class="w"> </span><span class="m">2</span><span class="w"> </span>boot
</span><span id="__span-8-27"><a id="__codelineno-8-27" name="__codelineno-8-27"></a><a href="#__codelineno-8-27"><span class="linenos" data-linenos="27 "></span></a>
</span><span id="__span-8-28"><a id="__codelineno-8-28" name="__codelineno-8-28"></a><a href="#__codelineno-8-28"><span class="linenos" data-linenos="28 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sda<span class="w"> </span>name<span class="w"> </span><span class="m">3</span><span class="w"> </span>rootfs
</span><span id="__span-8-29"><a id="__codelineno-8-29" name="__codelineno-8-29"></a><a href="#__codelineno-8-29"><span class="linenos" data-linenos="29 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sdb<span class="w"> </span>name<span class="w"> </span><span class="m">3</span><span class="w"> </span>rootfs
</span><span id="__span-8-30"><a id="__codelineno-8-30" name="__codelineno-8-30"></a><a href="#__codelineno-8-30"><span class="linenos" data-linenos="30 "></span></a>
</span><span id="__span-8-31"><a id="__codelineno-8-31" name="__codelineno-8-31"></a><a href="#__codelineno-8-31"><span class="linenos" data-linenos="31 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sda<span class="w"> </span>name<span class="w"> </span><span class="m">4</span><span class="w"> </span>data
</span><span id="__span-8-32"><a id="__codelineno-8-32" name="__codelineno-8-32"></a><a href="#__codelineno-8-32"><span class="linenos" data-linenos="32 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sdb<span class="w"> </span>name<span class="w"> </span><span class="m">4</span><span class="w"> </span>data
</span><span id="__span-8-33"><a id="__codelineno-8-33" name="__codelineno-8-33"></a><a href="#__codelineno-8-33"><span class="linenos" data-linenos="33 "></span></a>
</span><span id="__span-8-34"><a id="__codelineno-8-34" name="__codelineno-8-34"></a><a href="#__codelineno-8-34"><span class="linenos" data-linenos="34 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sda<span class="w"> </span>name<span class="w"> </span><span class="m">5</span><span class="w"> </span>swap
</span><span id="__span-8-35"><a id="__codelineno-8-35" name="__codelineno-8-35"></a><a href="#__codelineno-8-35"><span class="linenos" data-linenos="35 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sdb<span class="w"> </span>name<span class="w"> </span><span class="m">5</span><span class="w"> </span>swap
</span><span id="__span-8-36"><a id="__codelineno-8-36" name="__codelineno-8-36"></a><a href="#__codelineno-8-36"><span class="linenos" data-linenos="36 "></span></a>
</span><span id="__span-8-37"><a id="__codelineno-8-37" name="__codelineno-8-37"></a><a href="#__codelineno-8-37"><span class="linenos" data-linenos="37 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sda<span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>bios_grub<span class="w"> </span>on
</span><span id="__span-8-38"><a id="__codelineno-8-38" name="__codelineno-8-38"></a><a href="#__codelineno-8-38"><span class="linenos" data-linenos="38 "></span></a>parted<span class="w"> </span>-s<span class="w"> </span>/dev/sdb<span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>bios_grub<span class="w"> </span>on
</span></code></pre></div>
<p>Für eine leicht erhöhte Datensicherheit legen wir nun noch mittels <code>mdadm</code> ein Software-RAID1 an.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1"></a><a href="#__codelineno-9-1"><span class="linenos" data-linenos=" 1 "></span></a>mknod<span class="w"> </span>/dev/md2<span class="w"> </span>b<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">2</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2"></a><a href="#__codelineno-9-2"><span class="linenos" data-linenos=" 2 "></span></a>mknod<span class="w"> </span>/dev/md3<span class="w"> </span>b<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">3</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3"></a><a href="#__codelineno-9-3"><span class="linenos" data-linenos=" 3 "></span></a>mknod<span class="w"> </span>/dev/md4<span class="w"> </span>b<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">4</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4"></a><a href="#__codelineno-9-4"><span class="linenos" data-linenos=" 4 "></span></a>mknod<span class="w"> </span>/dev/md5<span class="w"> </span>b<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">5</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5"></a><a href="#__codelineno-9-5"><span class="linenos" data-linenos=" 5 "></span></a>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6"></a><a href="#__codelineno-9-6"><span class="linenos" data-linenos=" 6 "></span></a>cat<span class="w"> </span>&gt;&gt;<span class="w"> </span>/etc/mdadm.conf<span class="w"> </span>&lt;&lt;<span class="w"> </span><span class="s2">&quot;EOF&quot;</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7"></a><a href="#__codelineno-9-7"><span class="linenos" data-linenos=" 7 "></span></a>MAILADDR<span class="w"> </span>root@localhost
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8"></a><a href="#__codelineno-9-8"><span class="linenos" data-linenos=" 8 "></span></a>MAILFROM<span class="w"> </span>root@localhost
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9"></a><a href="#__codelineno-9-9"><span class="linenos" data-linenos=" 9 "></span></a>CREATE<span class="w"> </span><span class="nv">metadata</span><span class="o">=</span><span class="m">1</span>.2
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10"></a><a href="#__codelineno-9-10"><span class="linenos" data-linenos="10 "></span></a>HOMEHOST<span class="w"> </span>&lt;none&gt;
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11"></a><a href="#__codelineno-9-11"><span class="linenos" data-linenos="11 "></span></a>DEVICE<span class="w"> </span>/dev/sd*<span class="o">[</span><span class="m">0</span>-9<span class="o">]</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12"></a><a href="#__codelineno-9-12"><span class="linenos" data-linenos="12 "></span></a>EOF
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13"></a><a href="#__codelineno-9-13"><span class="linenos" data-linenos="13 "></span></a>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14"></a><a href="#__codelineno-9-14"><span class="linenos" data-linenos="14 "></span></a>mdadm<span class="w"> </span>--create<span class="w"> </span>/dev/md2<span class="w"> </span>--name<span class="o">=</span>boot<span class="w"> </span>--bitmap<span class="o">=</span>internal<span class="w"> </span>--level<span class="o">=</span>raid1<span class="w"> </span>--raid-devices<span class="o">=</span><span class="m">2</span><span class="w"> </span>--metadata<span class="o">=</span><span class="m">1</span>.2<span class="w"> </span>/dev/sd<span class="o">[</span>ab<span class="o">]</span><span class="m">2</span>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15"></a><a href="#__codelineno-9-15"><span class="linenos" data-linenos="15 "></span></a>mdadm<span class="w"> </span>--create<span class="w"> </span>/dev/md3<span class="w"> </span>--name<span class="o">=</span>root<span class="w"> </span>--bitmap<span class="o">=</span>internal<span class="w"> </span>--level<span class="o">=</span>raid1<span class="w"> </span>--raid-devices<span class="o">=</span><span class="m">2</span><span class="w"> </span>--metadata<span class="o">=</span><span class="m">1</span>.2<span class="w"> </span>/dev/sd<span class="o">[</span>ab<span class="o">]</span><span class="m">3</span>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16"></a><a href="#__codelineno-9-16"><span class="linenos" data-linenos="16 "></span></a>mdadm<span class="w"> </span>--create<span class="w"> </span>/dev/md4<span class="w"> </span>--name<span class="o">=</span>data<span class="w"> </span>--bitmap<span class="o">=</span>internal<span class="w"> </span>--level<span class="o">=</span>raid1<span class="w"> </span>--raid-devices<span class="o">=</span><span class="m">2</span><span class="w"> </span>--metadata<span class="o">=</span><span class="m">1</span>.2<span class="w"> </span>/dev/sd<span class="o">[</span>ab<span class="o">]</span><span class="m">4</span>
</span><span id="__span-9-17"><a id="__codelineno-9-17" name="__codelineno-9-17"></a><a href="#__codelineno-9-17"><span class="linenos" data-linenos="17 "></span></a>mdadm<span class="w"> </span>--create<span class="w"> </span>/dev/md5<span class="w"> </span>--name<span class="o">=</span>swap<span class="w"> </span>--bitmap<span class="o">=</span>internal<span class="w"> </span>--level<span class="o">=</span>raid1<span class="w"> </span>--raid-devices<span class="o">=</span><span class="m">2</span><span class="w"> </span>--metadata<span class="o">=</span><span class="m">1</span>.2<span class="w"> </span>/dev/sd<span class="o">[</span>ab<span class="o">]</span><span class="m">5</span>
</span></code></pre></div>
<h2 id="formatieren-der-partitionen">Formatieren der Partitionen<a class="headerlink" href="#formatieren-der-partitionen" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Die frisch angelegten Partitionen müssen selbstverständlich noch formatiert werden. Normalerweise formatiere ich die
Rootpartition mit XFS, da allerdings nicht jeder Administrator XFS für seine Rootpartition verwenden möchte, werden wir
ein manuell optimiertes EXT3 anlegen. Dieses ist nötig, da die e2fsprogs bei einigen Distributionen und somit auch
RescueSystemen oft veraltet oder suboptimal konfiguriert sind und daher nicht immer ein für Server optimiertes EXT3
erzeugen.</p>
<p>Die Bootpartition sollte grundsätzlich mit EXT2 formatiert weren, da dieses Filesystem als Einziges von allen gängigen
Linux-Bootloadern fehlerfrei unterstützt wird.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1"></a><a href="#__codelineno-10-1"><span class="linenos" data-linenos=" 1 "></span></a>mke2fs<span class="w"> </span>-c<span class="w"> </span>-b<span class="w"> </span><span class="m">4096</span><span class="w"> </span>-t<span class="w"> </span>ext2<span class="w"> </span>/dev/md2
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2"></a><a href="#__codelineno-10-2"><span class="linenos" data-linenos=" 2 "></span></a>tune2fs<span class="w"> </span>-c<span class="w"> </span><span class="m">0</span><span class="w"> </span>-i<span class="w"> </span><span class="m">0</span><span class="w"> </span>/dev/md2
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3"></a><a href="#__codelineno-10-3"><span class="linenos" data-linenos=" 3 "></span></a>tune2fs<span class="w"> </span>-e<span class="w"> </span><span class="k">continue</span><span class="w"> </span>/dev/md2
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4"></a><a href="#__codelineno-10-4"><span class="linenos" data-linenos=" 4 "></span></a>tune2fs<span class="w"> </span>-O<span class="w"> </span>dir_index<span class="w"> </span>/dev/md2
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5"></a><a href="#__codelineno-10-5"><span class="linenos" data-linenos=" 5 "></span></a>tune2fs<span class="w"> </span>-o<span class="w"> </span>user_xattr,acl<span class="w"> </span>/dev/md2
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6"></a><a href="#__codelineno-10-6"><span class="linenos" data-linenos=" 6 "></span></a>e2fsck<span class="w"> </span>-D<span class="w"> </span>/dev/md2
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7"></a><a href="#__codelineno-10-7"><span class="linenos" data-linenos=" 7 "></span></a>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8"></a><a href="#__codelineno-10-8"><span class="linenos" data-linenos=" 8 "></span></a>mke2fs<span class="w"> </span>-c<span class="w"> </span>-b<span class="w"> </span><span class="m">4096</span><span class="w"> </span>-t<span class="w"> </span>ext3<span class="w"> </span>-j<span class="w"> </span>/dev/md3
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9"></a><a href="#__codelineno-10-9"><span class="linenos" data-linenos=" 9 "></span></a>tune2fs<span class="w"> </span>-c<span class="w"> </span><span class="m">0</span><span class="w"> </span>-i<span class="w"> </span><span class="m">0</span><span class="w"> </span>/dev/md3
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10"></a><a href="#__codelineno-10-10"><span class="linenos" data-linenos="10 "></span></a>tune2fs<span class="w"> </span>-e<span class="w"> </span><span class="k">continue</span><span class="w"> </span>/dev/md3
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11"></a><a href="#__codelineno-10-11"><span class="linenos" data-linenos="11 "></span></a>tune2fs<span class="w"> </span>-O<span class="w"> </span>dir_index,large_file<span class="w"> </span>/dev/md3
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12"></a><a href="#__codelineno-10-12"><span class="linenos" data-linenos="12 "></span></a>tune2fs<span class="w"> </span>-o<span class="w"> </span>user_xattr,acl,journal_data<span class="w"> </span>/dev/md3
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13"></a><a href="#__codelineno-10-13"><span class="linenos" data-linenos="13 "></span></a>e2fsck<span class="w"> </span>-D<span class="w"> </span>/dev/md3
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14"></a><a href="#__codelineno-10-14"><span class="linenos" data-linenos="14 "></span></a>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15"></a><a href="#__codelineno-10-15"><span class="linenos" data-linenos="15 "></span></a>mke2fs<span class="w"> </span>-c<span class="w"> </span>-b<span class="w"> </span><span class="m">4096</span><span class="w"> </span>-t<span class="w"> </span>ext3<span class="w"> </span>-j<span class="w"> </span>/dev/md4
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16"></a><a href="#__codelineno-10-16"><span class="linenos" data-linenos="16 "></span></a>tune2fs<span class="w"> </span>-c<span class="w"> </span><span class="m">0</span><span class="w"> </span>-i<span class="w"> </span><span class="m">0</span><span class="w"> </span>/dev/md4
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17"></a><a href="#__codelineno-10-17"><span class="linenos" data-linenos="17 "></span></a>tune2fs<span class="w"> </span>-e<span class="w"> </span><span class="k">continue</span><span class="w"> </span>/dev/md4
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18"></a><a href="#__codelineno-10-18"><span class="linenos" data-linenos="18 "></span></a>tune2fs<span class="w"> </span>-O<span class="w"> </span>dir_index,large_file<span class="w"> </span>/dev/md4
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19"></a><a href="#__codelineno-10-19"><span class="linenos" data-linenos="19 "></span></a>tune2fs<span class="w"> </span>-o<span class="w"> </span>user_xattr,acl,journal_data<span class="w"> </span>/dev/md4
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20"></a><a href="#__codelineno-10-20"><span class="linenos" data-linenos="20 "></span></a>e2fsck<span class="w"> </span>-D<span class="w"> </span>/dev/md4
</span><span id="__span-10-21"><a id="__codelineno-10-21" name="__codelineno-10-21"></a><a href="#__codelineno-10-21"><span class="linenos" data-linenos="21 "></span></a>
</span><span id="__span-10-22"><a id="__codelineno-10-22" name="__codelineno-10-22"></a><a href="#__codelineno-10-22"><span class="linenos" data-linenos="22 "></span></a>mkswap<span class="w"> </span>-c<span class="w"> </span>/dev/md5
</span></code></pre></div>
<h2 id="mounten-der-partitionen">Mounten der Partitionen<a class="headerlink" href="#mounten-der-partitionen" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Nun werden die Partitionen für unsere zur Installation benötigten Chroot-Umgebung gemountet und der Swapspace aktiviert.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1"></a><a href="#__codelineno-11-1"><span class="linenos" data-linenos="1 "></span></a>swapon<span class="w"> </span>/dev/md5
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2"></a><a href="#__codelineno-11-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3"></a><a href="#__codelineno-11-3"><span class="linenos" data-linenos="3 "></span></a>mkdir<span class="w"> </span>-p<span class="w"> </span>/mnt/gentoo
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4"></a><a href="#__codelineno-11-4"><span class="linenos" data-linenos="4 "></span></a>mount<span class="w"> </span>-t<span class="w"> </span>ext3<span class="w"> </span>-o<span class="w"> </span>defaults,relatime,barrier<span class="o">=</span><span class="m">1</span><span class="w"> </span>/dev/md3<span class="w"> </span>/mnt/gentoo
</span></code></pre></div>
<h2 id="entpacken-des-stage-tarballs">Entpacken des Stage-Tarballs<a class="headerlink" href="#entpacken-des-stage-tarballs" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Der Stage3-Tarball enthält ein minimalistisches Gentoo Linux Hardened, welches alle zur Installation notwendigen Tools
enthält und uns als Chroot-Umgebung dient. Wir müssen nun den aktuellen Stage3-Tarball ermitteln, wozu wir die
entsprechende Angabe vom <a href="https://gentoo.osuosl.org/" rel="noopener" target="_blank">Gentoo Linux Master Mirror</a>
verwenden und diese in dem folgenden zweiten wget-Aufruf entsprechend ersetzen. Den Stage3-Tarball werden wir bereits
während des Download direkt nach <code>/mnt/gentoo</code> entpacken.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1"></a><a href="#__codelineno-12-1"><span class="linenos" data-linenos="1 "></span></a>wget<span class="w"> </span>-q<span class="w"> </span>-O<span class="w"> </span>-<span class="w"> </span><span class="s2">&quot;https://gentoo.osuosl.org/releases/amd64/autobuilds/latest-stage3-amd64-hardened+nomultilib.txt&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tail<span class="w"> </span>-n<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2"></a><a href="#__codelineno-12-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">     </span>xargs<span class="w"> </span>-I<span class="w"> </span>%<span class="w"> </span>wget<span class="w"> </span>-q<span class="w"> </span>-O<span class="w"> </span>-<span class="w"> </span><span class="s2">&quot;https://gentoo.osuosl.org/releases/amd64/autobuilds/%&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tar<span class="w"> </span>xpjvf<span class="w"> </span>-<span class="w"> </span>-C<span class="w"> </span>/mnt/gentoo/
</span></code></pre></div>
<h2 id="vorbereiten-der-chroot-umgebung">Vorbereiten der Chroot-Umgebung<a class="headerlink" href="#vorbereiten-der-chroot-umgebung" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Vor dem Wechsel in die Chroot-Umgebung müssen wir noch die <code>resolv.conf</code> und <code>mdadm.conf</code> in die Chroot-Umgebung
kopieren und die für eine erfolgreiche Installation noch fehlenden Filesysteme mounten.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1"></a><a href="#__codelineno-13-1"><span class="linenos" data-linenos="1 "></span></a>cp<span class="w"> </span>/etc/resolv.conf<span class="w"> </span>/mnt/gentoo/etc/resolv.conf
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2"></a><a href="#__codelineno-13-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3"></a><a href="#__codelineno-13-3"><span class="linenos" data-linenos="3 "></span></a>mount<span class="w"> </span>-t<span class="w"> </span>proc<span class="w"> </span>none<span class="w"> </span>/mnt/gentoo/proc
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4"></a><a href="#__codelineno-13-4"><span class="linenos" data-linenos="4 "></span></a>mount<span class="w"> </span>-o<span class="w"> </span><span class="nb">bind</span><span class="w"> </span>/sys<span class="w"> </span>/mnt/gentoo/sys
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5"></a><a href="#__codelineno-13-5"><span class="linenos" data-linenos="5 "></span></a>mount<span class="w"> </span>-o<span class="w"> </span><span class="nb">bind</span><span class="w"> </span>/dev<span class="w"> </span>/mnt/gentoo/dev
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6"></a><a href="#__codelineno-13-6"><span class="linenos" data-linenos="6 "></span></a>mount<span class="w"> </span>-o<span class="w"> </span><span class="nb">bind</span><span class="w"> </span>/dev/pts<span class="w"> </span>/mnt/gentoo/dev/pts
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7"></a><a href="#__codelineno-13-7"><span class="linenos" data-linenos="7 "></span></a>mount<span class="w"> </span>-o<span class="w"> </span><span class="nb">bind</span><span class="w"> </span>/dev/shm<span class="w"> </span>/mnt/gentoo/dev/shm
</span></code></pre></div>
<h2 id="betreten-der-chroot-umgebung">Betreten der Chroot-Umgebung<a class="headerlink" href="#betreten-der-chroot-umgebung" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Beim Betreten der Chroot-Umgebung setzen wir mittels <code>/bin/env -i</code> erstmal alle Environment-Variablen zurück.
Andererseits benötigen wir aber die Environment-Variablen <code>HOME</code>, <code>TERM</code>, <code>PS1</code> und <code>PATH</code>, welche wir manuell auf
sinnvolle Defaults setzen.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1"></a><a href="#__codelineno-14-1"><span class="linenos" data-linenos="1 "></span></a>chroot<span class="w"> </span>/mnt/gentoo<span class="w"> </span>/bin/env<span class="w"> </span>-i<span class="w"> </span><span class="nv">HOME</span><span class="o">=</span>/root<span class="w"> </span><span class="nv">TERM</span><span class="o">=</span><span class="nv">$TERM</span><span class="w"> </span><span class="nv">PS1</span><span class="o">=</span><span class="s1">&#39;\u:\w\$ &#39;</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span>/sbin:/bin:/usr/sbin:/usr/bin<span class="w"> </span>/bin/bash<span class="w"> </span>+h
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2"></a><a href="#__codelineno-14-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3"></a><a href="#__codelineno-14-3"><span class="linenos" data-linenos="3 "></span></a>mkdir<span class="w"> </span>/data
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4"></a><a href="#__codelineno-14-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5"></a><a href="#__codelineno-14-5"><span class="linenos" data-linenos="5 "></span></a>mount<span class="w"> </span>-t<span class="w"> </span>ext2<span class="w"> </span>-o<span class="w"> </span>defaults,relatime<span class="w"> </span>/dev/md2<span class="w"> </span>/boot
</span></code></pre></div>
<h2 id="setup-der-chroot-umgebung">Setup der Chroot-Umgebung<a class="headerlink" href="#setup-der-chroot-umgebung" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Wir setzen die Timezone, legen die <code>mtab</code> an und aktualisieren das Environment.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1"></a><a href="#__codelineno-15-1"><span class="linenos" data-linenos="1 "></span></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Europe/Berlin&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/etc/timezone
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2"></a><a href="#__codelineno-15-2"><span class="linenos" data-linenos="2 "></span></a>emerge<span class="w"> </span>--config<span class="w"> </span>sys-libs/timezone-data
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3"></a><a href="#__codelineno-15-3"><span class="linenos" data-linenos="3 "></span></a>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4"></a><a href="#__codelineno-15-4"><span class="linenos" data-linenos="4 "></span></a>grep<span class="w"> </span>-v<span class="w"> </span>rootfs<span class="w"> </span>/proc/mounts<span class="w"> </span>&gt;<span class="w"> </span>/etc/mtab
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5"></a><a href="#__codelineno-15-5"><span class="linenos" data-linenos="5 "></span></a>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6"></a><a href="#__codelineno-15-6"><span class="linenos" data-linenos="6 "></span></a>env-update
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7"></a><a href="#__codelineno-15-7"><span class="linenos" data-linenos="7 "></span></a><span class="nb">source</span><span class="w"> </span>/etc/profile
</span></code></pre></div>
<h2 id="portage-konfigurieren">Portage konfigurieren<a class="headerlink" href="#portage-konfigurieren" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Mittels der <code>/etc/portage/make.conf</code> wird Portage konfiguriert.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1"></a><a href="#__codelineno-16-1"><span class="linenos" data-linenos=" 1 "></span></a>cat<span class="w"> </span>&gt;<span class="w"> </span>/etc/portage/make.conf<span class="w"> </span>&lt;&lt;<span class="w"> </span><span class="s2">&quot;EOF&quot;</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2"></a><a href="#__codelineno-16-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="nv">CHOST</span><span class="o">=</span><span class="s2">&quot;x86_64-pc-linux-gnu&quot;</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3"></a><a href="#__codelineno-16-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="nv">CFLAGS</span><span class="o">=</span><span class="s2">&quot;-O2 -pipe -fomit-frame-pointer -march=native&quot;</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4"></a><a href="#__codelineno-16-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="nv">CXXFLAGS</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CFLAGS</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5"></a><a href="#__codelineno-16-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="nv">FFLAGS</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CFLAGS</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6"></a><a href="#__codelineno-16-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="nv">FCFLAGS</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">FFLAGS</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7"></a><a href="#__codelineno-16-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="nv">PORTDIR</span><span class="o">=</span><span class="s2">&quot;/usr/portage&quot;</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8"></a><a href="#__codelineno-16-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="nv">DISTDIR</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PORTDIR</span><span class="si">}</span><span class="s2">/distfiles&quot;</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9"></a><a href="#__codelineno-16-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="nv">PKGDIR</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PORTDIR</span><span class="si">}</span><span class="s2">/packages&quot;</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10"></a><a href="#__codelineno-16-10"><span class="linenos" data-linenos="10 "></span></a><span class="nv">ACCEPT_KEYWORDS</span><span class="o">=</span><span class="s2">&quot;amd64&quot;</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11"></a><a href="#__codelineno-16-11"><span class="linenos" data-linenos="11 "></span></a><span class="nv">MAKEOPTS</span><span class="o">=</span><span class="s2">&quot;-j2&quot;</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12"></a><a href="#__codelineno-16-12"><span class="linenos" data-linenos="12 "></span></a><span class="nv">LINGUAS</span><span class="o">=</span><span class="s2">&quot;en de&quot;</span>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13"></a><a href="#__codelineno-16-13"><span class="linenos" data-linenos="13 "></span></a><span class="nv">PAX_MARKINGS</span><span class="o">=</span><span class="s2">&quot;XT&quot;</span>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14"></a><a href="#__codelineno-16-14"><span class="linenos" data-linenos="14 "></span></a><span class="nv">USE</span><span class="o">=</span><span class="s2">&quot;-* acl berkdb bzip2 caps crypt cxx ecdsa fam fdformat filecaps \</span>
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15"></a><a href="#__codelineno-16-15"><span class="linenos" data-linenos="15 "></span></a><span class="s2">    firmware-loader gcrypt gd gdbm gmp hardened iconv icu idn ipc ipv6 \</span>
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16"></a><a href="#__codelineno-16-16"><span class="linenos" data-linenos="16 "></span></a><span class="s2">    ithreads jpeg kmod ldns libedit libssp lzma magic mime mktemp mmx \</span>
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17"></a><a href="#__codelineno-16-17"><span class="linenos" data-linenos="17 "></span></a><span class="s2">    mpfr mudflap multicall ncurses net netifrc newnet nls nptl nscd \</span>
</span><span id="__span-16-18"><a id="__codelineno-16-18" name="__codelineno-16-18"></a><a href="#__codelineno-16-18"><span class="linenos" data-linenos="18 "></span></a><span class="s2">    openmp openssl pax_kernel pci pcre pcre16 pcre32 perl pic png posix \</span>
</span><span id="__span-16-19"><a id="__codelineno-16-19" name="__codelineno-16-19"></a><a href="#__codelineno-16-19"><span class="linenos" data-linenos="19 "></span></a><span class="s2">    ptpax python python2 python3 recursion-limit right_timezone sha512 \</span>
</span><span id="__span-16-20"><a id="__codelineno-16-20" name="__codelineno-16-20"></a><a href="#__codelineno-16-20"><span class="linenos" data-linenos="20 "></span></a><span class="s2">    sharedmem sockets sse sse2 ssh ssl threads tiff tools truetype \</span>
</span><span id="__span-16-21"><a id="__codelineno-16-21" name="__codelineno-16-21"></a><a href="#__codelineno-16-21"><span class="linenos" data-linenos="21 "></span></a><span class="s2">    tty-helpers udev unicode urandom usb utils xattr xml xsl xtpax zlib&quot;</span>
</span><span id="__span-16-22"><a id="__codelineno-16-22" name="__codelineno-16-22"></a><a href="#__codelineno-16-22"><span class="linenos" data-linenos="22 "></span></a><span class="nv">PYTHON_TARGETS</span><span class="o">=</span><span class="s2">&quot;python2_7 python3_3 python3_4&quot;</span>
</span><span id="__span-16-23"><a id="__codelineno-16-23" name="__codelineno-16-23"></a><a href="#__codelineno-16-23"><span class="linenos" data-linenos="23 "></span></a><span class="nv">PYTHON_SINGLE_TARGET</span><span class="o">=</span><span class="s2">&quot;python2_7&quot;</span>
</span><span id="__span-16-24"><a id="__codelineno-16-24" name="__codelineno-16-24"></a><a href="#__codelineno-16-24"><span class="linenos" data-linenos="24 "></span></a><span class="nv">CURL_SSL</span><span class="o">=</span><span class="s2">&quot;openssl&quot;</span>
</span><span id="__span-16-25"><a id="__codelineno-16-25" name="__codelineno-16-25"></a><a href="#__codelineno-16-25"><span class="linenos" data-linenos="25 "></span></a>EOF
</span></code></pre></div>
<p>Mittels <code>/etc/portage/package.use</code> werden einzelnen Paketen von der <code>/etc/portage/make.conf</code> abweichende USE-Flags
zugewiesen.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1"></a><a href="#__codelineno-17-1"><span class="linenos" data-linenos="1 "></span></a>cat<span class="w"> </span>&gt;<span class="w"> </span>/etc/portage/package.use<span class="w"> </span>&lt;&lt;<span class="w"> </span><span class="s2">&quot;EOF&quot;</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2"></a><a href="#__codelineno-17-2"><span class="linenos" data-linenos="2 "></span></a>EOF
</span></code></pre></div>
<p>Als Nächstes legen wir mittels <code>emerge-webrsync</code> den Portage-Tree an.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1"></a><a href="#__codelineno-18-1"><span class="linenos" data-linenos="1 "></span></a>emerge-webrsync
</span></code></pre></div>
<h2 id="locales-setzen">Locales setzen<a class="headerlink" href="#locales-setzen" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Da das System später weltweit erreichbar sein wird und die Standardsystemsprache amerikanisch ist, werden die Locales
auf <code>en_US.utf8</code> gesetzt und neu erzeugt.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1"></a><a href="#__codelineno-19-1"><span class="linenos" data-linenos=" 1 "></span></a>cat<span class="w"> </span>&gt;<span class="w"> </span>/etc/env.d/02locale<span class="w"> </span>&lt;&lt;<span class="w"> </span><span class="s2">&quot;EOF&quot;</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2"></a><a href="#__codelineno-19-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="nv">LC_ALL</span><span class="o">=</span><span class="s2">&quot;en_US.UTF-8&quot;</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3"></a><a href="#__codelineno-19-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="nv">LANG</span><span class="o">=</span><span class="s2">&quot;en_US.UTF-8&quot;</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4"></a><a href="#__codelineno-19-4"><span class="linenos" data-linenos=" 4 "></span></a>EOF
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5"></a><a href="#__codelineno-19-5"><span class="linenos" data-linenos=" 5 "></span></a>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6"></a><a href="#__codelineno-19-6"><span class="linenos" data-linenos=" 6 "></span></a>cat<span class="w"> </span>&gt;&gt;<span class="w"> </span>/etc/locale.gen<span class="w"> </span>&lt;&lt;<span class="w"> </span><span class="s2">&quot;EOF&quot;</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7"></a><a href="#__codelineno-19-7"><span class="linenos" data-linenos=" 7 "></span></a>en_US<span class="w"> </span>ISO-8859-1
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8"></a><a href="#__codelineno-19-8"><span class="linenos" data-linenos=" 8 "></span></a>en_US.UTF-8<span class="w"> </span>UTF-8
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9"></a><a href="#__codelineno-19-9"><span class="linenos" data-linenos=" 9 "></span></a>de_DE<span class="w"> </span>ISO-8859-1
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10"></a><a href="#__codelineno-19-10"><span class="linenos" data-linenos="10 "></span></a>de_DE@euro<span class="w"> </span>ISO-8859-15
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11"></a><a href="#__codelineno-19-11"><span class="linenos" data-linenos="11 "></span></a>de_DE.UTF-8<span class="w"> </span>UTF-8
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12"></a><a href="#__codelineno-19-12"><span class="linenos" data-linenos="12 "></span></a>EOF
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13"></a><a href="#__codelineno-19-13"><span class="linenos" data-linenos="13 "></span></a>
</span><span id="__span-19-14"><a id="__codelineno-19-14" name="__codelineno-19-14"></a><a href="#__codelineno-19-14"><span class="linenos" data-linenos="14 "></span></a>locale-gen<span class="w"> </span>-c<span class="w"> </span>/etc/locale.gen
</span><span id="__span-19-15"><a id="__codelineno-19-15" name="__codelineno-19-15"></a><a href="#__codelineno-19-15"><span class="linenos" data-linenos="15 "></span></a>
</span><span id="__span-19-16"><a id="__codelineno-19-16" name="__codelineno-19-16"></a><a href="#__codelineno-19-16"><span class="linenos" data-linenos="16 "></span></a>env-update
</span><span id="__span-19-17"><a id="__codelineno-19-17" name="__codelineno-19-17"></a><a href="#__codelineno-19-17"><span class="linenos" data-linenos="17 "></span></a><span class="nb">source</span><span class="w"> </span>/etc/profile
</span></code></pre></div>
<h2 id="basissystem-kompilieren">Basissystem kompilieren<a class="headerlink" href="#basissystem-kompilieren" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Nun muss das komplette Basissystem neu kompiliert werden. Dieser Vorgang ist zwar zeitaufwendig, aber für diese
Installationsvariante zwingend notwendig. Auch die Reihenfolge ist sehr wichtig, da das System ansonsten unbrauchbar
beziehungsweise instabil wird. Während dieses Vorgangs werden nur wenige Konfigurationsdateien automatisch
aktualisiert, alle anderen müssen manuell mittels <code>dispatch-conf</code> aktualisiert werden.</p>
<details class="note" open="open">
<summary>Note</summary>
<p>Die folgenden Schritte sind nötig, da dieses HowTo eine angepasste Portage-Konfiguration verwendet und zudem seit</p>
</details>
<p>dem Release des Stage3-Tarballs eventuell ein paar für diese Installationvariante wichtige Basispakete im Portage-Tree
aktualisiert wurden.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1"></a><a href="#__codelineno-20-1"><span class="linenos" data-linenos=" 1 "></span></a>emerge<span class="w"> </span>portage<span class="w"> </span>portage-utils
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2"></a><a href="#__codelineno-20-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3"></a><a href="#__codelineno-20-3"><span class="linenos" data-linenos=" 3 "></span></a>emerge<span class="w"> </span>-C<span class="w"> </span>cracklib<span class="w"> </span>pam<span class="w"> </span>pambase<span class="w"> </span>virtual/pam<span class="w"> </span>tcp-wrappers
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4"></a><a href="#__codelineno-20-4"><span class="linenos" data-linenos=" 4 "></span></a>emerge<span class="w"> </span>@preserved-rebuild
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5"></a><a href="#__codelineno-20-5"><span class="linenos" data-linenos=" 5 "></span></a>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6"></a><a href="#__codelineno-20-6"><span class="linenos" data-linenos=" 6 "></span></a>emerge<span class="w"> </span>glibc
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7"></a><a href="#__codelineno-20-7"><span class="linenos" data-linenos=" 7 "></span></a>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8"></a><a href="#__codelineno-20-8"><span class="linenos" data-linenos=" 8 "></span></a>emerge<span class="w"> </span>binutils<span class="w"> </span>gcc
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9"></a><a href="#__codelineno-20-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10"></a><a href="#__codelineno-20-10"><span class="linenos" data-linenos="10 "></span></a>env-update
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11"></a><a href="#__codelineno-20-11"><span class="linenos" data-linenos="11 "></span></a><span class="nb">source</span><span class="w"> </span>/etc/profile
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12"></a><a href="#__codelineno-20-12"><span class="linenos" data-linenos="12 "></span></a>
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13"></a><a href="#__codelineno-20-13"><span class="linenos" data-linenos="13 "></span></a>emerge<span class="w"> </span>hardened-sources
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14"></a><a href="#__codelineno-20-14"><span class="linenos" data-linenos="14 "></span></a>
</span><span id="__span-20-15"><a id="__codelineno-20-15" name="__codelineno-20-15"></a><a href="#__codelineno-20-15"><span class="linenos" data-linenos="15 "></span></a>emerge<span class="w"> </span>-e<span class="w"> </span>-D<span class="w"> </span>@world
</span><span id="__span-20-16"><a id="__codelineno-20-16" name="__codelineno-20-16"></a><a href="#__codelineno-20-16"><span class="linenos" data-linenos="16 "></span></a>
</span><span id="__span-20-17"><a id="__codelineno-20-17" name="__codelineno-20-17"></a><a href="#__codelineno-20-17"><span class="linenos" data-linenos="17 "></span></a>dispatch-conf
</span></code></pre></div>
<h2 id="basissystem-rekompilieren">Basissystem rekompilieren<a class="headerlink" href="#basissystem-rekompilieren" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Um sicherzustellen, dass das Basissystem ab diesem Punkt keine veraltete Konfiguration oder (speicheresistente)
Software nutzt, wird sicherheitshalber kurz die Chroot-Umgebung verlassen und gleich wieder betreten. Im Anschluss wird
das Basissystem ein zweites Mal vollständig rekompiliert, damit sichergestellt ist, dass auch wirklich jedes Paket nur
noch gegen die aktuell vorhanden Libraries gelinkt ist und somit keine veralteten und/oder nicht mehr vorhandenen
Funktionen nutzt.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1"></a><a href="#__codelineno-21-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="nb">exit</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2"></a><a href="#__codelineno-21-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3"></a><a href="#__codelineno-21-3"><span class="linenos" data-linenos=" 3 "></span></a>chroot<span class="w"> </span>/mnt/gentoo<span class="w"> </span>/bin/env<span class="w"> </span>-i<span class="w"> </span><span class="nv">HOME</span><span class="o">=</span>/root<span class="w"> </span><span class="nv">TERM</span><span class="o">=</span><span class="nv">$TERM</span><span class="w"> </span><span class="nv">PS1</span><span class="o">=</span><span class="s1">&#39;\u:\w\$ &#39;</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span>/sbin:/bin:/usr/sbin:/usr/bin<span class="w"> </span>/bin/bash<span class="w"> </span>+h
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4"></a><a href="#__codelineno-21-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5"></a><a href="#__codelineno-21-5"><span class="linenos" data-linenos=" 5 "></span></a>env-update
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6"></a><a href="#__codelineno-21-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="nb">source</span><span class="w"> </span>/etc/profile
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7"></a><a href="#__codelineno-21-7"><span class="linenos" data-linenos=" 7 "></span></a>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8"></a><a href="#__codelineno-21-8"><span class="linenos" data-linenos=" 8 "></span></a>emerge<span class="w"> </span>-e<span class="w"> </span>-D<span class="w"> </span>@world
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9"></a><a href="#__codelineno-21-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10"></a><a href="#__codelineno-21-10"><span class="linenos" data-linenos="10 "></span></a>emerge<span class="w"> </span>--depclean
</span><span id="__span-21-11"><a id="__codelineno-21-11" name="__codelineno-21-11"></a><a href="#__codelineno-21-11"><span class="linenos" data-linenos="11 "></span></a>
</span><span id="__span-21-12"><a id="__codelineno-21-12" name="__codelineno-21-12"></a><a href="#__codelineno-21-12"><span class="linenos" data-linenos="12 "></span></a>dispatch-conf
</span><span id="__span-21-13"><a id="__codelineno-21-13" name="__codelineno-21-13"></a><a href="#__codelineno-21-13"><span class="linenos" data-linenos="13 "></span></a>
</span><span id="__span-21-14"><a id="__codelineno-21-14" name="__codelineno-21-14"></a><a href="#__codelineno-21-14"><span class="linenos" data-linenos="14 "></span></a>env-update
</span><span id="__span-21-15"><a id="__codelineno-21-15" name="__codelineno-21-15"></a><a href="#__codelineno-21-15"><span class="linenos" data-linenos="15 "></span></a><span class="nb">source</span><span class="w"> </span>/etc/profile
</span></code></pre></div>
<h2 id="fstab-erstellen">fstab erstellen<a class="headerlink" href="#fstab-erstellen" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Ohne fstab wird das System später nicht booten ;-)</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1"></a><a href="#__codelineno-22-1"><span class="linenos" data-linenos="1 "></span></a>cat<span class="w"> </span>&gt;<span class="w"> </span>/etc/fstab<span class="w"> </span>&lt;&lt;<span class="w"> </span><span class="s2">&quot;EOF&quot;</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2"></a><a href="#__codelineno-22-2"><span class="linenos" data-linenos="2 "></span></a>/dev/disk/by-id/md-name-root<span class="w">   </span>/<span class="w">          </span>ext3<span class="w">    </span>defaults,relatime,barrier<span class="o">=</span><span class="m">1</span><span class="w">    </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3"></a><a href="#__codelineno-22-3"><span class="linenos" data-linenos="3 "></span></a>/dev/disk/by-id/md-name-boot<span class="w">   </span>/boot<span class="w">      </span>ext2<span class="w">    </span>defaults,relatime<span class="w">              </span><span class="m">1</span><span class="w"> </span><span class="m">2</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4"></a><a href="#__codelineno-22-4"><span class="linenos" data-linenos="4 "></span></a>/dev/disk/by-id/md-name-data<span class="w">   </span>/data<span class="w">      </span>ext3<span class="w">    </span>defaults,relatime,barrier<span class="o">=</span><span class="m">1</span><span class="w">    </span><span class="m">2</span><span class="w"> </span><span class="m">2</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5"></a><a href="#__codelineno-22-5"><span class="linenos" data-linenos="5 "></span></a>/dev/disk/by-id/md-name-swap<span class="w">   </span>none<span class="w">       </span>swap<span class="w">    </span>sw<span class="w">                             </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6"></a><a href="#__codelineno-22-6"><span class="linenos" data-linenos="6 "></span></a>EOF
</span></code></pre></div>
<h2 id="openssl-konfigurieren">OpenSSL konfigurieren<a class="headerlink" href="#openssl-konfigurieren" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Folgende Optionen müssen mit dem Editor <code>ee</code> (<code>ee /etc/ssl/openssl.cnf</code>) in der <code>/etc/ssl/openssl.cnf</code> im Abschnitt <code>[
req_distinguished_name ]</code> angepasst beziehungsweise ergänzt werden.</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1"></a><a href="#__codelineno-23-1"><span class="linenos" data-linenos="1 "></span></a>countryName_default             = DE
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2"></a><a href="#__codelineno-23-2"><span class="linenos" data-linenos="2 "></span></a>stateOrProvinceName_default     = Bundesland
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3"></a><a href="#__codelineno-23-3"><span class="linenos" data-linenos="3 "></span></a>localityName_default            = Ort
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4"></a><a href="#__codelineno-23-4"><span class="linenos" data-linenos="4 "></span></a>0.organizationName_default      = Example Corporation
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5"></a><a href="#__codelineno-23-5"><span class="linenos" data-linenos="5 "></span></a>organizationalUnitName_default  = Certification Authority
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6"></a><a href="#__codelineno-23-6"><span class="linenos" data-linenos="6 "></span></a>emailAddress_default            = admin@example.com
</span></code></pre></div>
<p>Folgende Optionen müssen im Abschnitt <code>[ CA_default ]</code> angepasst werden.</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1"></a><a href="#__codelineno-24-1"><span class="linenos" data-linenos="1 "></span></a>default_days            = 730
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2"></a><a href="#__codelineno-24-2"><span class="linenos" data-linenos="2 "></span></a>default_md              = sha256
</span></code></pre></div>
<p>Folgende Optionen müssen im Abschnitt <code>[ req ]</code> angepasst werden.</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1"></a><a href="#__codelineno-25-1"><span class="linenos" data-linenos="1 "></span></a>default_bits            = 4096
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2"></a><a href="#__codelineno-25-2"><span class="linenos" data-linenos="2 "></span></a>string_mask             = utf8only
</span></code></pre></div>
<p>DH Param Files erzeugen</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1"></a><a href="#__codelineno-26-1"><span class="linenos" data-linenos="1 "></span></a>openssl<span class="w"> </span>genpkey<span class="w"> </span>-genparam<span class="w"> </span>-algorithm<span class="w"> </span>DH<span class="w"> </span>-pkeyopt<span class="w"> </span>dh_paramgen_prime_len:4096<span class="w"> </span>-out<span class="w"> </span>/etc/ssl/dh_params.pem
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2"></a><a href="#__codelineno-26-2"><span class="linenos" data-linenos="2 "></span></a>openssl<span class="w"> </span>genpkey<span class="w"> </span>-genparam<span class="w"> </span>-algorithm<span class="w"> </span>EC<span class="w"> </span>-pkeyopt<span class="w"> </span>ec_paramgen_curve:secp384r1<span class="w"> </span>-out<span class="w"> </span>/etc/ssl/ec_params.pem
</span></code></pre></div>
<h2 id="openssh-konfigurieren">OpenSSH konfigurieren<a class="headerlink" href="#openssh-konfigurieren" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Da wir gerade ein Produktiv-System aufsetzen, werden wir den <abbr title="Secure Shell">SSH</abbr>-Dienst recht restriktiv konfigurieren, unter Anderem
werden wir den Login per Passwort verbieten und nur per PublicKey zulassen.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1"></a><a href="#__codelineno-27-1"><span class="linenos" data-linenos=" 1 "></span></a>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(Protocol\).*$/\1 2/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2"></a><a href="#__codelineno-27-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(RekeyLimit\).*$/\1 500M 1h/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3"></a><a href="#__codelineno-27-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(LoginGraceTime\).*$/\1 1m/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4"></a><a href="#__codelineno-27-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(PermitRootLogin\).*$/\1 yes/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5"></a><a href="#__codelineno-27-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(StrictModes\).*$/\1 yes/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6"></a><a href="#__codelineno-27-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(MaxAuthTries\).*$/\1 3/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7"></a><a href="#__codelineno-27-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(MaxSessions\).*$/\1 10/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8"></a><a href="#__codelineno-27-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(RSAAuthentication\).*$/\1 no/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9"></a><a href="#__codelineno-27-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(PubkeyAuthentication\).*$/\1 yes/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-10"><a id="__codelineno-27-10" name="__codelineno-27-10"></a><a href="#__codelineno-27-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(IgnoreRhosts\).*$/\1 yes/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-11"><a id="__codelineno-27-11" name="__codelineno-27-11"></a><a href="#__codelineno-27-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(PasswordAuthentication\).*$/\1 no/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-12"><a id="__codelineno-27-12" name="__codelineno-27-12"></a><a href="#__codelineno-27-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(PermitEmptyPasswords\).*$/\1 no/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-13"><a id="__codelineno-27-13" name="__codelineno-27-13"></a><a href="#__codelineno-27-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(ChallengeResponseAuthentication\).*$/\1 no/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-14"><a id="__codelineno-27-14" name="__codelineno-27-14"></a><a href="#__codelineno-27-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(UsePAM\).*$/\1 no/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-15"><a id="__codelineno-27-15" name="__codelineno-27-15"></a><a href="#__codelineno-27-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(AllowAgentForwarding\).*$/\1 no/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-16"><a id="__codelineno-27-16" name="__codelineno-27-16"></a><a href="#__codelineno-27-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(AllowTcpForwarding\).*$/\1 no/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-17"><a id="__codelineno-27-17" name="__codelineno-27-17"></a><a href="#__codelineno-27-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(GatewayPorts\).*$/\1 no/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-18"><a id="__codelineno-27-18" name="__codelineno-27-18"></a><a href="#__codelineno-27-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(X11Forwarding\).*$/\1 no/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-19"><a id="__codelineno-27-19" name="__codelineno-27-19"></a><a href="#__codelineno-27-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(PermitTTY\).*$/\1 yes/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-20"><a id="__codelineno-27-20" name="__codelineno-27-20"></a><a href="#__codelineno-27-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(UseLogin\).*$/\1 no/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-21"><a id="__codelineno-27-21" name="__codelineno-27-21"></a><a href="#__codelineno-27-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(UsePrivilegeSeparation\).*$/\1 sandbox/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-22"><a id="__codelineno-27-22" name="__codelineno-27-22"></a><a href="#__codelineno-27-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(PermitUserEnvironment\).*$/\1 no/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-23"><a id="__codelineno-27-23" name="__codelineno-27-23"></a><a href="#__codelineno-27-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(UseDNS\).*$/\1 yes/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-24"><a id="__codelineno-27-24" name="__codelineno-27-24"></a><a href="#__codelineno-27-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(MaxStartups\).*$/\1 10:30:100/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-25"><a id="__codelineno-27-25" name="__codelineno-27-25"></a><a href="#__codelineno-27-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(PermitTunnel\).*$/\1 no/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-26"><a id="__codelineno-27-26" name="__codelineno-27-26"></a><a href="#__codelineno-27-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(ChrootDirectory\).*$/\1 %h/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-27"><a id="__codelineno-27-27" name="__codelineno-27-27"></a><a href="#__codelineno-27-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^\(Subsystem\).*$/\1 sftp internal-sftp -u 0027/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-27-28"><a id="__codelineno-27-28" name="__codelineno-27-28"></a><a href="#__codelineno-27-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">    </span>-i<span class="w"> </span>/etc/ssh/sshd_config
</span><span id="__span-27-29"><a id="__codelineno-27-29" name="__codelineno-27-29"></a><a href="#__codelineno-27-29"><span class="linenos" data-linenos="29 "></span></a>
</span><span id="__span-27-30"><a id="__codelineno-27-30" name="__codelineno-27-30"></a><a href="#__codelineno-27-30"><span class="linenos" data-linenos="30 "></span></a>cat<span class="w"> </span>&gt;&gt;<span class="w"> </span>/etc/ssh/sshd_config<span class="w"> </span>&lt;&lt;<span class="w"> </span><span class="s2">&quot;EOF&quot;</span>
</span><span id="__span-27-31"><a id="__codelineno-27-31" name="__codelineno-27-31"></a><a href="#__codelineno-27-31"><span class="linenos" data-linenos="31 "></span></a>AllowGroups<span class="w"> </span>wheel<span class="w"> </span>admin<span class="w"> </span>sftponly<span class="w"> </span>users
</span><span id="__span-27-32"><a id="__codelineno-27-32" name="__codelineno-27-32"></a><a href="#__codelineno-27-32"><span class="linenos" data-linenos="32 "></span></a>
</span><span id="__span-27-33"><a id="__codelineno-27-33" name="__codelineno-27-33"></a><a href="#__codelineno-27-33"><span class="linenos" data-linenos="33 "></span></a>Match<span class="w"> </span>Group<span class="w"> </span>wheel
</span><span id="__span-27-34"><a id="__codelineno-27-34" name="__codelineno-27-34"></a><a href="#__codelineno-27-34"><span class="linenos" data-linenos="34 "></span></a><span class="w">        </span>ChrootDirectory<span class="w"> </span>none
</span><span id="__span-27-35"><a id="__codelineno-27-35" name="__codelineno-27-35"></a><a href="#__codelineno-27-35"><span class="linenos" data-linenos="35 "></span></a>
</span><span id="__span-27-36"><a id="__codelineno-27-36" name="__codelineno-27-36"></a><a href="#__codelineno-27-36"><span class="linenos" data-linenos="36 "></span></a>Match<span class="w"> </span>Group<span class="w"> </span>admin
</span><span id="__span-27-37"><a id="__codelineno-27-37" name="__codelineno-27-37"></a><a href="#__codelineno-27-37"><span class="linenos" data-linenos="37 "></span></a><span class="w">        </span>PasswordAuthentication<span class="w"> </span>yes
</span><span id="__span-27-38"><a id="__codelineno-27-38" name="__codelineno-27-38"></a><a href="#__codelineno-27-38"><span class="linenos" data-linenos="38 "></span></a>
</span><span id="__span-27-39"><a id="__codelineno-27-39" name="__codelineno-27-39"></a><a href="#__codelineno-27-39"><span class="linenos" data-linenos="39 "></span></a>Match<span class="w"> </span>Group<span class="w"> </span>sftponly
</span><span id="__span-27-40"><a id="__codelineno-27-40" name="__codelineno-27-40"></a><a href="#__codelineno-27-40"><span class="linenos" data-linenos="40 "></span></a><span class="w">        </span>ForceCommand<span class="w"> </span>internal-sftp
</span><span id="__span-27-41"><a id="__codelineno-27-41" name="__codelineno-27-41"></a><a href="#__codelineno-27-41"><span class="linenos" data-linenos="41 "></span></a>EOF
</span><span id="__span-27-42"><a id="__codelineno-27-42" name="__codelineno-27-42"></a><a href="#__codelineno-27-42"><span class="linenos" data-linenos="42 "></span></a>
</span><span id="__span-27-43"><a id="__codelineno-27-43" name="__codelineno-27-43"></a><a href="#__codelineno-27-43"><span class="linenos" data-linenos="43 "></span></a>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;/^# Ciphers and keying/ a\</span>
</span><span id="__span-27-44"><a id="__codelineno-27-44" name="__codelineno-27-44"></a><a href="#__codelineno-27-44"><span class="linenos" data-linenos="44 "></span></a><span class="s1">Ciphers chacha20-poly1305@openssh.com,aes256-gcm@openssh.com,aes256-cbc,aes256-ctr\</span>
</span><span id="__span-27-45"><a id="__codelineno-27-45" name="__codelineno-27-45"></a><a href="#__codelineno-27-45"><span class="linenos" data-linenos="45 "></span></a><span class="s1">Macs hmac-sha2-512-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512,hmac-sha2-256\</span>
</span><span id="__span-27-46"><a id="__codelineno-27-46" name="__codelineno-27-46"></a><a href="#__codelineno-27-46"><span class="linenos" data-linenos="46 "></span></a><span class="s1">KexAlgorithms curve25519-sha256@libssh.org,ecdh-sha2-nistp521,ecdh-sha2-nistp384,diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1&#39;</span><span class="w"> </span>-i<span class="w"> </span>/etc/ssh/sshd_config
</span><span id="__span-27-47"><a id="__codelineno-27-47" name="__codelineno-27-47"></a><a href="#__codelineno-27-47"><span class="linenos" data-linenos="47 "></span></a>
</span><span id="__span-27-48"><a id="__codelineno-27-48" name="__codelineno-27-48"></a><a href="#__codelineno-27-48"><span class="linenos" data-linenos="48 "></span></a>cat<span class="w"> </span>&gt;&gt;<span class="w"> </span>/etc/ssh/ssh_config<span class="w"> </span>&lt;&lt;<span class="w"> </span><span class="s2">&quot;EOF&quot;</span>
</span><span id="__span-27-49"><a id="__codelineno-27-49" name="__codelineno-27-49"></a><a href="#__codelineno-27-49"><span class="linenos" data-linenos="49 "></span></a>Host<span class="w"> </span>*
</span><span id="__span-27-50"><a id="__codelineno-27-50" name="__codelineno-27-50"></a><a href="#__codelineno-27-50"><span class="linenos" data-linenos="50 "></span></a><span class="w">        </span>Protocol<span class="w"> </span><span class="m">2</span>
</span><span id="__span-27-51"><a id="__codelineno-27-51" name="__codelineno-27-51"></a><a href="#__codelineno-27-51"><span class="linenos" data-linenos="51 "></span></a><span class="w">        </span>RekeyLimit<span class="w"> </span>500M<span class="w"> </span>1h
</span><span id="__span-27-52"><a id="__codelineno-27-52" name="__codelineno-27-52"></a><a href="#__codelineno-27-52"><span class="linenos" data-linenos="52 "></span></a><span class="w">        </span>Ciphers<span class="w"> </span>chacha20-poly1305@openssh.com,aes256-gcm@openssh.com,aes256-ctr,aes256-cbc
</span><span id="__span-27-53"><a id="__codelineno-27-53" name="__codelineno-27-53"></a><a href="#__codelineno-27-53"><span class="linenos" data-linenos="53 "></span></a><span class="w">        </span>Macs<span class="w"> </span>hmac-sha2-512-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512,hmac-sha2-256
</span><span id="__span-27-54"><a id="__codelineno-27-54" name="__codelineno-27-54"></a><a href="#__codelineno-27-54"><span class="linenos" data-linenos="54 "></span></a><span class="w">        </span>KexAlgorithms<span class="w"> </span>curve25519-sha256@libssh.org,ecdh-sha2-nistp521,ecdh-sha2-nistp384,diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1
</span><span id="__span-27-55"><a id="__codelineno-27-55" name="__codelineno-27-55"></a><a href="#__codelineno-27-55"><span class="linenos" data-linenos="55 "></span></a><span class="w">        </span>HostKeyAlgorithms<span class="w"> </span>ssh-ed25519-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp521,ecdsa-sha2-nistp384,ecdsa-sha2-nistp256
</span><span id="__span-27-56"><a id="__codelineno-27-56" name="__codelineno-27-56"></a><a href="#__codelineno-27-56"><span class="linenos" data-linenos="56 "></span></a><span class="w">        </span>VisualHostKey<span class="w"> </span>yes
</span><span id="__span-27-57"><a id="__codelineno-27-57" name="__codelineno-27-57"></a><a href="#__codelineno-27-57"><span class="linenos" data-linenos="57 "></span></a>EOF
</span><span id="__span-27-58"><a id="__codelineno-27-58" name="__codelineno-27-58"></a><a href="#__codelineno-27-58"><span class="linenos" data-linenos="58 "></span></a>
</span><span id="__span-27-59"><a id="__codelineno-27-59" name="__codelineno-27-59"></a><a href="#__codelineno-27-59"><span class="linenos" data-linenos="59 "></span></a>rc-update<span class="w"> </span>add<span class="w"> </span>sshd<span class="w"> </span>default
</span></code></pre></div>
<h2 id="systemprogramme-installieren">Systemprogramme installieren<a class="headerlink" href="#systemprogramme-installieren" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Jetzt werden wichtige Systemprogramme installiert.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1"></a><a href="#__codelineno-28-1"><span class="linenos" data-linenos=" 1 "></span></a>cat<span class="w"> </span>&gt;&gt;<span class="w"> </span>/etc/portage/package.use<span class="w"> </span>&lt;&lt;<span class="w"> </span><span class="s2">&quot;EOF&quot;</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2"></a><a href="#__codelineno-28-2"><span class="linenos" data-linenos=" 2 "></span></a>sys-fs/lvm2<span class="w">  </span>lvm1<span class="w"> </span>lvm2create_initrd
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3"></a><a href="#__codelineno-28-3"><span class="linenos" data-linenos=" 3 "></span></a>EOF
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4"></a><a href="#__codelineno-28-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5"></a><a href="#__codelineno-28-5"><span class="linenos" data-linenos=" 5 "></span></a>emerge<span class="w"> </span>syslog-ng<span class="w"> </span>logrotate<span class="w"> </span>cronie<span class="w"> </span>iproute2<span class="w"> </span>dhcpcd<span class="w"> </span>mdadm<span class="w"> </span>lvm2<span class="w"> </span>mcelog
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6"></a><a href="#__codelineno-28-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7"></a><a href="#__codelineno-28-7"><span class="linenos" data-linenos=" 7 "></span></a>rc-update<span class="w"> </span>add<span class="w"> </span>mdraid<span class="w"> </span>boot
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8"></a><a href="#__codelineno-28-8"><span class="linenos" data-linenos=" 8 "></span></a>rc-update<span class="w"> </span>add<span class="w"> </span>cronie<span class="w"> </span>default
</span><span id="__span-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9"></a><a href="#__codelineno-28-9"><span class="linenos" data-linenos=" 9 "></span></a>rc-update<span class="w"> </span>add<span class="w"> </span>syslog-ng<span class="w"> </span>default
</span><span id="__span-28-10"><a id="__codelineno-28-10" name="__codelineno-28-10"></a><a href="#__codelineno-28-10"><span class="linenos" data-linenos="10 "></span></a>
</span><span id="__span-28-11"><a id="__codelineno-28-11" name="__codelineno-28-11"></a><a href="#__codelineno-28-11"><span class="linenos" data-linenos="11 "></span></a>cat<span class="w"> </span>&gt;&gt;<span class="w"> </span>/etc/mdadm.conf<span class="w"> </span>&lt;&lt;<span class="w"> </span><span class="s2">&quot;EOF&quot;</span>
</span><span id="__span-28-12"><a id="__codelineno-28-12" name="__codelineno-28-12"></a><a href="#__codelineno-28-12"><span class="linenos" data-linenos="12 "></span></a>MAILADDR<span class="w"> </span>root@localhost
</span><span id="__span-28-13"><a id="__codelineno-28-13" name="__codelineno-28-13"></a><a href="#__codelineno-28-13"><span class="linenos" data-linenos="13 "></span></a>MAILFROM<span class="w"> </span>root@localhost
</span><span id="__span-28-14"><a id="__codelineno-28-14" name="__codelineno-28-14"></a><a href="#__codelineno-28-14"><span class="linenos" data-linenos="14 "></span></a>CREATE<span class="w"> </span><span class="nv">metadata</span><span class="o">=</span><span class="m">1</span>.2
</span><span id="__span-28-15"><a id="__codelineno-28-15" name="__codelineno-28-15"></a><a href="#__codelineno-28-15"><span class="linenos" data-linenos="15 "></span></a>HOMEHOST<span class="w"> </span>&lt;none&gt;
</span><span id="__span-28-16"><a id="__codelineno-28-16" name="__codelineno-28-16"></a><a href="#__codelineno-28-16"><span class="linenos" data-linenos="16 "></span></a>DEVICE<span class="w"> </span>/dev/sd*<span class="o">[</span><span class="m">0</span>-9<span class="o">]</span>
</span><span id="__span-28-17"><a id="__codelineno-28-17" name="__codelineno-28-17"></a><a href="#__codelineno-28-17"><span class="linenos" data-linenos="17 "></span></a>EOF
</span></code></pre></div>
<h2 id="netzwerk-konfigurieren">Netzwerk konfigurieren<a class="headerlink" href="#netzwerk-konfigurieren" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Das Netzwerk konfigurieren wir statisch</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1"></a><a href="#__codelineno-29-1"><span class="linenos" data-linenos=" 1 "></span></a>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s/^\(hostname=\).*$/\1&quot;devnull&quot;/&#39;</span><span class="w"> </span>-i<span class="w"> </span>/etc/conf.d/hostname
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2"></a><a href="#__codelineno-29-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3"></a><a href="#__codelineno-29-3"><span class="linenos" data-linenos=" 3 "></span></a>cat<span class="w"> </span>&gt;&gt;<span class="w"> </span>/etc/conf.d/net<span class="w"> </span>&lt;&lt;<span class="w"> </span><span class="s2">&quot;EOF&quot;</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4"></a><a href="#__codelineno-29-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="c1">#</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5"></a><a href="#__codelineno-29-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="c1"># Setup eth0</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6"></a><a href="#__codelineno-29-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="nv">config_eth0</span><span class="o">=</span><span class="s2">&quot;__IPADDR4__ netmask NETMASK4&quot;</span>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7"></a><a href="#__codelineno-29-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="nv">routes_eth0</span><span class="o">=</span><span class="s2">&quot;default via GATEWAY4&quot;</span>
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8"></a><a href="#__codelineno-29-8"><span class="linenos" data-linenos=" 8 "></span></a>EOF
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9"></a><a href="#__codelineno-29-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-29-10"><a id="__codelineno-29-10" name="__codelineno-29-10"></a><a href="#__codelineno-29-10"><span class="linenos" data-linenos="10 "></span></a>ln<span class="w"> </span>-s<span class="w"> </span>net.lo<span class="w"> </span>/etc/init.d/net.eth0
</span><span id="__span-29-11"><a id="__codelineno-29-11" name="__codelineno-29-11"></a><a href="#__codelineno-29-11"><span class="linenos" data-linenos="11 "></span></a>
</span><span id="__span-29-12"><a id="__codelineno-29-12" name="__codelineno-29-12"></a><a href="#__codelineno-29-12"><span class="linenos" data-linenos="12 "></span></a>rc-update<span class="w"> </span>add<span class="w"> </span>net.eth0<span class="w"> </span>boot
</span></code></pre></div>
<p>Es folgt ein wenig Voodoo, um die Netzwerkkonfiguration in der <code>/etc/conf.d/network</code> zu vervollständigen.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1"></a><a href="#__codelineno-30-1"><span class="linenos" data-linenos="1 "></span></a><span class="c1"># IPv4</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2"></a><a href="#__codelineno-30-2"><span class="linenos" data-linenos="2 "></span></a>ifconfig<span class="w"> </span><span class="sb">`</span>ip<span class="w"> </span>-f<span class="w"> </span>inet<span class="w"> </span>route<span class="w"> </span>show<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;/default/ {print $5}&#39;</span><span class="sb">`</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3"></a><a href="#__codelineno-30-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span>awk<span class="w"> </span><span class="s1">&#39;/inet/ {print $2}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-I<span class="w"> </span>%<span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s/__IPADDR4__/%/g&#39;</span><span class="w"> </span>-i<span class="w"> </span>/etc/conf.d/net
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4"></a><a href="#__codelineno-30-4"><span class="linenos" data-linenos="4 "></span></a>ifconfig<span class="w"> </span><span class="sb">`</span>ip<span class="w"> </span>-f<span class="w"> </span>inet<span class="w"> </span>route<span class="w"> </span>show<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;/default/ {print $5}&#39;</span><span class="sb">`</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5"></a><a href="#__codelineno-30-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span>awk<span class="w"> </span><span class="s1">&#39;/inet/ {print $4}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-I<span class="w"> </span>%<span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s/NETMASK4/%/g&#39;</span><span class="w"> </span>-i<span class="w"> </span>/etc/conf.d/net
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6"></a><a href="#__codelineno-30-6"><span class="linenos" data-linenos="6 "></span></a>ip<span class="w"> </span>-f<span class="w"> </span>inet<span class="w"> </span>route<span class="w"> </span>show<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;/default/ {print $3}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7"></a><a href="#__codelineno-30-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">    </span>xargs<span class="w"> </span>-I<span class="w"> </span>%<span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s/GATEWAY4/%/g&#39;</span><span class="w"> </span>-i<span class="w"> </span>/etc/conf.d/net
</span></code></pre></div>
<p>Wir richten die <code>/etc/hosts</code> ein.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1"></a><a href="#__codelineno-31-1"><span class="linenos" data-linenos="1 "></span></a><span class="c1"># localhost</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2"></a><a href="#__codelineno-31-2"><span class="linenos" data-linenos="2 "></span></a>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s/my.domain/example.com/g&#39;</span><span class="w"> </span>-i<span class="w"> </span>/etc/hosts
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3"></a><a href="#__codelineno-31-3"><span class="linenos" data-linenos="3 "></span></a>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4"></a><a href="#__codelineno-31-4"><span class="linenos" data-linenos="4 "></span></a><span class="c1"># IPv4</span>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5"></a><a href="#__codelineno-31-5"><span class="linenos" data-linenos="5 "></span></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;__IPADDR4__   devnull.example.com&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/etc/hosts
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6"></a><a href="#__codelineno-31-6"><span class="linenos" data-linenos="6 "></span></a>
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7"></a><a href="#__codelineno-31-7"><span class="linenos" data-linenos="7 "></span></a>ifconfig<span class="w"> </span><span class="sb">`</span>ip<span class="w"> </span>-f<span class="w"> </span>inet<span class="w"> </span>route<span class="w"> </span>show<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;/default/ {print $5}&#39;</span><span class="sb">`</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-31-8"><a id="__codelineno-31-8" name="__codelineno-31-8"></a><a href="#__codelineno-31-8"><span class="linenos" data-linenos="8 "></span></a><span class="w">    </span>awk<span class="w"> </span><span class="s1">&#39;/inet/ {print $2}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-I<span class="w"> </span>%<span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s/__IPADDR4__/%/g&#39;</span><span class="w"> </span>-i<span class="w"> </span>/etc/hosts
</span></code></pre></div>
<h2 id="kernelsourcen-installieren">Kernelsourcen installieren<a class="headerlink" href="#kernelsourcen-installieren" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Wir installieren nun die Gentoo Linux Hardened Kernelsourcen und das Gentoo Linux Tool <code>genkernel</code> zum automatisierten
Erstellen des Kernel und des zugehörigen Initramfs.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1"></a><a href="#__codelineno-32-1"><span class="linenos" data-linenos=" 1 "></span></a>cat<span class="w"> </span>&gt;&gt;<span class="w"> </span>/etc/portage/package.keywords<span class="w"> </span>&lt;&lt;<span class="w"> </span><span class="s2">&quot;EOF&quot;</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2"></a><a href="#__codelineno-32-2"><span class="linenos" data-linenos=" 2 "></span></a>sys-kernel/genkernel<span class="w">  </span>~amd64
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3"></a><a href="#__codelineno-32-3"><span class="linenos" data-linenos=" 3 "></span></a>EOF
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4"></a><a href="#__codelineno-32-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5"></a><a href="#__codelineno-32-5"><span class="linenos" data-linenos=" 5 "></span></a>cat<span class="w"> </span>&gt;&gt;<span class="w"> </span>/etc/portage/package.use<span class="w"> </span>&lt;&lt;<span class="w"> </span><span class="s2">&quot;EOF&quot;</span>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6"></a><a href="#__codelineno-32-6"><span class="linenos" data-linenos=" 6 "></span></a>sys-kernel/genkernel<span class="w">  </span>-crypt
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7"></a><a href="#__codelineno-32-7"><span class="linenos" data-linenos=" 7 "></span></a>EOF
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8"></a><a href="#__codelineno-32-8"><span class="linenos" data-linenos=" 8 "></span></a>
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9"></a><a href="#__codelineno-32-9"><span class="linenos" data-linenos=" 9 "></span></a>emerge<span class="w"> </span>hardened-sources<span class="w"> </span>genkernel
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10"></a><a href="#__codelineno-32-10"><span class="linenos" data-linenos="10 "></span></a>
</span><span id="__span-32-11"><a id="__codelineno-32-11" name="__codelineno-32-11"></a><a href="#__codelineno-32-11"><span class="linenos" data-linenos="11 "></span></a>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(SYMLINK=\).*$/\1&quot;no&quot;/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-32-12"><a id="__codelineno-32-12" name="__codelineno-32-12"></a><a href="#__codelineno-32-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(CLEAR_CACHE_DIR=\).*$/\1&quot;yes&quot;/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-32-13"><a id="__codelineno-32-13" name="__codelineno-32-13"></a><a href="#__codelineno-32-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(POSTCLEAR=\).*$/\1&quot;yes&quot;/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-32-14"><a id="__codelineno-32-14" name="__codelineno-32-14"></a><a href="#__codelineno-32-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(LVM=\).*$/\1&quot;no&quot;/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-32-15"><a id="__codelineno-32-15" name="__codelineno-32-15"></a><a href="#__codelineno-32-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(LUKS=\).*$/\1&quot;no&quot;/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-32-16"><a id="__codelineno-32-16" name="__codelineno-32-16"></a><a href="#__codelineno-32-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(GPG=\).*$/\1&quot;no&quot;/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-32-17"><a id="__codelineno-32-17" name="__codelineno-32-17"></a><a href="#__codelineno-32-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(DMRAID=\).*$/\1&quot;no&quot;/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-32-18"><a id="__codelineno-32-18" name="__codelineno-32-18"></a><a href="#__codelineno-32-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(BUSYBOX=\).*$/\1&quot;yes&quot;/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-32-19"><a id="__codelineno-32-19" name="__codelineno-32-19"></a><a href="#__codelineno-32-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(MDADM=\).*$/\1&quot;yes&quot;/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-32-20"><a id="__codelineno-32-20" name="__codelineno-32-20"></a><a href="#__codelineno-32-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(MULTIPATH=\).*$/\1&quot;no&quot;/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-32-21"><a id="__codelineno-32-21" name="__codelineno-32-21"></a><a href="#__codelineno-32-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(ISCSI=\).*$/\1&quot;no&quot;/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-32-22"><a id="__codelineno-32-22" name="__codelineno-32-22"></a><a href="#__codelineno-32-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(E2FSPROGS=\).*$/\1&quot;yes&quot;/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-32-23"><a id="__codelineno-32-23" name="__codelineno-32-23"></a><a href="#__codelineno-32-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(UNIONFS=\).*$/\1&quot;no&quot;/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-32-24"><a id="__codelineno-32-24" name="__codelineno-32-24"></a><a href="#__codelineno-32-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(ZFS=\).*$/\1&quot;no&quot;/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-32-25"><a id="__codelineno-32-25" name="__codelineno-32-25"></a><a href="#__codelineno-32-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(FIRMWARE=\).*$/\1&quot;no&quot;/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-32-26"><a id="__codelineno-32-26" name="__codelineno-32-26"></a><a href="#__codelineno-32-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(BUILD_STATIC=\).*$/\1&quot;yes&quot;/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-32-27"><a id="__codelineno-32-27" name="__codelineno-32-27"></a><a href="#__codelineno-32-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">    </span>-i<span class="w"> </span>/etc/genkernel.conf
</span></code></pre></div>
<h2 id="kernelsourcen-konfigurieren">Kernelsourcen konfigurieren<a class="headerlink" href="#kernelsourcen-konfigurieren" title="Anchor link to this section for reference">⚓︎</a></h2>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1"></a><a href="#__codelineno-33-1"><span class="linenos" data-linenos="1 "></span></a>mkdir<span class="w"> </span>-p<span class="w"> </span>/root/kernels
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2"></a><a href="#__codelineno-33-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3"></a><a href="#__codelineno-33-3"><span class="linenos" data-linenos="3 "></span></a>wget<span class="w"> </span>-q<span class="w"> </span>-O<span class="w"> </span>/root/kernels/MYKERNEL<span class="w"> </span><span class="s2">&quot;https://raw.githubusercontent.com/RootService/configs/master/gentoo/kernel_config_hardened.txt&quot;</span>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4"></a><a href="#__codelineno-33-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5"></a><a href="#__codelineno-33-5"><span class="linenos" data-linenos="5 "></span></a><span class="nb">cd</span><span class="w"> </span>/usr/src/linux
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6"></a><a href="#__codelineno-33-6"><span class="linenos" data-linenos="6 "></span></a>make<span class="w"> </span>mrproper
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7"></a><a href="#__codelineno-33-7"><span class="linenos" data-linenos="7 "></span></a>cp<span class="w"> </span>/root/kernels/MYKERNEL<span class="w"> </span>/usr/src/linux/.config
</span><span id="__span-33-8"><a id="__codelineno-33-8" name="__codelineno-33-8"></a><a href="#__codelineno-33-8"><span class="linenos" data-linenos="8 "></span></a>make<span class="w"> </span>oldconfig
</span></code></pre></div>
<h2 id="kernelsourcen-kompilieren">Kernelsourcen kompilieren<a class="headerlink" href="#kernelsourcen-kompilieren" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Die Kernelkonfiguration, insbesondere die Hardware-Optionen, muss Abseits der virtuellen Maschine an das eigene System
angepasst werden. Dies ermöglicht uns die Angabe der Option <code>--menuconfig</code> beim genkernel-Aufruf. Für die Verwendung
des Kernels in der virtuelle Maschine ist allerdings kein weiteres Anpassen der Kernelkonfiguration notwendig.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1"></a><a href="#__codelineno-34-1"><span class="linenos" data-linenos="1 "></span></a>make
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2"></a><a href="#__codelineno-34-2"><span class="linenos" data-linenos="2 "></span></a>make<span class="w"> </span>firmware_install
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3"></a><a href="#__codelineno-34-3"><span class="linenos" data-linenos="3 "></span></a>make<span class="w"> </span>modules_install
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4"></a><a href="#__codelineno-34-4"><span class="linenos" data-linenos="4 "></span></a>make<span class="w"> </span>install
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5"></a><a href="#__codelineno-34-5"><span class="linenos" data-linenos="5 "></span></a>cp<span class="w"> </span>/usr/src/linux/.config<span class="w"> </span>/root/kernels/MYKERNEL
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6"></a><a href="#__codelineno-34-6"><span class="linenos" data-linenos="6 "></span></a><span class="nb">cd</span><span class="w"> </span>/root
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7"></a><a href="#__codelineno-34-7"><span class="linenos" data-linenos="7 "></span></a>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8"></a><a href="#__codelineno-34-8"><span class="linenos" data-linenos="8 "></span></a>genkernel<span class="w"> </span>--kernel-config<span class="o">=</span>/root/kernels/MYKERNEL<span class="w"> </span>--no-ramdisk-modules<span class="w"> </span>--mdadm<span class="w"> </span>--install<span class="w"> </span>initramfs
</span></code></pre></div>
<h2 id="bootloader-installieren">Bootloader installieren<a class="headerlink" href="#bootloader-installieren" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Als Bootloader kommt <code>grub</code> zum Einsatz.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1"></a><a href="#__codelineno-35-1"><span class="linenos" data-linenos=" 1 "></span></a>cat<span class="w"> </span>&gt;&gt;<span class="w"> </span>/etc/portage/make.conf<span class="w"> </span>&lt;&lt;<span class="w"> </span><span class="s2">&quot;EOF&quot;</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2"></a><a href="#__codelineno-35-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="nv">GRUB_PLATFORMS</span><span class="o">=</span><span class="s2">&quot;emu efi-32 efi-64 pc&quot;</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3"></a><a href="#__codelineno-35-3"><span class="linenos" data-linenos=" 3 "></span></a>EOF
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4"></a><a href="#__codelineno-35-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5"></a><a href="#__codelineno-35-5"><span class="linenos" data-linenos=" 5 "></span></a>cat<span class="w"> </span>&gt;&gt;<span class="w"> </span>/etc/portage/package.use<span class="w"> </span>&lt;&lt;<span class="w"> </span><span class="s2">&quot;EOF&quot;</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6"></a><a href="#__codelineno-35-6"><span class="linenos" data-linenos=" 6 "></span></a>sys-boot/grub<span class="w">  </span>-truetype<span class="w"> </span>efiemu<span class="w"> </span>mount
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7"></a><a href="#__codelineno-35-7"><span class="linenos" data-linenos=" 7 "></span></a>EOF
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8"></a><a href="#__codelineno-35-8"><span class="linenos" data-linenos=" 8 "></span></a>
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9"></a><a href="#__codelineno-35-9"><span class="linenos" data-linenos=" 9 "></span></a>emerge<span class="w"> </span>grub
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10"></a><a href="#__codelineno-35-10"><span class="linenos" data-linenos="10 "></span></a>
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11"></a><a href="#__codelineno-35-11"><span class="linenos" data-linenos="11 "></span></a>mount<span class="w"> </span>-o<span class="w"> </span>remount,rw<span class="w"> </span>/boot
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12"></a><a href="#__codelineno-35-12"><span class="linenos" data-linenos="12 "></span></a>
</span><span id="__span-35-13"><a id="__codelineno-35-13" name="__codelineno-35-13"></a><a href="#__codelineno-35-13"><span class="linenos" data-linenos="13 "></span></a>chmod<span class="w"> </span>-x<span class="w"> </span>/etc/grub.d/<span class="o">{</span>20_linux_xen,30_os-prober,40_custom,41_custom<span class="o">}</span>
</span><span id="__span-35-14"><a id="__codelineno-35-14" name="__codelineno-35-14"></a><a href="#__codelineno-35-14"><span class="linenos" data-linenos="14 "></span></a>
</span><span id="__span-35-15"><a id="__codelineno-35-15" name="__codelineno-35-15"></a><a href="#__codelineno-35-15"><span class="linenos" data-linenos="15 "></span></a>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(GRUB_CMDLINE_LINUX=\).*$/\1&quot;pax_softmode=1 domdadm&quot;/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-35-16"><a id="__codelineno-35-16" name="__codelineno-35-16"></a><a href="#__codelineno-35-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(GRUB_CMDLINE_LINUX_DEFAULT=\).*$/\1&quot;quiet&quot;/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-35-17"><a id="__codelineno-35-17" name="__codelineno-35-17"></a><a href="#__codelineno-35-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s/^#\(GRUB_TERMINAL=\).*$/\1console/&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-35-18"><a id="__codelineno-35-18" name="__codelineno-35-18"></a><a href="#__codelineno-35-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span>-i<span class="w"> </span>/etc/default/grub
</span><span id="__span-35-19"><a id="__codelineno-35-19" name="__codelineno-35-19"></a><a href="#__codelineno-35-19"><span class="linenos" data-linenos="19 "></span></a>
</span><span id="__span-35-20"><a id="__codelineno-35-20" name="__codelineno-35-20"></a><a href="#__codelineno-35-20"><span class="linenos" data-linenos="20 "></span></a>grub-install<span class="w"> </span>--grub-setup<span class="o">=</span>/bin/true<span class="w"> </span>/dev/sdb
</span><span id="__span-35-21"><a id="__codelineno-35-21" name="__codelineno-35-21"></a><a href="#__codelineno-35-21"><span class="linenos" data-linenos="21 "></span></a>grub-install<span class="w"> </span>--grub-setup<span class="o">=</span>/bin/true<span class="w"> </span>/dev/sda
</span></code></pre></div>
<h2 id="bootloader-konfigurieren">Bootloader konfigurieren<a class="headerlink" href="#bootloader-konfigurieren" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Grub muss noch konfiguriert werden.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1"></a><a href="#__codelineno-36-1"><span class="linenos" data-linenos="1 "></span></a>grub-mkconfig<span class="w"> </span>-o<span class="w"> </span>/boot/grub/grub.cfg
</span></code></pre></div>
<h2 id="systemtools-installieren">Systemtools installieren<a class="headerlink" href="#systemtools-installieren" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Als Nächstes installieren wir noch ein paar notwendige beziehungsweise nützliche Systemtools.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1"></a><a href="#__codelineno-37-1"><span class="linenos" data-linenos="1 "></span></a>cat<span class="w"> </span>&gt;&gt;<span class="w"> </span>/etc/portage/package.use<span class="w"> </span>&lt;&lt;<span class="w"> </span><span class="s2">&quot;EOF&quot;</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2"></a><a href="#__codelineno-37-2"><span class="linenos" data-linenos="2 "></span></a>app-crypt/gnupg<span class="w">  </span>-usb
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3"></a><a href="#__codelineno-37-3"><span class="linenos" data-linenos="3 "></span></a>net-dns/bind-tools<span class="w">  </span>-xml
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4"></a><a href="#__codelineno-37-4"><span class="linenos" data-linenos="4 "></span></a>sys-apps/smartmontools<span class="w">  </span>minimal
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5"></a><a href="#__codelineno-37-5"><span class="linenos" data-linenos="5 "></span></a>EOF
</span><span id="__span-37-6"><a id="__codelineno-37-6" name="__codelineno-37-6"></a><a href="#__codelineno-37-6"><span class="linenos" data-linenos="6 "></span></a>
</span><span id="__span-37-7"><a id="__codelineno-37-7" name="__codelineno-37-7"></a><a href="#__codelineno-37-7"><span class="linenos" data-linenos="7 "></span></a>emerge<span class="w"> </span>gradm<span class="w"> </span>app-crypt/gnupg<span class="w"> </span>bind-tools<span class="w"> </span>ntp<span class="w"> </span>smartmontools
</span></code></pre></div>
<h2 id="systemtools-konfigurieren">Systemtools konfigurieren<a class="headerlink" href="#systemtools-konfigurieren" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Wir sorgen nun dafür, dass unsere Systemzeit mittels <code>cron</code> stündlich mit dem Timeserver der PTB in Braunschweig, dem
Betreiber der deutschen Atomuhr, synchronisiert wird. Zudem aktivieren die regelmässige Überwachung der SMART-Werte
unserer Festplatten.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1"></a><a href="#__codelineno-38-1"><span class="linenos" data-linenos="1 "></span></a>cat<span class="w"> </span>&gt;<span class="w"> </span>/etc/cron.hourly/ntpdate<span class="w"> </span>&lt;&lt;<span class="w"> </span><span class="s2">&quot;EOF&quot;</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2"></a><a href="#__codelineno-38-2"><span class="linenos" data-linenos="2 "></span></a><span class="c1">#!/bin/sh</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3"></a><a href="#__codelineno-38-3"><span class="linenos" data-linenos="3 "></span></a>/usr/sbin/ntpdate<span class="w"> </span>-4<span class="w"> </span>-b<span class="w"> </span>-s<span class="w"> </span>ptbtime2.ptb.de
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4"></a><a href="#__codelineno-38-4"><span class="linenos" data-linenos="4 "></span></a>EOF
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5"></a><a href="#__codelineno-38-5"><span class="linenos" data-linenos="5 "></span></a>
</span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6"></a><a href="#__codelineno-38-6"><span class="linenos" data-linenos="6 "></span></a>chmod<span class="w"> </span><span class="m">0755</span><span class="w"> </span>/etc/cron.hourly/ntpdate
</span><span id="__span-38-7"><a id="__codelineno-38-7" name="__codelineno-38-7"></a><a href="#__codelineno-38-7"><span class="linenos" data-linenos="7 "></span></a>
</span><span id="__span-38-8"><a id="__codelineno-38-8" name="__codelineno-38-8"></a><a href="#__codelineno-38-8"><span class="linenos" data-linenos="8 "></span></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;/dev/sda -a -o on -S on -s (S/../.././02|L/../../6/03)&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/etc/smartd.conf
</span><span id="__span-38-9"><a id="__codelineno-38-9" name="__codelineno-38-9"></a><a href="#__codelineno-38-9"><span class="linenos" data-linenos="9 "></span></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;/dev/sdb -a -o on -S on -s (S/../.././02|L/../../6/03)&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/etc/smartd.conf
</span></code></pre></div>
<h2 id="sysctlconf-einrichten">sysctl.conf einrichten<a class="headerlink" href="#sysctlconf-einrichten" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Mit diesem <code>sed</code> werden ein paar Kernelparameter für die Netzwersicherheit gesetzt.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1"></a><a href="#__codelineno-39-1"><span class="linenos" data-linenos="1 "></span></a>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s/^#net.ipv4/net.ipv4/g&#39;</span><span class="w"> </span>-i<span class="w"> </span>/etc/sysctl.conf
</span></code></pre></div>
<h2 id="root-passwort-setzen">Root-Passwort setzen<a class="headerlink" href="#root-passwort-setzen" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Das Passwort für root sollte mindestens 8 Zeichen lang sein und neben Gross/Klein-Schreibung auch Ziffern und/oder
Sonderzeichen enthalten.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1"></a><a href="#__codelineno-40-1"><span class="linenos" data-linenos="1 "></span></a>passwd<span class="w"> </span>root
</span></code></pre></div>
<h2 id="arbeitsuser-anlegen">Arbeitsuser anlegen<a class="headerlink" href="#arbeitsuser-anlegen" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Wir legen uns nun einen Arbeitsuser für administrative Aufgaben an. Diesen Arbeitsuser stecken wir in die Systemgruppen
<code>admin</code>, <code>users</code> und <code>wheel</code>. Das Passwort für den Arbeitsuser sollte wie das root-Passwort aufgebaut sein, sich von
diesem aber deutlich unterscheiden.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1"></a><a href="#__codelineno-41-1"><span class="linenos" data-linenos="1 "></span></a>groupadd<span class="w"> </span>-g<span class="w"> </span><span class="m">1000</span><span class="w"> </span>admin
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2"></a><a href="#__codelineno-41-2"><span class="linenos" data-linenos="2 "></span></a>useradd<span class="w"> </span>-u<span class="w"> </span><span class="m">1000</span><span class="w"> </span>-g<span class="w"> </span>admin<span class="w"> </span>-G<span class="w"> </span>users,wheel<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;Administrator&#39;</span><span class="w"> </span>-m<span class="w"> </span>-s<span class="w"> </span>/bin/bash<span class="w"> </span>admin
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3"></a><a href="#__codelineno-41-3"><span class="linenos" data-linenos="3 "></span></a>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4"></a><a href="#__codelineno-41-4"><span class="linenos" data-linenos="4 "></span></a>passwd<span class="w"> </span>admin
</span></code></pre></div>
<h2 id="ssh-keys-installieren"><abbr title="Secure Shell">SSH</abbr>-Keys installieren<a class="headerlink" href="#ssh-keys-installieren" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Für den eben angelegten Arbeitsuser müssen nun noch die <abbr title="Secure Shell">SSH</abbr>-Keys erzeugt werden.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1"></a><a href="#__codelineno-42-1"><span class="linenos" data-linenos=" 1 "></span></a>su<span class="w"> </span>-<span class="w"> </span>admin
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2"></a><a href="#__codelineno-42-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3"></a><a href="#__codelineno-42-3"><span class="linenos" data-linenos=" 3 "></span></a>ssh-keygen<span class="w"> </span>-t<span class="w"> </span>ed25519<span class="w"> </span>-O<span class="w"> </span>clear<span class="w"> </span>-O<span class="w"> </span>permit-pty
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4"></a><a href="#__codelineno-42-4"><span class="linenos" data-linenos=" 4 "></span></a>cat<span class="w"> </span>.ssh/id_ed25519.pub<span class="w"> </span>&gt;&gt;<span class="w"> </span>.ssh/authorized_keys
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5"></a><a href="#__codelineno-42-5"><span class="linenos" data-linenos=" 5 "></span></a>ssh-keygen<span class="w"> </span>-t<span class="w"> </span>ecdsa<span class="w"> </span>-b<span class="w"> </span><span class="m">384</span><span class="w"> </span>-O<span class="w"> </span>clear<span class="w"> </span>-O<span class="w"> </span>permit-pty
</span><span id="__span-42-6"><a id="__codelineno-42-6" name="__codelineno-42-6"></a><a href="#__codelineno-42-6"><span class="linenos" data-linenos=" 6 "></span></a>cat<span class="w"> </span>.ssh/id_ecdsa.pub<span class="w"> </span>&gt;&gt;<span class="w"> </span>.ssh/authorized_keys
</span><span id="__span-42-7"><a id="__codelineno-42-7" name="__codelineno-42-7"></a><a href="#__codelineno-42-7"><span class="linenos" data-linenos=" 7 "></span></a>ssh-keygen<span class="w"> </span>-t<span class="w"> </span>rsa<span class="w"> </span>-b<span class="w"> </span><span class="m">4096</span><span class="w"> </span>-O<span class="w"> </span>clear<span class="w"> </span>-O<span class="w"> </span>permit-pty
</span><span id="__span-42-8"><a id="__codelineno-42-8" name="__codelineno-42-8"></a><a href="#__codelineno-42-8"><span class="linenos" data-linenos=" 8 "></span></a>cat<span class="w"> </span>.ssh/id_rsa.pub<span class="w"> </span>&gt;&gt;<span class="w"> </span>.ssh/authorized_keys
</span><span id="__span-42-9"><a id="__codelineno-42-9" name="__codelineno-42-9"></a><a href="#__codelineno-42-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-42-10"><a id="__codelineno-42-10" name="__codelineno-42-10"></a><a href="#__codelineno-42-10"><span class="linenos" data-linenos="10 "></span></a><span class="nb">exit</span>
</span></code></pre></div>
<p>Um uns künftig mit unserem Arbeitsuser einloggen zu können, müssen wir uns dessen <abbr title="Secure Shell">SSH</abbr>-Key (id_rsa) auf unser lokales
System kopieren und ihn dann mit Hilfe der <a href="https://the.earth.li/~sgtatham/putty/latest/htmldoc/Chapter8.html" rel="noopener" target="_blank">PuTTYgen
Dokumentation</a> in
einen für PuTTY lesbaren Key umwandeln.</p>
<div class="language-powershell highlight"><span class="filename">PowerShell</span><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1"></a><a href="#__codelineno-43-1"><span class="linenos" data-linenos="1 "></span></a><span class="n">pscp</span> <span class="n">-P</span> <span class="n">2222</span> <span class="n">-r</span> <span class="n">root</span><span class="nv">@127</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">1</span><span class="p">:/</span><span class="n">mnt</span><span class="p">/</span><span class="n">gentoo</span><span class="p">/</span><span class="n">home</span><span class="p">/</span><span class="n">admin</span><span class="p">/.</span><span class="n">ssh</span> <span class="s2">&quot;${Env:USERPROFILE}\VirtualBox VMs\Gentoo\ssh&quot;</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2"></a><a href="#__codelineno-43-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3"></a><a href="#__codelineno-43-3"><span class="linenos" data-linenos="3 "></span></a><span class="n">puttygen</span> <span class="s2">&quot;${Env:USERPROFILE}\VirtualBox VMs\Gentoo\ssh\id_rsa&quot;</span>
</span></code></pre></div>
<h2 id="reboot-ins-neue-system">Reboot ins neue System<a class="headerlink" href="#reboot-ins-neue-system" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Die Basisinstallation ist nun endlich abgeschlossen und wir können das neue System zum ersten Mal booten.</p>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1"></a><a href="#__codelineno-44-1"><span class="linenos" data-linenos=" 1 "></span></a>umount<span class="w"> </span>/boot
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2"></a><a href="#__codelineno-44-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3"></a><a href="#__codelineno-44-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="nb">exit</span>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4"></a><a href="#__codelineno-44-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-44-5"><a id="__codelineno-44-5" name="__codelineno-44-5"></a><a href="#__codelineno-44-5"><span class="linenos" data-linenos=" 5 "></span></a>umount<span class="w"> </span>/mnt/gentoo/dev/shm
</span><span id="__span-44-6"><a id="__codelineno-44-6" name="__codelineno-44-6"></a><a href="#__codelineno-44-6"><span class="linenos" data-linenos=" 6 "></span></a>umount<span class="w"> </span>/mnt/gentoo/dev/pts
</span><span id="__span-44-7"><a id="__codelineno-44-7" name="__codelineno-44-7"></a><a href="#__codelineno-44-7"><span class="linenos" data-linenos=" 7 "></span></a>umount<span class="w"> </span>/mnt/gentoo/dev
</span><span id="__span-44-8"><a id="__codelineno-44-8" name="__codelineno-44-8"></a><a href="#__codelineno-44-8"><span class="linenos" data-linenos=" 8 "></span></a>umount<span class="w"> </span>/mnt/gentoo/sys
</span><span id="__span-44-9"><a id="__codelineno-44-9" name="__codelineno-44-9"></a><a href="#__codelineno-44-9"><span class="linenos" data-linenos=" 9 "></span></a>umount<span class="w"> </span>/mnt/gentoo/proc
</span><span id="__span-44-10"><a id="__codelineno-44-10" name="__codelineno-44-10"></a><a href="#__codelineno-44-10"><span class="linenos" data-linenos="10 "></span></a>umount<span class="w"> </span>/mnt/gentoo
</span><span id="__span-44-11"><a id="__codelineno-44-11" name="__codelineno-44-11"></a><a href="#__codelineno-44-11"><span class="linenos" data-linenos="11 "></span></a>
</span><span id="__span-44-12"><a id="__codelineno-44-12" name="__codelineno-44-12"></a><a href="#__codelineno-44-12"><span class="linenos" data-linenos="12 "></span></a>shutdown<span class="w"> </span>-P<span class="w"> </span>now
</span></code></pre></div>
<div class="language-powershell highlight"><span class="filename">PowerShell</span><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1"></a><a href="#__codelineno-45-1"><span class="linenos" data-linenos="1 "></span></a><span class="p">&amp;</span> <span class="s2">&quot;${Env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe&quot;</span> <span class="n">storageattach</span> <span class="s2">&quot;Gentoo&quot;</span> <span class="p">-</span><span class="n">-storagectl</span> <span class="s2">&quot;IDE Controller&quot;</span> <span class="p">-</span><span class="n">-port</span> <span class="n">0</span> <span class="p">-</span><span class="n">-device</span> <span class="n">0</span> <span class="p">-</span><span class="n">-type</span> <span class="n">dvddrive</span> <span class="p">-</span><span class="n">-medium</span> <span class="n">emptydrive</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2"></a><a href="#__codelineno-45-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3"></a><a href="#__codelineno-45-3"><span class="linenos" data-linenos="3 "></span></a><span class="p">&amp;</span> <span class="s2">&quot;${Env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe&quot;</span> <span class="n">startvm</span> <span class="s2">&quot;Gentoo&quot;</span>
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4"></a><a href="#__codelineno-45-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5"></a><a href="#__codelineno-45-5"><span class="linenos" data-linenos="5 "></span></a><span class="n">putty</span> <span class="n">-ssh</span> <span class="n">-P</span> <span class="n">2222</span> <span class="n">admin</span><span class="nv">@127</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">1</span>
</span></code></pre></div>
<div class="language-shell highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1"></a><a href="#__codelineno-46-1"><span class="linenos" data-linenos="1 "></span></a>su<span class="w"> </span>-<span class="w"> </span>root
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2"></a><a href="#__codelineno-46-2"><span class="linenos" data-linenos="2 "></span></a>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3"></a><a href="#__codelineno-46-3"><span class="linenos" data-linenos="3 "></span></a>gradm<span class="w"> </span>-P
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4"></a><a href="#__codelineno-46-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5"></a><a href="#__codelineno-46-5"><span class="linenos" data-linenos="5 "></span></a>emerge<span class="w"> </span>-e<span class="w"> </span>-D<span class="w"> </span>@world
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6"></a><a href="#__codelineno-46-6"><span class="linenos" data-linenos="6 "></span></a>
</span><span id="__span-46-7"><a id="__codelineno-46-7" name="__codelineno-46-7"></a><a href="#__codelineno-46-7"><span class="linenos" data-linenos="7 "></span></a>dispatch-conf
</span></code></pre></div>
<h2 id="wie-geht-es-weiter">Wie geht es weiter?<a class="headerlink" href="#wie-geht-es-weiter" title="Anchor link to this section for reference">⚓︎</a></h2>
<p>Natürlich mit der <a href="../hosting_system/">Hosting System</a>.</p>
<p>Viel Spass mit dem neuen Gentoo Basissystem.</p>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Letztes Update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="12. September 2025 22:54:55 CEST">12. September 2025 22:54:55</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Erstellt">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="31. August 2025 12:38:15 CEST">31. August 2025 12:38:15</span>
  </span>

    
    
    
      
  <span class="md-source-file__fact">
    
      
  <span class="md-icon" title="Mitwirkende">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg>
  </span>
  <span>GitHub</span>

    
    <nav>
      
        <a href="https://github.com/JoeUser78" class="md-author" title="@JoeUser78">
          
          <img src="../../../assets/external/avatars.githubusercontent.com/u/1191804.fe356448.png" alt="JoeUser78">
        </a>
      
      
      
    </nav>
  </span>

    
  </aside>





                </main>
                
              </article>
            </div>
      
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16 13v8H8v-8H2L12 3l10 10zm-9-2h3v8h4v-8h3l-5-5z"/></svg>
  Zurück zum Seitenanfang
</button>
        
      </main>
      
            <footer role="contentinfo">
              <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Fußzeile" >
        
          
          <a href="../../freebsd/hosting_system/mailserver/clamav/" class="md-footer__link md-footer__link--prev" aria-label="Zurück: ClamAV">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 22 3 12 13 2v6h8v8h-8zM6 12l5 5v-3h8v-4h-8V7z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Zurück
              </span>
              <div class="md-ellipsis">
                ClamAV
              </div>
            </div>
          </a>
        
        
          
          <a href="../hosting_system/" class="md-footer__link md-footer__link--next" aria-label="Weiter: Hosting System">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Weiter
              </span>
              <div class="md-ellipsis">
                Hosting System
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 16H3V8h8V2l10 10-10 10zm2-9v3H5v4h8v3l5-5z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  <div class="md-copyright__highlight">
    
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">
    Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0)
    </a>
    
    <br />
    
    <strong>
    Copyright © 2002-2025 RootService Team
    </strong>
    
    <br />
    <a href="#__consent">Cookie Settings</a>
  </div>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/JoeUser78" target="_blank" rel="noopener" title="GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://linkedin.com/in/MarkusKohlmeyer78" target="_blank" rel="noopener" title="LinkedIn" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:info@rootservice.org" target="_blank" rel="noopener" title="E-Mail" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M536.4-26.3c9.8-3.5 20.6-1 28 6.3s9.8 18.2 6.3 28l-178 496.9c-5 13.9-18.1 23.1-32.8 23.1-14.2 0-27-8.6-32.3-21.7l-64.2-158c-4.5-11-2.5-23.6 5.2-32.6l94.5-112.4c5.1-6.1 4.7-15-.9-20.6s-14.6-6-20.6-.9l-112.4 94.3c-9.1 7.6-21.6 9.6-32.6 5.2L38.1 216.8c-13.1-5.3-21.7-18.1-21.7-32.3 0-14.7 9.2-27.8 23.1-32.8z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
            </footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            



<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
    
      
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="github" checked>
      <span class="task-list-indicator"></span>
      GitHub
    </label>
  </li>

      
    
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
    
    
      <label class="md-button" for="__settings">Einstellungen</label>
    
  
    
    
      <button type="reset" class="md-button md-button--primary">Ablehnen</button>
    
    
  
    
      <button class="md-button md-button--primary">Akzeptieren</button>
    
    
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tabs.link", "content.tooltips", "header.autohide", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "In Zwischenablage kopiert", "clipboard.copy": "In Zwischenablage kopieren", "search.result.more.one": "1 weiteres Suchergebnis auf dieser Seite", "search.result.more.other": "# weitere Suchergebnisse auf dieser Seite", "search.result.none": "Keine Suchergebnisse", "search.result.one": "1 Suchergebnis", "search.result.other": "# Suchergebnisse", "search.result.placeholder": "Suchbegriff eingeben", "search.result.term.missing": "Es fehlt", "select.version": "Version ausw\u00e4hlen"}, "version": null}</script>
      
    
        <script>
          ((__md_scope = new URL('.', location)),
            (__md_hash = (e) => [...e].reduce((e, _) => (e << 5) - e + _.charCodeAt(0), 0)),
            (__md_get = (e, _ = localStorage, t = __md_scope) => JSON.parse(_.getItem(t.pathname + '.' + e))),
            (__md_set = (e, _, t = localStorage, a = __md_scope) => {
              try {
                t.setItem(a.pathname + '.' + e, JSON.stringify(_));
              } catch (e) {}
            }));
        </script>
        <script defer="defer" src="../../../assets/javascripts/bundle.92b07e13.min.js"></script>
        
        
        <script defer="defer" src="../../../assets/javascripts/extra.js"></script>
        
        
      
  </body>
</html>