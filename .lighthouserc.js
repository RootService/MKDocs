module.exports = {
  ci: {
    collect: {
      method: "node",
      headful: false,
      additive: true,
      url: ["https://localhost:8000"],
      staticDistDir: "./site",
      isSinglePageApplication: false,
      puppeteerScript: ".puppeteerScripts.js",
      puppeteerLaunchOptions: {
        args: ["--allow-no-sandbox-job", "--allow-sandbox-debugging", "--disable-crash-reporter", "--disable-default-browser-promo", "--disable-dev-shm-usage", "--disable-gpu", "--disable-gpu-sandbox", "--enable-automation", "--enable-viewport", "--force-dark-mode", "--headless", "--no-default-browser-check", "--no-sandbox", "--no-zygote", "--reduce-accept-language", "--reduce-user-agent-minor-version", "--reduce-user-agent-platform-oscpu", "--remote-debugging-port=9222", "--window-size=3840,2160"],
        browser: 0,
        ChromeReleaseChannel: 0,
        FirefoxChannel: 0,
        SlowMo: 500,
        defaultViewport: { width: 3840, height: 2160 },
      }, // https://www.puppeteersharp.com/api/PuppeteerSharp.LaunchOptions.html
      disableStorageReset: true,
      settings: {
        "chromeFlags": "--allow-no-sandbox-job --allow-sandbox-debugging --disable-crash-reporter --disable-default-browser-promo --disable-dev-shm-usage --disable-gpu --disable-gpu-sandbox --enable-automation --enable-viewport --force-dark-mode --headless --no-default-browser-check --no-sandbox --no-zygote --reduce-accept-language --reduce-user-agent-minor-version --reduce-user-agent-platform-oscpu --remote-debugging-port=9222 --window-size=3840,2160",
        "preset": "desktop",
        "configPath": "desktopConfig.js",
        "plugins": ["lighthouse-plugin-field-performance"],
        "disableStorageReset": true,
        "maxWaitForLoad": 60000,
        "throttlingMethod": "devtools",
      },
      numberOfRuns: 3,
      maxAutodiscoverUrls: 5,
      staticDirFileDiscoveryDepth: 2,
      port: 9222,
      output: ["html", "json"],
      outputPath: ".lighthouseci/",
    },
    assert: {
      preset: "lighthouse:recommended",
      assertions: {
        "categories:performance": ["error", { minScore: 0.9 }],
        "categories:accessibility": ["error", { minScore: 0.9 }],
        "categories:best-practices": ["error", { minScore: 0.9 }],
        "categories:seo": ["error", { minScore: 0.9 }],
        "color-contrast": "error",
        "aria-valid-attr": "error",
        "aria-roles": "error",
        "aria-required-attr": "error",
        "aria-valid-attr-value": "error",
        "aria-allowed-role": "error",
        "content-width": ["warn", { "minScore": 0 }],
        "render-blocking-resources": ["warn", { "numericValue": 0 }],
        "uses-rel-preconnect": ["warn", { "numericValue": 0 }],
        "maskable-icon": ["warn", { "minScore": 0.9 }],
        "csp-xss": ["warn", { "minScore": 0 }],
        "bf-cache": ["warn", { "minScore": 0 }],
        "total-byte-weight": ["warn", { "minScore": 0 }],
        "target-size": ["warn", { "minScore": 0 }],
        "network-dependency-tree-insight": ["warn", { "minScore": 0 }],
      },
      budgetsFile: ".budgets.json",
      includePassedAssertions: true,
    },
    upload: {
      target: "filesystem",
      outputDir: ".lighthouseci/",
    },
  },
};
